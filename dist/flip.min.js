(()=>{"use strict";function t(t,e,n){return t.dispatchEvent(new CustomEvent(e,n))}var e;!function(t){t.flipStart="flipstart",t.flipCandidateStart="flipcandidatestart",t.flipCandidateEnd="flipcandidateend",t.flipEnd="flipend"}(e||(e={}));const n=e,i=function(t={}){const{className:e,slot:n,style:i="",attributes:r={},innerHTML:a="<slot></slot>"}=t,s=document.createElement("div");return s.attachShadow({mode:"open"}).innerHTML=`\n    <style>\n      \n  :host {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    pointer-events: none;\n    display: block;\n  }\n\n  slot {\n    display: block;\n  }\n\n      ${i}\n    </style>\n    ${a}\n  `,void 0!==e&&s.classList.add(e),void 0!==n&&s.setAttribute("slot",n),Object.keys(r).forEach((t=>{s.setAttribute(t,r[t])})),s};var r;!function(t){t.temp="temp"}(r||(r={}));const a=r;var s;!function(t){t.current="current",t.temp="temp"}(s||(s={}));const o=s,d=async function(e){const{nextCandidateInfo:r}=e,{index:s}=r,d=i({className:a.temp,slot:o.temp}),l=this.querySelector(`.${a.temp}`);l&&l.remove(),this.index=s,this.append(d),t(this,n.flipCandidateStart,{bubbles:!0,cancelable:!0,composed:!0,detail:{...e,tempCandidateNode:d}})&&await M.flipAnimation({...e,tempCandidateNode:d}),t(this,n.flipCandidateEnd,{bubbles:!0,cancelable:!1,composed:!0,detail:{...e,tempCandidateNode:d}}),d.remove()},l=async function(e,i){const r=("object"!=typeof e||e instanceof HTMLElement?i:e)??{},{mode:a=this.mode,duration:s=this.duration,direction:o=this.direction,minFlips:l=this.minFlips,maxFlips:p=this.maxFlips,perspective:c=this.perspective}=r,h={mode:a,duration:s,direction:o,minFlips:l,maxFlips:p,perspective:c},u=e===r||void 0===e?this.getNextCandidateIndex({mode:a}):e,f=this.getCandidateInfo(u),{index:v,node:g}=f;if(null===g)throw new ReferenceError(`Target candidate doesn't exist: ${u}`);const y=this.getCandidateInfo(this.index);if(!t(this,n.flipStart,{bubbles:!0,cancelable:!0,composed:!0,detail:{...h,lastCandidateInfo:y,targetCandidateInfo:f}}))return;const m=async(t=1)=>{const e=t<p?this.getNextCandidateIndex({mode:a}):v,n=this.getCandidateInfo(e),i=this.getCandidateInfo(this.index);await d.call(this,{...h,lastCandidateInfo:i,nextCandidateInfo:n}),e!==v&&await m(t+1)};await m(),t(this,n.flipEnd,{bubbles:!0,cancelable:!1,composed:!0,detail:{...h,lastCandidateInfo:y,targetCandidateInfo:f}})};var p;!function(t){t.up="up",t.down="down",t.left="left",t.right="right"}(p||(p={}));const c=p,h=function t(e){const n=e.cloneNode(!1);if(e instanceof HTMLCanvasElement){const t=n;t.width=e.width,t.height=e.height,t.getContext("2d")?.drawImage?.(e,0,0)}return e.childNodes.forEach((e=>{n.appendChild(t(e))})),n},u=function(t,e){const n=/^@/.test(t)?"@-":"-",i=t.replace(/^@/,"").replace(/;?$/,";");return(Array.isArray(e)?e:[e]).map((t=>`${n}${t}-${i}`)).concat(t).join("\n")},f=t=>`\n  ${u(`@keyframes flip {\n    0% {\n      ${u("transform: perspective(var(--hori-perspective)) rotateY(0);","webkit")}\n    }\n    100% {\n      ${u("transform: perspective(var(--hori-perspective)) rotateY(var(--end-deg));","webkit")}\n    }\n  }`,"webkit")}\n\n  :host {\n    --hori-perspective: ${t.perspective};\n    --right-x-left: 50%;\n    --right-x-right: calc(100% + 100vw);\n    --left-x-left: -100vw;\n    --left-x-right: 50%;\n    --left-end-deg: -180deg;\n    --right-end-deg: 180deg;\n\n    ${u("clip-path: polygon(\n      var(--start-x-left) -100vh,\n      var(--start-x-right) -100vh,\n      var(--start-x-right) calc(100% + 100vh),\n      var(--start-x-left) calc(100% + 100vh)\n    );","webkit")}\n    ${u("animation: flip var(--duration) forwards linear;","webkit")}\n  }\n`,v=t=>`\n  ${u(`@keyframes flip {\n    0% {\n      ${u("transform: perspective(var(--vert-perspective)) rotateX(0);","webkit")}\n    }\n    100% {\n      ${u("transform: perspective(var(--vert-perspective)) rotateX(var(--end-deg));","webkit")}\n    }\n  }`,"webkit")}\n\n  :host {\n    --vert-perspective: ${t.perspective};\n    --upper-y-top: -100vh;\n    --upper-y-bottom: 50%;\n    --lower-y-top: 50%;\n    --lower-y-bottom: calc(100% + 100vh);\n    --down-end-deg: -180deg;\n    --up-end-deg: 180deg;\n\n    ${u("clip-path: polygon(\n      -100vw var(--start-y-top),\n      calc(100% + 100vw) var(--start-y-top),\n      calc(100% + 100vw) var(--start-y-bottom),\n      -100vw var(--start-y-bottom)\n    );","webkit")}\n    ${u("animation: flip var(--duration) forwards linear;","webkit")}\n  }\n`,g=async function(t){const{direction:e}=t;switch(e){default:throw new TypeError(`Invalid direction: ${e}`);case c.up:case c.down:return function(t){const{duration:e,direction:n,lastCandidateInfo:r,nextCandidateInfo:a,tempCandidateNode:s}=t,{node:o}=r,d=a.node,l=e/1e3,p=i({style:v(t)}),f=i({style:`\n  ${u("@keyframes clip-next {\n    0% { opacity: 0 }\n    50%, 100% { opacity: 1 }\n  }","webkit")}\n\n  :host {\n    ${u("transform: rotateX(180deg);","webkit")}\n    ${u("animation: clip-next var(--duration) forwards steps(1, end);","webkit")}\n  }\n`}),g=h(d);switch(n){default:case c.down:p.style.setProperty("--start-y-top","var(--upper-y-top)"),p.style.setProperty("--start-y-bottom","var(--upper-y-bottom)"),p.style.setProperty("--end-y-top","var(--lower-y-top)"),p.style.setProperty("--end-y-bottom","var(--lower-y-bottom)"),p.style.setProperty("--end-deg","var(--down-end-deg)");break;case c.up:p.style.setProperty("--start-y-top","var(--lower-y-top)"),p.style.setProperty("--start-y-bottom","var(--lower-y-bottom)"),p.style.setProperty("--end-y-top","var(--upper-y-top)"),p.style.setProperty("--end-y-bottom","var(--upper-y-bottom)"),p.style.setProperty("--end-deg","var(--up-end-deg)")}if(p.style.setProperty("--duration",`${l}s`),g.removeAttribute("slot"),f.append(g),p.append(f),o){const t=i({style:`\n  :host {\n    --upper-y-top: -100vh;\n    --upper-y-bottom: 50%;\n    --lower-y-top: 50%;\n    --lower-y-bottom: calc(100% + 100vh);\n\n    ${u("clip-path: polygon(\n      -100vw var(--y-top),\n      calc(100% + 100vw) var(--y-top),\n      calc(100% + 100vw) var(--y-bottom),\n      -100vw var(--y-bottom)\n    );","webkit")}\n  }\n`}),e=i({style:`\n  ${u("@keyframes clip-last {\n    0% { opacity: 1 }\n    50%, 100% { opacity: 0 }\n  }","webkit")}\n\n  :host {\n    ${u("animation: clip-last var(--duration) forwards steps(1, end);","webkit")}\n  }\n`}),r=h(o),a=h(o);switch(n){default:case c.down:t.style.setProperty("--y-top","var(--lower-y-top)"),t.style.setProperty("--y-bottom","var(--lower-y-bottom)");break;case c.up:t.style.setProperty("--y-top","var(--upper-y-top)"),t.style.setProperty("--y-bottom","var(--upper-y-bottom)")}r.removeAttribute("slot"),e.append(r),p.append(e),a.removeAttribute("slot"),t.append(a),s.append(t)}return new Promise((t=>{s.addEventListener("animationend",(()=>{t(void 0)}),{once:!0}),s.append(p)}))}(t);case c.right:case c.left:return function(t){const{duration:e,direction:n,lastCandidateInfo:r,nextCandidateInfo:a,tempCandidateNode:s}=t,{node:o}=r,d=a.node,l=e/1e3,p=i({style:f(t)}),v=i({style:`\n  ${u("@keyframes clip-next {\n    0% { opacity: 0 }\n    50%, 100% { opacity: 1 }\n  }","webkit")}\n\n  :host {\n    ${u("transform: rotateY(180deg);","webkit")}\n    ${u("animation: clip-next var(--duration) forwards steps(1, end);","webkit")}\n  }\n`}),g=h(d);switch(n){default:case c.left:p.style.setProperty("--start-x-left","var(--right-x-left)"),p.style.setProperty("--start-x-right","var(--right-x-right)"),p.style.setProperty("--end-x-left","var(--left-x-left)"),p.style.setProperty("--end-x-right","var(--left-x-right)"),p.style.setProperty("--end-deg","var(--left-end-deg)");break;case c.right:p.style.setProperty("--start-x-left","var(--left-x-left)"),p.style.setProperty("--start-x-right","var(--left-x-right)"),p.style.setProperty("--end-x-left","var(--right-x-left)"),p.style.setProperty("--end-x-right","var(--right-x-right)"),p.style.setProperty("--end-deg","var(--right-end-deg)")}if(p.style.setProperty("--duration",`${l}s`),g.removeAttribute("slot"),v.append(g),p.append(v),o){const t=i({style:`\n  :host {\n    --right-x-left: 50%;\n    --right-x-right: 100vw;\n    --left-x-left: -100vw;\n    --left-x-right: 50%;\n\n    ${u("clip-path: polygon(\n      var(--x-left) -100vh,\n      var(--x-right) -100vh,\n      var(--x-right) calc(100% + 100vh),\n      var(--x-left) calc(100% + 100vh)\n    );","webkit")}\n  }\n`}),e=i({style:`\n  ${u("@keyframes clip-last {\n    0% { opacity: 1 }\n    50%, 100% { opacity: 0 }\n  }","webkit")}\n\n  :host {\n    ${u("animation: clip-last var(--duration) forwards steps(1, end);","webkit")}\n  }\n`}),r=h(o),a=h(o);switch(n){default:case c.left:t.style.setProperty("--x-left","var(--left-x-left)"),t.style.setProperty("--x-right","var(--left-x-right)");break;case c.right:t.style.setProperty("--x-left","var(--right-x-left)"),t.style.setProperty("--x-right","var(--right-x-right)")}r.removeAttribute("slot"),e.append(r),p.append(e),a.removeAttribute("slot"),t.append(a),s.append(t)}return new Promise((t=>{s.addEventListener("animationend",(()=>{t(void 0)}),{once:!0}),s.append(p)}))}(t)}},y=function(t){if(null===t)return-1;const{candidatesCatch:e}=this;return t instanceof HTMLElement?e.indexOf(t):e.findIndex((e=>M.getCandidateValue(e)===t))},m=function(t){if(null===t)return{node:null,index:-1,value:null};if(t instanceof HTMLElement){const e=this.getCandidateIndex(t),n=-1===e?null:t;return{node:n,index:e,value:M.getCandidateValue(n)}}if("string"==typeof t){const e=this.getCandidateIndex(t),n=-1===e?null:this.getCandidateNode(e);return{node:n,index:e,value:M.getCandidateValue(n)}}const e=this.getCandidateNode(t);return{node:e,index:null===e?-1:t,value:M.getCandidateValue(e)}},x=function(t){return null===t?null:"string"==typeof t?this.candidatesCatch.find((e=>M.getCandidateValue(e)===t))??null:this.candidatesCatch[t]??null},b=function(t){return null===t?null:t instanceof HTMLElement?M.getCandidateValue(t):M.getCandidateValue(this.candidatesCatch[t])};var w;!function(t){t.loop="loop",t.random="random"}(w||(w={}));const C=w,$=function(t={}){const{mode:e=this.mode}=t,{index:n,candidatesCatch:i}=this,{length:r}=i;switch(e){default:throw new TypeError(`Invalid mode: ${e}`);case C.loop:return r>0?(n+1)%r:-1;case C.random:switch(r){case 0:return-1;case 1:return this.index;default:{let t=n;for(;t===n;)t=Math.floor(r*Math.random());return t}}}};var E;!function(t){t.index="index",t.value="value",t.mode="mode",t.duration="duration",t.direction="direction",t.minFlips="min-flips",t.maxFlips="max-flips",t.perspective="perspective"}(E||(E={}));const I=E,{isNaN:A}=globalThis,k=document.createElement("template"),N={[I.mode]:C.loop,[I.duration]:400,[I.direction]:c.down,[I.index]:-1,[I.minFlips]:0,[I.maxFlips]:1/0};k.innerHTML=`\n  <style>\n    :host {\n      position: relative;\n      display: inline-block;\n    }\n\n    slot {\n      position: relative;\n      z-index: 0;\n    }\n\n    slot:not([name]) {\n      display: none;\n    }\n  </style>\n  <flip>\n    <slot></slot>\n    <slot name="${o.current}"></slot>\n    <slot name="${o.temp}"></slot>\n  </flip>\n`;class P extends HTMLElement{candidatesCatch=[];constructor(){super();const t=this.attachShadow({mode:"open"});t.append(k.content.cloneNode(!0)),this.rootElement=t.querySelector("flip"),t.querySelector("slot:not([name])").addEventListener("slotchange",(()=>{this.candidatesCatch=Array.from(this.querySelectorAll(":scope > :not([slot=temp])"));const{candidatesCatch:t}=this;if(-1===this.index&&this.hasAttribute(I.value)&&(this.value=this.getAttribute(I.value)),this.index>=t.length||this.index<0){const e=t.length>0?0:-1;this.index=e}}))}static get DIRECTION(){return{...c}}static get MODE(){return{...C}}static get EVENT(){return{...n}}static get observedAttributes(){return[I.index,I.value]}attributeChangedCallback(t){switch(t){default:break;case I.index:this.hasAttribute(I.index)&&(this.index=Number(this.getAttribute(I.index)));break;case I.value:this.hasAttribute(I.value)&&(this.value=this.getAttribute(I.value))}}static getCandidateValue(t){return t?.getAttribute?.(I.value)??null}static flipAnimation=g;get candidates(){return[...this.candidatesCatch]}get mode(){const t=this.getAttribute(I.mode);return null!==t&&Object.values(C).includes(t)?t:N[I.mode]}set mode(t){if(!Object.values(C).includes(t))throw new TypeError(`Invalid mode: ${t}`);this.setAttribute(I.mode,t)}get duration(){const t=this.getAttribute(I.duration);return null===t||0===t.length?N[I.duration]:Number(t)}set duration(t){if(A(t))throw new TypeError(`Invalid duration: ${t}`);if(t<0)throw new RangeError(`Duration should not be lesser than 0: ${t}`);this.setAttribute(I.duration,`${t}`)}get direction(){const t=this.getAttribute(I.direction);return Object.values(c).includes(t)?t:N[I.direction]}set direction(t){if(!Object.values(c).includes(t))throw new TypeError(`Invalid direction: ${t}`);this.setAttribute(I.direction,t)}get minFlips(){const t=this.getAttribute(I.minFlips);return null===t||0===t.length?N[I.minFlips]:Number(t)}set minFlips(t){if(A(t))throw new TypeError(`Invalid min flips: ${t}`);if(parseInt(`${t}`,10)!==t)throw new TypeError(`Min flips should be an integer: ${t}`);if(t<0)throw new RangeError(`Min flips should not be lesser than 0: ${t}`);if(this.setAttribute(I.minFlips,`${t}`),this.maxFlips<t)throw new RangeError("Setting min flips that is greater than max flips might cause flipping error")}get maxFlips(){const t=this.getAttribute(I.maxFlips);return null===t||0===t.length?N[I.maxFlips]:Number(t)}set maxFlips(t){if(A(t))throw new TypeError(`Invalid max flips: ${t}`);if(parseInt(`${t}`,10)!==t)throw new TypeError(`Max flips should be an integer: ${t}`);if(t<0)throw new RangeError(`Max flips should not be lesser than 0: ${t}`);if(this.setAttribute(I.maxFlips,`${t}`),this.minFlips>t)throw new RangeError("Setting max flips that is less than min flips might cause flipping error")}get perspective(){const t=this.getAttribute(I.perspective);if(null!==t)return t;const{clientWidth:e,clientHeight:n}=this;return 2*Math.max(e,n)+"px"}set perspective(t){"string"==typeof t&&t.length>0&&this.setAttribute(I.perspective,t)}get index(){const t=this.getAttribute(I.index);return null===t||0===t.length?N[I.index]:Number(t)%this.candidates.length}set index(t){if(A(t))throw new TypeError(`Invalid index: ${t}`);if(parseInt(`${t}`,10)!==t)throw new TypeError(`Index should be an integer: ${t}`);const{candidatesCatch:e}=this,n=this.getCandidateInfo(t),{index:i,value:r,node:a}=n;if(null===a&&e.length>0)throw new Error(`Illegal index: ${t}`);this.querySelectorAll(`[slot="${o.current}"]`).forEach((t=>{t.removeAttribute("slot")})),a?.setAttribute?.("slot",o.current),i!==this.index&&(this.setAttribute(I.index,`${i}`),r?this.setAttribute(I.value,r):this.removeAttribute(I.value))}get value(){return this.getCandidateValue(this.index)}set value(t){if(null!==t&&"string"!=typeof t)throw new TypeError(`Invalid value: ${t}`);this.index=this.getCandidateIndex(t)}get candidate(){return this.getCandidateNode(this.index)}set candidate(t){this.index=this.getCandidateIndex(t)}getCandidateNode=x;getCandidateIndex=y;getCandidateValue=b;getCandidateInfo=m;getNextCandidateIndex=$;getNextCandidateNode(...t){const e=this.getNextCandidateIndex(...t);return this.getCandidateNode(e)}getNextCandidateValue(...t){const e=this.getNextCandidateIndex(...t);return this.getCandidateValue(e)}getNextCandidateInfo(...t){const e=this.getNextCandidateIndex(...t);return this.getCandidateInfo(e)}flip(...t){return l.call(this,...t)}}var T,F;T=P,F="flip-pack",customElements.get(F)?Promise.reject(new Error(`Already defined <${F}>`)):(customElements.define(F,T),customElements.whenDefined(F));const M=P})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU9sSSxLQUFLb0YsaUJBQWlCeEYsR0FNL0J1SSx5QkFBeUJELEdBQ3ZCLE1BQU10SSxFQUFZSSxLQUFLbUIseUJBQXlCK0csR0FFaEQsT0FBT2xJLEtBQUtnSSxrQkFBa0JwSSxHQU1oQ3dJLHdCQUF3QkYsR0FDdEIsTUFBTXRJLEVBQVlJLEtBQUttQix5QkFBeUIrRyxHQUVoRCxPQUFPbEksS0FBS3FCLGlCQUFpQnpCLEdBYS9CeUksUUFBUUgsR0FDTixPQUFPRyxFQUFBQSxLQUFVckksUUFBU2tJLElDdGM5QixJQUNFSSxFQUNBQyxFQURBRCxFRHljYzlILEVDeGNkK0gsRURTZSxZQ1BYQyxlQUFlQyxJQUFJRixHQUNkakUsUUFBUW9FLE9BQ2IsSUFBSVgsTUFBTyxvQkFBbUJRLFFBSWxDQyxlQUFlRyxPQUFPSixFQUFVRCxHQUV6QkUsZUFBZUksWUFBWUwsSURnY3BDLFciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdXRpbHMvZXZlbnRIYW5kbGVyLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy92YWx1ZXMvZXZlbnQudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL3V0aWxzL2NyZWF0ZVRlbXBOb2RlLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy92YWx1ZXMvY2xhc3NOYW1lLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy92YWx1ZXMvc2xvdC50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvbWV0aG9kcy9mbGlwL2ZsaXBPbmVDYW5kaWRhdGUudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL21ldGhvZHMvZmxpcC9pbmRleC50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdmFsdWVzL2RpcmVjdGlvbi50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdXRpbHMvY2xvbmVOb2RlLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy91dGlscy9wcmVmaXhDc3MudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL21ldGhvZHMvZmxpcC9ob3Jpem9udGFsLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy9tZXRob2RzL2ZsaXAvdmVydGljYWwudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL21ldGhvZHMvZmxpcC9mbGlwQW5pbWF0aW9uLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy9tZXRob2RzL2dldENhbmRpZGF0ZUluZGV4LnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy9tZXRob2RzL2dldENhbmRpZGF0ZUluZm8udHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL21ldGhvZHMvZ2V0Q2FuZGlkYXRlTm9kZS50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvbWV0aG9kcy9nZXRDYW5kaWRhdGVWYWx1ZS50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdmFsdWVzL21vZGUudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL21ldGhvZHMvZ2V0TmV4dENhbmRpZGF0ZUluZGV4LnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy92YWx1ZXMvYXR0cmlidXRlLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy9mbGlwLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy91dGlscy9yZWdpc3RlckVsZW1lbnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsidHlwZSBFdmVudEhvbGRlciA9IEhUTUxFbGVtZW50IHwgRG9jdW1lbnQgfCBXaW5kb3c7XG50eXBlIEV2ZW50TGlzdGVuZXIgPSAoLi4uYXJnczogYW55W10pID0+IHZvaWQ7XG5cbmludGVyZmFjZSBFdmVudExpc3RlbmVyT3B0aW9ucyB7XG4gIGNhcHR1cmU/OiBib29sZWFuO1xuICBvbmNlPzogYm9vbGVhbjtcbiAgcGFzc2l2ZT86IGJvb2xlYW47XG59XG5cbi8qKlxuICogQWRkcyBldmVudCBvZiB0eXBlIHRvIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKFxuICByZWY6IEV2ZW50SG9sZGVyLFxuICB0eXBlOiBzdHJpbmcsXG4gIGxpc3RlbmVyOiBFdmVudExpc3RlbmVyLFxuICBvcHRpb25zPzogRXZlbnRMaXN0ZW5lck9wdGlvbnMsXG4pOiB2b2lkIHtcbiAgcmVmLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIEFkZHMgZXZlbnRzIG9mIHR5cGVzIHRvIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycyhcbiAgcmVmOiBFdmVudEhvbGRlcixcbiAgdHlwZXM6IHN0cmluZ1tdLFxuICBsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lcixcbiAgb3B0aW9ucz86IEV2ZW50TGlzdGVuZXJPcHRpb25zLFxuKTogdm9pZCB7XG4gIHR5cGVzLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICBhZGRFdmVudExpc3RlbmVyKHJlZiwgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGV2ZW50IG9mIHR5cGUgZnJvbSBlbGVtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgcmVmOiBFdmVudEhvbGRlcixcbiAgdHlwZTogc3RyaW5nLFxuICBsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lcixcbiAgb3B0aW9ucz86IEV2ZW50TGlzdGVuZXJPcHRpb25zLFxuKTogdm9pZCB7XG4gIHJlZi5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGV2ZW50cyBvZiB0eXBlcyBmcm9tIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVycyhcbiAgcmVmOiBFdmVudEhvbGRlcixcbiAgdHlwZXM6IHN0cmluZ1tdLFxuICBsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lcixcbiAgb3B0aW9ucz86IEV2ZW50TGlzdGVuZXJPcHRpb25zLFxuKTogdm9pZCB7XG4gIHR5cGVzLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICByZWYucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucyk7XG4gIH0pO1xufVxuXG5pbnRlcmZhY2UgQ3VzdG9tRXZlbnRJbml0PFQ+IHtcbiAgZGV0YWlsPzogVDtcbiAgYnViYmxlcz86IGJvb2xlYW47XG4gIGNhbmNlbGFibGU/OiBib29sZWFuO1xuICBjb21wb3NlZD86IGJvb2xlYW47XG59XG5cbi8qKlxuICogVHJpZ2dlcnMgZXZlbnQgYW5kIHJldHVybnMgZmFsc2UgaWYgdGhlIGV2ZW50IGlzIGNhbmNlbGxlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyaWdnZXJFdmVudDxUPihcbiAgcmVmOiBFdmVudEhvbGRlcixcbiAgdHlwZTogc3RyaW5nLFxuICBvcHRpb25zPzogQ3VzdG9tRXZlbnRJbml0PFQ+LFxuKTogYm9vbGVhbiB7XG4gIHJldHVybiByZWYuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQodHlwZSwgb3B0aW9ucykpO1xufVxuXG4vKipcbiAqIFRyaWdnZXJzIGV2ZW50cyBhbmQgcmV0dXJucyBmYWxzZSBpZiBhbnkgb2YgdGhlIGV2ZW50IGlzXG4gKiBjYW5jZWxsZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmlnZ2VyRXZlbnRzPFQ+KFxuICByZWY6IEV2ZW50SG9sZGVyLFxuICB0eXBlczogc3RyaW5nW10sXG4gIG9wdGlvbnM/OiBDdXN0b21FdmVudEluaXQ8VD4sXG4pOiBib29sZWFuIHtcbiAgcmV0dXJuIHR5cGVzLmV2ZXJ5KCh0eXBlKSA9PiB0cmlnZ2VyRXZlbnQocmVmLCB0eXBlLCBvcHRpb25zKSk7XG59XG4iLCJlbnVtIEV2ZW50IHtcbiAgZmxpcFN0YXJ0ID0gJ2ZsaXBzdGFydCcsXG4gIGZsaXBDYW5kaWRhdGVTdGFydCA9ICdmbGlwY2FuZGlkYXRlc3RhcnQnLFxuICBmbGlwQ2FuZGlkYXRlRW5kID0gJ2ZsaXBjYW5kaWRhdGVlbmQnLFxuICBmbGlwRW5kID0gJ2ZsaXBlbmQnLFxufVxuXG5leHBvcnQgZGVmYXVsdCBFdmVudDtcbiIsImNvbnN0IHRlbXBDYW5kaWRhdGVDc3MgPSBgXG4gIDpob3N0IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIHJpZ2h0OiAwO1xuICAgIGJvdHRvbTogMDtcbiAgICBsZWZ0OiAwO1xuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICB9XG5cbiAgc2xvdCB7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gIH1cbmA7XG5cbmludGVyZmFjZSBUZW1wTm9kZU9wdGlvbnMge1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gIHNsb3Q/OiBzdHJpbmc7XG4gIHN0eWxlPzogc3RyaW5nO1xuICBhdHRyaWJ1dGVzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgaW5uZXJIVE1MPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSB0ZW1wIG5vZGUuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVRlbXBOb2RlKFxuICBvcHRpb25zOiBUZW1wTm9kZU9wdGlvbnMgPSB7fSxcbik6IEhUTUxFbGVtZW50IHtcbiAgY29uc3Qge1xuICAgIGNsYXNzTmFtZSxcbiAgICBzbG90LFxuICAgIHN0eWxlID0gJycsXG4gICAgYXR0cmlidXRlcyA9IHt9LFxuICAgIGlubmVySFRNTCA9ICc8c2xvdD48L3Nsb3Q+JyxcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHRlbXBOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnN0IHNoYWRvd1Jvb3QgPSB0ZW1wTm9kZS5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XG5cbiAgc2hhZG93Um9vdC5pbm5lckhUTUwgPSBgXG4gICAgPHN0eWxlPlxuICAgICAgJHt0ZW1wQ2FuZGlkYXRlQ3NzfVxuICAgICAgJHtzdHlsZX1cbiAgICA8L3N0eWxlPlxuICAgICR7aW5uZXJIVE1MfVxuICBgO1xuXG4gIGlmIChjbGFzc05hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgIHRlbXBOb2RlLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgfVxuICBpZiAoc2xvdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGVtcE5vZGUuc2V0QXR0cmlidXRlKCdzbG90Jywgc2xvdCk7XG4gIH1cblxuICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICB0ZW1wTm9kZS5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICByZXR1cm4gdGVtcE5vZGU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVRlbXBOb2RlO1xuIiwiZW51bSBDbGFzc05hbWUge1xuICB0ZW1wID0gJ3RlbXAnLFxufVxuXG5leHBvcnQgZGVmYXVsdCBDbGFzc05hbWU7XG4iLCJlbnVtIFNsb3Qge1xuICBjdXJyZW50ID0gJ2N1cnJlbnQnLFxuICB0ZW1wID0gJ3RlbXAnLFxufVxuXG5leHBvcnQgZGVmYXVsdCBTbG90O1xuIiwiaW1wb3J0IHsgRmxpcE9wdGlvbnMgfSBmcm9tICcuJztcbmltcG9ydCBGbGlwIGZyb20gJy4uLy4uL2ZsaXAnO1xuaW1wb3J0IGNyZWF0ZVRlbXBOb2RlIGZyb20gJy4uLy4uL3V0aWxzL2NyZWF0ZVRlbXBOb2RlJztcbmltcG9ydCB7IHRyaWdnZXJFdmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL2V2ZW50SGFuZGxlcic7XG5pbXBvcnQgQ2xhc3NOYW1lIGZyb20gJy4uLy4uL3ZhbHVlcy9jbGFzc05hbWUnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4uLy4uL3ZhbHVlcy9ldmVudCc7XG5pbXBvcnQgU2xvdCBmcm9tICcuLi8uLi92YWx1ZXMvc2xvdCc7XG5pbXBvcnQgeyBDYW5kaWRhdGVJbmZvIH0gZnJvbSAnLi4vZ2V0Q2FuZGlkYXRlSW5mbyc7XG5pbXBvcnQgeyBGbGlwQW5pbWF0aW9uT3B0aW9uIH0gZnJvbSAnLi9mbGlwQW5pbWF0aW9uJztcblxuZXhwb3J0IGludGVyZmFjZSBGbGlwT25lQ2FuZGlkYXRlT3B0aW9ucyBleHRlbmRzIFJlcXVpcmVkPEZsaXBPcHRpb25zPiB7XG4gIGxhc3RDYW5kaWRhdGVJbmZvOiBDYW5kaWRhdGVJbmZvO1xuICBuZXh0Q2FuZGlkYXRlSW5mbzogQ2FuZGlkYXRlSW5mbztcbn1cblxuLyoqXG4gKiBGbGlwcyBjYXJkIG9uY2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGZsaXBPbmVDYW5kaWRhdGUoXG4gIHRoaXM6IEZsaXAsXG4gIG9wdGlvbnM6IEZsaXBPbmVDYW5kaWRhdGVPcHRpb25zLFxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHsgbmV4dENhbmRpZGF0ZUluZm8gfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHtcbiAgICBpbmRleDogbmV4dEluZGV4LFxuICB9ID0gbmV4dENhbmRpZGF0ZUluZm87XG4gIGNvbnN0IHRlbXBDYW5kaWRhdGVOb2RlID0gY3JlYXRlVGVtcE5vZGUoe1xuICAgIGNsYXNzTmFtZTogQ2xhc3NOYW1lLnRlbXAsXG4gICAgc2xvdDogU2xvdC50ZW1wLFxuICB9KTtcbiAgY29uc3QgbGFzdFRlbXBDYXJkID0gdGhpcy5xdWVyeVNlbGVjdG9yKGAuJHtDbGFzc05hbWUudGVtcH1gKTtcblxuICBpZiAobGFzdFRlbXBDYXJkKSB7XG4gICAgbGFzdFRlbXBDYXJkLnJlbW92ZSgpO1xuICB9XG5cbiAgdGhpcy5pbmRleCA9IG5leHRJbmRleDtcbiAgdGhpcy5hcHBlbmQodGVtcENhbmRpZGF0ZU5vZGUpO1xuXG4gIGNvbnN0IHBhc3NGbGlwQ2FyZFN0YXJ0RXZlbnQgPSB0cmlnZ2VyRXZlbnQ8RmxpcEFuaW1hdGlvbk9wdGlvbj4oXG4gICAgdGhpcyxcbiAgICBFdmVudC5mbGlwQ2FuZGlkYXRlU3RhcnQsXG4gICAge1xuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgICBjb21wb3NlZDogdHJ1ZSxcbiAgICAgIGRldGFpbDoge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICB0ZW1wQ2FuZGlkYXRlTm9kZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgKTtcblxuICBpZiAocGFzc0ZsaXBDYXJkU3RhcnRFdmVudCkge1xuICAgIGF3YWl0IEZsaXAuZmxpcEFuaW1hdGlvbih7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgdGVtcENhbmRpZGF0ZU5vZGUsXG4gICAgfSk7XG4gIH1cblxuICB0cmlnZ2VyRXZlbnQ8RmxpcEFuaW1hdGlvbk9wdGlvbj4oXG4gICAgdGhpcyxcbiAgICBFdmVudC5mbGlwQ2FuZGlkYXRlRW5kLFxuICAgIHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiBmYWxzZSxcbiAgICAgIGNvbXBvc2VkOiB0cnVlLFxuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIHRlbXBDYW5kaWRhdGVOb2RlLFxuICAgICAgfSxcbiAgICB9LFxuICApO1xuICB0ZW1wQ2FuZGlkYXRlTm9kZS5yZW1vdmUoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZmxpcE9uZUNhbmRpZGF0ZTtcbiIsImltcG9ydCBGbGlwIGZyb20gJy4uLy4uL2ZsaXAnO1xuaW1wb3J0IHsgdHJpZ2dlckV2ZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnRIYW5kbGVyJztcbmltcG9ydCBEaXJlY3Rpb24gZnJvbSAnLi4vLi4vdmFsdWVzL2RpcmVjdGlvbic7XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vLi4vdmFsdWVzL2V2ZW50JztcbmltcG9ydCB7IENhbmRpZGF0ZUluZm8gfSBmcm9tICcuLi9nZXRDYW5kaWRhdGVJbmZvJztcbmltcG9ydCB7IEdldE5leHRDYW5kaWRhdGVPcHRpb25zIH0gZnJvbSAnLi4vZ2V0TmV4dENhbmRpZGF0ZUluZGV4JztcbmltcG9ydCBmbGlwT25lQ2FuZGlkYXRlIGZyb20gJy4vZmxpcE9uZUNhbmRpZGF0ZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxpcE9wdGlvbnMgZXh0ZW5kcyBHZXROZXh0Q2FuZGlkYXRlT3B0aW9ucyB7XG4gIGRpcmVjdGlvbj86IERpcmVjdGlvbjtcbiAgZHVyYXRpb24/OiBudW1iZXI7XG4gIG1pbkZsaXBzPzogbnVtYmVyO1xuICBtYXhGbGlwcz86IG51bWJlcjtcbiAgcGVyc3BlY3RpdmU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxpcERldGFpbCBleHRlbmRzIFJlcXVpcmVkPEZsaXBPcHRpb25zPiB7XG4gIGxhc3RDYW5kaWRhdGVJbmZvOiBDYW5kaWRhdGVJbmZvO1xuICB0YXJnZXRDYW5kaWRhdGVJbmZvOiBDYW5kaWRhdGVJbmZvO1xufVxuXG50eXBlIEZsaXBTb3VyY2UgPSBudW1iZXIgfCBzdHJpbmcgfCBIVE1MRWxlbWVudCB8IG51bGw7XG5cbi8qKlxuICogRmxpcHMgdG8gc3BlY2lmaWMgY2FuZGlkYXRlL2luZGV4LlxuICovXG5hc3luYyBmdW5jdGlvbiBmbGlwPFxuICBBMCBleHRlbmRzIEZsaXBTb3VyY2UgfCBGbGlwT3B0aW9ucyxcbiAgQTEgZXh0ZW5kcyBBMCBleHRlbmRzIEZsaXBPcHRpb25zID8gbmV2ZXIgOiBGbGlwT3B0aW9ucyxcbj4oXG4gIHRoaXM6IEZsaXAsXG4gIGFyZzA/OiBBMCxcbiAgYXJnMT86IEExLFxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IG9wdGlvbnM6IEZsaXBPcHRpb25zID0gKHR5cGVvZiBhcmcwID09PSAnb2JqZWN0JyAmJiAhKGFyZzAgaW5zdGFuY2VvZiBIVE1MRWxlbWVudClcbiAgICA/IGFyZzBcbiAgICA6IGFyZzFcbiAgKSA/PyB7fTtcbiAgY29uc3Qge1xuICAgIG1vZGUgPSB0aGlzLm1vZGUsXG4gICAgZHVyYXRpb24gPSB0aGlzLmR1cmF0aW9uLFxuICAgIGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uLFxuICAgIG1pbkZsaXBzID0gdGhpcy5taW5GbGlwcyxcbiAgICBtYXhGbGlwcyA9IHRoaXMubWF4RmxpcHMsXG4gICAgcGVyc3BlY3RpdmUgPSB0aGlzLnBlcnNwZWN0aXZlLFxuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgZmxpcE9wdGlvbnM6IFJlcXVpcmVkPEZsaXBPcHRpb25zPiA9IHtcbiAgICBtb2RlLCBkdXJhdGlvbiwgZGlyZWN0aW9uLCBtaW5GbGlwcywgbWF4RmxpcHMsIHBlcnNwZWN0aXZlLFxuICB9O1xuICBjb25zdCB0YXJnZXRTb3VyY2UgPSAoYXJnMCA9PT0gb3B0aW9ucyB8fCBhcmcwID09PSB1bmRlZmluZWRcbiAgICA/IHRoaXMuZ2V0TmV4dENhbmRpZGF0ZUluZGV4KHsgbW9kZSB9KVxuICAgIDogYXJnMFxuICApIGFzIG51bWJlcjtcbiAgY29uc3QgdGFyZ2V0Q2FuZGlkYXRlSW5mbyA9IHRoaXMuZ2V0Q2FuZGlkYXRlSW5mbyh0YXJnZXRTb3VyY2UpO1xuICBjb25zdCB7XG4gICAgaW5kZXg6IHRhcmdldEluZGV4LFxuICAgIG5vZGU6IHRhcmdldE5vZGUsXG4gIH0gPSB0YXJnZXRDYW5kaWRhdGVJbmZvO1xuXG4gIGlmICh0YXJnZXROb2RlID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKGBUYXJnZXQgY2FuZGlkYXRlIGRvZXNuJ3QgZXhpc3Q6ICR7dGFyZ2V0U291cmNlfWApO1xuICB9XG5cbiAgY29uc3QgbGFzdENhbmRpZGF0ZUluZm8gPSB0aGlzLmdldENhbmRpZGF0ZUluZm8odGhpcy5pbmRleCk7XG4gIGNvbnN0IHBhc3NTdGFydEV2ZW50ID0gdHJpZ2dlckV2ZW50PEZsaXBEZXRhaWw+KFxuICAgIHRoaXMsXG4gICAgRXZlbnQuZmxpcFN0YXJ0LFxuICAgIHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgY29tcG9zZWQ6IHRydWUsXG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgLi4uZmxpcE9wdGlvbnMsXG4gICAgICAgIGxhc3RDYW5kaWRhdGVJbmZvLFxuICAgICAgICB0YXJnZXRDYW5kaWRhdGVJbmZvLFxuICAgICAgfSxcbiAgICB9LFxuICApO1xuXG4gIGlmICghcGFzc1N0YXJ0RXZlbnQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBmbGlwTmV4dCA9IGFzeW5jICh0aW1lcyA9IDEpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICBjb25zdCBuZXh0SW5kZXggPSAodGltZXMgPCBtYXhGbGlwc1xuICAgICAgPyB0aGlzLmdldE5leHRDYW5kaWRhdGVJbmRleCh7IG1vZGUgfSlcbiAgICAgIDogdGFyZ2V0SW5kZXhcbiAgICApO1xuICAgIGNvbnN0IG5leHRDYW5kaWRhdGVJbmZvID0gdGhpcy5nZXRDYW5kaWRhdGVJbmZvKG5leHRJbmRleCk7XG4gICAgY29uc3QgY3VycmVudENhbmRpZGF0ZUluZm8gPSB0aGlzLmdldENhbmRpZGF0ZUluZm8odGhpcy5pbmRleCk7XG5cbiAgICBhd2FpdCBmbGlwT25lQ2FuZGlkYXRlLmNhbGwodGhpcywge1xuICAgICAgLi4uZmxpcE9wdGlvbnMsXG4gICAgICBsYXN0Q2FuZGlkYXRlSW5mbzogY3VycmVudENhbmRpZGF0ZUluZm8sXG4gICAgICBuZXh0Q2FuZGlkYXRlSW5mbyxcbiAgICB9KTtcblxuICAgIGlmIChuZXh0SW5kZXggIT09IHRhcmdldEluZGV4KSB7XG4gICAgICBhd2FpdCBmbGlwTmV4dCh0aW1lcyArIDEpO1xuICAgIH1cbiAgfTtcblxuICBhd2FpdCBmbGlwTmV4dCgpO1xuXG4gIHRyaWdnZXJFdmVudDxGbGlwRGV0YWlsPihcbiAgICB0aGlzLFxuICAgIEV2ZW50LmZsaXBFbmQsXG4gICAge1xuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IGZhbHNlLFxuICAgICAgY29tcG9zZWQ6IHRydWUsXG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgLi4uZmxpcE9wdGlvbnMsXG4gICAgICAgIGxhc3RDYW5kaWRhdGVJbmZvLFxuICAgICAgICB0YXJnZXRDYW5kaWRhdGVJbmZvLFxuICAgICAgfSxcbiAgICB9LFxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmbGlwO1xuIiwiZW51bSBEaXJlY3Rpb24ge1xuICB1cCA9ICd1cCcsXG4gIGRvd24gPSAnZG93bicsXG4gIGxlZnQgPSAnbGVmdCcsXG4gIHJpZ2h0ID0gJ3JpZ2h0Jyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgRGlyZWN0aW9uO1xuIiwiLyoqXG4gKiBSZXR1cm5zIGNsb25lZCBjYW5kaWRhdGUgZWxlbWVudC5cbiAqL1xuZnVuY3Rpb24gY2xvbmVOb2RlKG5vZGU6IE5vZGUpOiBIVE1MRWxlbWVudCB7XG4gIGNvbnN0IG5ld05vZGUgPSBub2RlLmNsb25lTm9kZShmYWxzZSk7XG5cbiAgLy8gY2FudmFzXG4gIGlmIChub2RlIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICBjb25zdCBuZXdDYW52YXMgPSBuZXdOb2RlIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuXG4gICAgbmV3Q2FudmFzLndpZHRoID0gbm9kZS53aWR0aDtcbiAgICBuZXdDYW52YXMuaGVpZ2h0ID0gbm9kZS5oZWlnaHQ7XG4gICAgbmV3Q2FudmFzLmdldENvbnRleHQoJzJkJyk/LmRyYXdJbWFnZT8uKG5vZGUsIDAsIDApO1xuICB9XG5cbiAgLy8gY2hpbGRyZW5cbiAgbm9kZS5jaGlsZE5vZGVzLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgbmV3Tm9kZS5hcHBlbmRDaGlsZChjbG9uZU5vZGUoY2hpbGQpKTtcbiAgfSk7XG5cbiAgcmV0dXJuIG5ld05vZGUgYXMgSFRNTEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsb25lTm9kZTtcbiIsInR5cGUgUHJlZml4ID0gJ3dlYmtpdCcgfCAnbycgfCAnbXMnIHwgJ21veic7XG5cbi8qKlxuICogUmV0dXJucyBwcmVmaXhlZCBDU1MgdGV4dC5cbiAqL1xuZnVuY3Rpb24gcHJlZml4Q3NzKGNzczogc3RyaW5nLCBwcmVmaXhzOiBQcmVmaXggfCBQcmVmaXhbXSk6IHN0cmluZyB7XG4gIGNvbnN0IGhlYWQgPSAvXkAvLnRlc3QoY3NzKSA/ICdALScgOiAnLSc7XG4gIGNvbnN0IHRleHQgPSBjc3NcbiAgICAucmVwbGFjZSgvXkAvLCAnJylcbiAgICAucmVwbGFjZSgvOz8kLywgJzsnKTtcblxuICByZXR1cm4gKEFycmF5LmlzQXJyYXkocHJlZml4cykgPyBwcmVmaXhzIDogW3ByZWZpeHNdKVxuICAgIC5tYXAoKHByZWZpeCkgPT4gYCR7aGVhZH0ke3ByZWZpeH0tJHt0ZXh0fWApXG4gICAgLmNvbmNhdChjc3MpXG4gICAgLmpvaW4oJ1xcbicpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBwcmVmaXhDc3M7XG4iLCJpbXBvcnQgY2xvbmVOb2RlIGZyb20gJy4uLy4uL3V0aWxzL2Nsb25lTm9kZSc7XG5pbXBvcnQgY3JlYXRlVGVtcE5vZGUgZnJvbSAnLi4vLi4vdXRpbHMvY3JlYXRlVGVtcE5vZGUnO1xuaW1wb3J0IHByZWZpeENzcyBmcm9tICcuLi8uLi91dGlscy9wcmVmaXhDc3MnO1xuaW1wb3J0IERpcmVjdGlvbiBmcm9tICcuLi8uLi92YWx1ZXMvZGlyZWN0aW9uJztcbmltcG9ydCB7IEZsaXBBbmltYXRpb25PcHRpb24gfSBmcm9tICcuL2ZsaXBBbmltYXRpb24nO1xuXG50eXBlIFN0eWxlR2V0dGVyID0gKG9wdGlvbnM6IEZsaXBBbmltYXRpb25PcHRpb24pID0+IHN0cmluZztcblxuY29uc3QgZ2V0QmFja2dyb3VuZFN0eWxlOiBTdHlsZUdldHRlciA9ICgpID0+IChgXG4gIDpob3N0IHtcbiAgICAtLXJpZ2h0LXgtbGVmdDogNTAlO1xuICAgIC0tcmlnaHQteC1yaWdodDogMTAwdnc7XG4gICAgLS1sZWZ0LXgtbGVmdDogLTEwMHZ3O1xuICAgIC0tbGVmdC14LXJpZ2h0OiA1MCU7XG5cbiAgICAke3ByZWZpeENzcyhgY2xpcC1wYXRoOiBwb2x5Z29uKFxuICAgICAgdmFyKC0teC1sZWZ0KSAtMTAwdmgsXG4gICAgICB2YXIoLS14LXJpZ2h0KSAtMTAwdmgsXG4gICAgICB2YXIoLS14LXJpZ2h0KSBjYWxjKDEwMCUgKyAxMDB2aCksXG4gICAgICB2YXIoLS14LWxlZnQpIGNhbGMoMTAwJSArIDEwMHZoKVxuICAgICk7YCwgJ3dlYmtpdCcpfVxuICB9XG5gKTtcblxuY29uc3QgZ2V0Q2FuZGlkYXRlU3R5bGU6IFN0eWxlR2V0dGVyID0gKG9wdGlvbnMpID0+IChgXG4gICR7cHJlZml4Q3NzKGBAa2V5ZnJhbWVzIGZsaXAge1xuICAgIDAlIHtcbiAgICAgICR7cHJlZml4Q3NzKCd0cmFuc2Zvcm06IHBlcnNwZWN0aXZlKHZhcigtLWhvcmktcGVyc3BlY3RpdmUpKSByb3RhdGVZKDApOycsICd3ZWJraXQnKX1cbiAgICB9XG4gICAgMTAwJSB7XG4gICAgICAke3ByZWZpeENzcygndHJhbnNmb3JtOiBwZXJzcGVjdGl2ZSh2YXIoLS1ob3JpLXBlcnNwZWN0aXZlKSkgcm90YXRlWSh2YXIoLS1lbmQtZGVnKSk7JywgJ3dlYmtpdCcpfVxuICAgIH1cbiAgfWAsICd3ZWJraXQnKX1cblxuICA6aG9zdCB7XG4gICAgLS1ob3JpLXBlcnNwZWN0aXZlOiAke29wdGlvbnMucGVyc3BlY3RpdmV9O1xuICAgIC0tcmlnaHQteC1sZWZ0OiA1MCU7XG4gICAgLS1yaWdodC14LXJpZ2h0OiBjYWxjKDEwMCUgKyAxMDB2dyk7XG4gICAgLS1sZWZ0LXgtbGVmdDogLTEwMHZ3O1xuICAgIC0tbGVmdC14LXJpZ2h0OiA1MCU7XG4gICAgLS1sZWZ0LWVuZC1kZWc6IC0xODBkZWc7XG4gICAgLS1yaWdodC1lbmQtZGVnOiAxODBkZWc7XG5cbiAgICAke3ByZWZpeENzcyhgY2xpcC1wYXRoOiBwb2x5Z29uKFxuICAgICAgdmFyKC0tc3RhcnQteC1sZWZ0KSAtMTAwdmgsXG4gICAgICB2YXIoLS1zdGFydC14LXJpZ2h0KSAtMTAwdmgsXG4gICAgICB2YXIoLS1zdGFydC14LXJpZ2h0KSBjYWxjKDEwMCUgKyAxMDB2aCksXG4gICAgICB2YXIoLS1zdGFydC14LWxlZnQpIGNhbGMoMTAwJSArIDEwMHZoKVxuICAgICk7YCwgJ3dlYmtpdCcpfVxuICAgICR7cHJlZml4Q3NzKCdhbmltYXRpb246IGZsaXAgdmFyKC0tZHVyYXRpb24pIGZvcndhcmRzIGxpbmVhcjsnLCAnd2Via2l0Jyl9XG4gIH1cbmApO1xuXG5jb25zdCBnZXROZXh0Q2FuZGlkYXRlU3R5bGU6IFN0eWxlR2V0dGVyID0gKCkgPT4gKGBcbiAgJHtwcmVmaXhDc3MoYEBrZXlmcmFtZXMgY2xpcC1uZXh0IHtcbiAgICAwJSB7IG9wYWNpdHk6IDAgfVxuICAgIDUwJSwgMTAwJSB7IG9wYWNpdHk6IDEgfVxuICB9YCwgJ3dlYmtpdCcpfVxuXG4gIDpob3N0IHtcbiAgICAke3ByZWZpeENzcygndHJhbnNmb3JtOiByb3RhdGVZKDE4MGRlZyk7JywgJ3dlYmtpdCcpfVxuICAgICR7cHJlZml4Q3NzKCdhbmltYXRpb246IGNsaXAtbmV4dCB2YXIoLS1kdXJhdGlvbikgZm9yd2FyZHMgc3RlcHMoMSwgZW5kKTsnLCAnd2Via2l0Jyl9XG4gIH1cbmApO1xuXG5jb25zdCBnZXRMYXN0Q2FuZGlkYXRlU3R5bGU6IFN0eWxlR2V0dGVyID0gKCkgPT4gKGBcbiAgJHtwcmVmaXhDc3MoYEBrZXlmcmFtZXMgY2xpcC1sYXN0IHtcbiAgICAwJSB7IG9wYWNpdHk6IDEgfVxuICAgIDUwJSwgMTAwJSB7IG9wYWNpdHk6IDAgfVxuICB9YCwgJ3dlYmtpdCcpfVxuXG4gIDpob3N0IHtcbiAgICAke3ByZWZpeENzcygnYW5pbWF0aW9uOiBjbGlwLWxhc3QgdmFyKC0tZHVyYXRpb24pIGZvcndhcmRzIHN0ZXBzKDEsIGVuZCk7JywgJ3dlYmtpdCcpfVxuICB9XG5gKTtcblxuLyoqXG4gKiBGbGlwcyBjYW5kaWRhdGUgaG9yaXpvbnRhbGx5LlxuICovXG5mdW5jdGlvbiBmbGlwcGluZ0hvcml6b250YWxseShvcHRpb25zOiBGbGlwQW5pbWF0aW9uT3B0aW9uKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHtcbiAgICBkdXJhdGlvbixcbiAgICBkaXJlY3Rpb24sXG4gICAgbGFzdENhbmRpZGF0ZUluZm8sXG4gICAgbmV4dENhbmRpZGF0ZUluZm8sXG4gICAgdGVtcENhbmRpZGF0ZU5vZGUsXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCB7XG4gICAgbm9kZTogbGFzdENhbmRpZGF0ZU5vZGUsXG4gIH0gPSBsYXN0Q2FuZGlkYXRlSW5mbztcbiAgY29uc3QgbmV4dENhbmRpZGF0ZU5vZGUgPSBuZXh0Q2FuZGlkYXRlSW5mby5ub2RlIGFzIEhUTUxFbGVtZW50O1xuICBjb25zdCBkdXJhdGlvblNlYyA9IGR1cmF0aW9uIC8gMTAwMDtcbiAgY29uc3QgZG9tQ2FuZGlkYXRlID0gY3JlYXRlVGVtcE5vZGUoeyBzdHlsZTogZ2V0Q2FuZGlkYXRlU3R5bGUob3B0aW9ucykgfSk7XG4gIGNvbnN0IGRvbU5leHQgPSBjcmVhdGVUZW1wTm9kZSh7IHN0eWxlOiBnZXROZXh0Q2FuZGlkYXRlU3R5bGUob3B0aW9ucykgfSk7XG4gIGNvbnN0IGRvbU5leHRDYW5kaWRhdGUgPSBjbG9uZU5vZGUobmV4dENhbmRpZGF0ZU5vZGUpO1xuXG4gIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgZGVmYXVsdDpcbiAgICBjYXNlIERpcmVjdGlvbi5sZWZ0OlxuICAgICAgZG9tQ2FuZGlkYXRlLnN0eWxlLnNldFByb3BlcnR5KCctLXN0YXJ0LXgtbGVmdCcsICd2YXIoLS1yaWdodC14LWxlZnQpJyk7XG4gICAgICBkb21DYW5kaWRhdGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3RhcnQteC1yaWdodCcsICd2YXIoLS1yaWdodC14LXJpZ2h0KScpO1xuICAgICAgZG9tQ2FuZGlkYXRlLnN0eWxlLnNldFByb3BlcnR5KCctLWVuZC14LWxlZnQnLCAndmFyKC0tbGVmdC14LWxlZnQpJyk7XG4gICAgICBkb21DYW5kaWRhdGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tZW5kLXgtcmlnaHQnLCAndmFyKC0tbGVmdC14LXJpZ2h0KScpO1xuICAgICAgZG9tQ2FuZGlkYXRlLnN0eWxlLnNldFByb3BlcnR5KCctLWVuZC1kZWcnLCAndmFyKC0tbGVmdC1lbmQtZGVnKScpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIERpcmVjdGlvbi5yaWdodDpcbiAgICAgIGRvbUNhbmRpZGF0ZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zdGFydC14LWxlZnQnLCAndmFyKC0tbGVmdC14LWxlZnQpJyk7XG4gICAgICBkb21DYW5kaWRhdGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3RhcnQteC1yaWdodCcsICd2YXIoLS1sZWZ0LXgtcmlnaHQpJyk7XG4gICAgICBkb21DYW5kaWRhdGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tZW5kLXgtbGVmdCcsICd2YXIoLS1yaWdodC14LWxlZnQpJyk7XG4gICAgICBkb21DYW5kaWRhdGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tZW5kLXgtcmlnaHQnLCAndmFyKC0tcmlnaHQteC1yaWdodCknKTtcbiAgICAgIGRvbUNhbmRpZGF0ZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lbmQtZGVnJywgJ3ZhcigtLXJpZ2h0LWVuZC1kZWcpJyk7XG4gICAgICBicmVhaztcbiAgfVxuXG4gIGRvbUNhbmRpZGF0ZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1kdXJhdGlvbicsIGAke2R1cmF0aW9uU2VjfXNgKTtcbiAgZG9tTmV4dENhbmRpZGF0ZS5yZW1vdmVBdHRyaWJ1dGUoJ3Nsb3QnKTtcbiAgZG9tTmV4dC5hcHBlbmQoZG9tTmV4dENhbmRpZGF0ZSk7XG4gIGRvbUNhbmRpZGF0ZS5hcHBlbmQoZG9tTmV4dCk7XG5cbiAgaWYgKGxhc3RDYW5kaWRhdGVOb2RlKSB7XG4gICAgY29uc3QgZG9tQmFja2dyb3VuZCA9IGNyZWF0ZVRlbXBOb2RlKHsgc3R5bGU6IGdldEJhY2tncm91bmRTdHlsZShvcHRpb25zKSB9KTtcbiAgICBjb25zdCBkb21MYXN0ID0gY3JlYXRlVGVtcE5vZGUoeyBzdHlsZTogZ2V0TGFzdENhbmRpZGF0ZVN0eWxlKG9wdGlvbnMpIH0pO1xuICAgIGNvbnN0IGRvbUxhc3RDYW5kaWRhdGUgPSBjbG9uZU5vZGUobGFzdENhbmRpZGF0ZU5vZGUpO1xuICAgIGNvbnN0IGRvbUxhc3RCYWNrZ3JvdW5kQ2FuZGlkYXRlID0gY2xvbmVOb2RlKGxhc3RDYW5kaWRhdGVOb2RlKTtcblxuICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgICBkZWZhdWx0OlxuICAgICAgY2FzZSBEaXJlY3Rpb24ubGVmdDpcbiAgICAgICAgZG9tQmFja2dyb3VuZC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS14LWxlZnQnLCAndmFyKC0tbGVmdC14LWxlZnQpJyk7XG4gICAgICAgIGRvbUJhY2tncm91bmQuc3R5bGUuc2V0UHJvcGVydHkoJy0teC1yaWdodCcsICd2YXIoLS1sZWZ0LXgtcmlnaHQpJyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIERpcmVjdGlvbi5yaWdodDpcbiAgICAgICAgZG9tQmFja2dyb3VuZC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS14LWxlZnQnLCAndmFyKC0tcmlnaHQteC1sZWZ0KScpO1xuICAgICAgICBkb21CYWNrZ3JvdW5kLnN0eWxlLnNldFByb3BlcnR5KCctLXgtcmlnaHQnLCAndmFyKC0tcmlnaHQteC1yaWdodCknKTtcbiAgICB9XG5cbiAgICBkb21MYXN0Q2FuZGlkYXRlLnJlbW92ZUF0dHJpYnV0ZSgnc2xvdCcpO1xuICAgIGRvbUxhc3QuYXBwZW5kKGRvbUxhc3RDYW5kaWRhdGUpO1xuICAgIGRvbUNhbmRpZGF0ZS5hcHBlbmQoZG9tTGFzdCk7XG4gICAgZG9tTGFzdEJhY2tncm91bmRDYW5kaWRhdGUucmVtb3ZlQXR0cmlidXRlKCdzbG90Jyk7XG4gICAgZG9tQmFja2dyb3VuZC5hcHBlbmQoZG9tTGFzdEJhY2tncm91bmRDYW5kaWRhdGUpO1xuICAgIHRlbXBDYW5kaWRhdGVOb2RlLmFwcGVuZChkb21CYWNrZ3JvdW5kKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIHRlbXBDYW5kaWRhdGVOb2RlLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnYW5pbWF0aW9uZW5kJyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgfSxcbiAgICAgIHsgb25jZTogdHJ1ZSB9LFxuICAgICk7XG4gICAgdGVtcENhbmRpZGF0ZU5vZGUuYXBwZW5kKGRvbUNhbmRpZGF0ZSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmbGlwcGluZ0hvcml6b250YWxseTtcbiIsImltcG9ydCBwcmVmaXhDc3MgZnJvbSAnLi4vLi4vdXRpbHMvcHJlZml4Q3NzJztcbmltcG9ydCBEaXJlY3Rpb24gZnJvbSAnLi4vLi4vdmFsdWVzL2RpcmVjdGlvbic7XG5pbXBvcnQgY3JlYXRlVGVtcE5vZGUgZnJvbSAnLi4vLi4vdXRpbHMvY3JlYXRlVGVtcE5vZGUnO1xuaW1wb3J0IHsgRmxpcEFuaW1hdGlvbk9wdGlvbiB9IGZyb20gJy4vZmxpcEFuaW1hdGlvbic7XG5pbXBvcnQgY2xvbmVOb2RlIGZyb20gJy4uLy4uL3V0aWxzL2Nsb25lTm9kZSc7XG5cbnR5cGUgU3R5bGVHZXR0ZXIgPSAob3B0aW9uczogRmxpcEFuaW1hdGlvbk9wdGlvbikgPT4gc3RyaW5nO1xuXG5jb25zdCBnZXRCYWNrZ3JvdW5kU3R5bGU6IFN0eWxlR2V0dGVyID0gKCkgPT4gKGBcbiAgOmhvc3Qge1xuICAgIC0tdXBwZXIteS10b3A6IC0xMDB2aDtcbiAgICAtLXVwcGVyLXktYm90dG9tOiA1MCU7XG4gICAgLS1sb3dlci15LXRvcDogNTAlO1xuICAgIC0tbG93ZXIteS1ib3R0b206IGNhbGMoMTAwJSArIDEwMHZoKTtcblxuICAgICR7cHJlZml4Q3NzKGBjbGlwLXBhdGg6IHBvbHlnb24oXG4gICAgICAtMTAwdncgdmFyKC0teS10b3ApLFxuICAgICAgY2FsYygxMDAlICsgMTAwdncpIHZhcigtLXktdG9wKSxcbiAgICAgIGNhbGMoMTAwJSArIDEwMHZ3KSB2YXIoLS15LWJvdHRvbSksXG4gICAgICAtMTAwdncgdmFyKC0teS1ib3R0b20pXG4gICAgKTtgLCAnd2Via2l0Jyl9XG4gIH1cbmApO1xuXG5jb25zdCBnZXRDYW5kaWRhdGVTdHlsZTogU3R5bGVHZXR0ZXIgPSAob3B0aW9ucykgPT4gKGBcbiAgJHtwcmVmaXhDc3MoYEBrZXlmcmFtZXMgZmxpcCB7XG4gICAgMCUge1xuICAgICAgJHtwcmVmaXhDc3MoJ3RyYW5zZm9ybTogcGVyc3BlY3RpdmUodmFyKC0tdmVydC1wZXJzcGVjdGl2ZSkpIHJvdGF0ZVgoMCk7JywgJ3dlYmtpdCcpfVxuICAgIH1cbiAgICAxMDAlIHtcbiAgICAgICR7cHJlZml4Q3NzKCd0cmFuc2Zvcm06IHBlcnNwZWN0aXZlKHZhcigtLXZlcnQtcGVyc3BlY3RpdmUpKSByb3RhdGVYKHZhcigtLWVuZC1kZWcpKTsnLCAnd2Via2l0Jyl9XG4gICAgfVxuICB9YCwgJ3dlYmtpdCcpfVxuXG4gIDpob3N0IHtcbiAgICAtLXZlcnQtcGVyc3BlY3RpdmU6ICR7b3B0aW9ucy5wZXJzcGVjdGl2ZX07XG4gICAgLS11cHBlci15LXRvcDogLTEwMHZoO1xuICAgIC0tdXBwZXIteS1ib3R0b206IDUwJTtcbiAgICAtLWxvd2VyLXktdG9wOiA1MCU7XG4gICAgLS1sb3dlci15LWJvdHRvbTogY2FsYygxMDAlICsgMTAwdmgpO1xuICAgIC0tZG93bi1lbmQtZGVnOiAtMTgwZGVnO1xuICAgIC0tdXAtZW5kLWRlZzogMTgwZGVnO1xuXG4gICAgJHtwcmVmaXhDc3MoYGNsaXAtcGF0aDogcG9seWdvbihcbiAgICAgIC0xMDB2dyB2YXIoLS1zdGFydC15LXRvcCksXG4gICAgICBjYWxjKDEwMCUgKyAxMDB2dykgdmFyKC0tc3RhcnQteS10b3ApLFxuICAgICAgY2FsYygxMDAlICsgMTAwdncpIHZhcigtLXN0YXJ0LXktYm90dG9tKSxcbiAgICAgIC0xMDB2dyB2YXIoLS1zdGFydC15LWJvdHRvbSlcbiAgICApO2AsICd3ZWJraXQnKX1cbiAgICAke3ByZWZpeENzcygnYW5pbWF0aW9uOiBmbGlwIHZhcigtLWR1cmF0aW9uKSBmb3J3YXJkcyBsaW5lYXI7JywgJ3dlYmtpdCcpfVxuICB9XG5gKTtcblxuY29uc3QgZ2V0TmV4dENhbmRpZGF0ZVN0eWxlOiBTdHlsZUdldHRlciA9ICgpID0+IChgXG4gICR7cHJlZml4Q3NzKGBAa2V5ZnJhbWVzIGNsaXAtbmV4dCB7XG4gICAgMCUgeyBvcGFjaXR5OiAwIH1cbiAgICA1MCUsIDEwMCUgeyBvcGFjaXR5OiAxIH1cbiAgfWAsICd3ZWJraXQnKX1cblxuICA6aG9zdCB7XG4gICAgJHtwcmVmaXhDc3MoJ3RyYW5zZm9ybTogcm90YXRlWCgxODBkZWcpOycsICd3ZWJraXQnKX1cbiAgICAke3ByZWZpeENzcygnYW5pbWF0aW9uOiBjbGlwLW5leHQgdmFyKC0tZHVyYXRpb24pIGZvcndhcmRzIHN0ZXBzKDEsIGVuZCk7JywgJ3dlYmtpdCcpfVxuICB9XG5gKTtcblxuY29uc3QgZ2V0TGFzdENhbmRpZGF0ZVN0eWxlOiBTdHlsZUdldHRlciA9ICgpID0+IChgXG4gICR7cHJlZml4Q3NzKGBAa2V5ZnJhbWVzIGNsaXAtbGFzdCB7XG4gICAgMCUgeyBvcGFjaXR5OiAxIH1cbiAgICA1MCUsIDEwMCUgeyBvcGFjaXR5OiAwIH1cbiAgfWAsICd3ZWJraXQnKX1cblxuICA6aG9zdCB7XG4gICAgJHtwcmVmaXhDc3MoJ2FuaW1hdGlvbjogY2xpcC1sYXN0IHZhcigtLWR1cmF0aW9uKSBmb3J3YXJkcyBzdGVwcygxLCBlbmQpOycsICd3ZWJraXQnKX1cbiAgfVxuYCk7XG5cbi8qKlxuICogRmxpcHMgY2FuZGlkYXRlIHZlcnRpY2FsbHkuXG4gKi9cbmZ1bmN0aW9uIGZsaXBwaW5nVmVydGljYWxseShvcHRpb25zOiBGbGlwQW5pbWF0aW9uT3B0aW9uKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHtcbiAgICBkdXJhdGlvbixcbiAgICBkaXJlY3Rpb24sXG4gICAgbGFzdENhbmRpZGF0ZUluZm8sXG4gICAgbmV4dENhbmRpZGF0ZUluZm8sXG4gICAgdGVtcENhbmRpZGF0ZU5vZGUsXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCB7XG4gICAgbm9kZTogbGFzdENhbmRpZGF0ZU5vZGUsXG4gIH0gPSBsYXN0Q2FuZGlkYXRlSW5mbztcbiAgY29uc3QgbmV4dENhbmRpZGF0ZU5vZGUgPSBuZXh0Q2FuZGlkYXRlSW5mby5ub2RlIGFzIEhUTUxFbGVtZW50O1xuICBjb25zdCBkdXJhdGlvblNlYyA9IGR1cmF0aW9uIC8gMTAwMDtcbiAgY29uc3QgZG9tQ2FuZGlkYXRlID0gY3JlYXRlVGVtcE5vZGUoeyBzdHlsZTogZ2V0Q2FuZGlkYXRlU3R5bGUob3B0aW9ucykgfSk7XG4gIGNvbnN0IGRvbU5leHQgPSBjcmVhdGVUZW1wTm9kZSh7IHN0eWxlOiBnZXROZXh0Q2FuZGlkYXRlU3R5bGUob3B0aW9ucykgfSk7XG4gIGNvbnN0IGRvbU5leHRDYW5kaWRhdGUgPSBjbG9uZU5vZGUobmV4dENhbmRpZGF0ZU5vZGUpO1xuXG4gIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgZGVmYXVsdDpcbiAgICBjYXNlIERpcmVjdGlvbi5kb3duOlxuICAgICAgZG9tQ2FuZGlkYXRlLnN0eWxlLnNldFByb3BlcnR5KCctLXN0YXJ0LXktdG9wJywgJ3ZhcigtLXVwcGVyLXktdG9wKScpO1xuICAgICAgZG9tQ2FuZGlkYXRlLnN0eWxlLnNldFByb3BlcnR5KCctLXN0YXJ0LXktYm90dG9tJywgJ3ZhcigtLXVwcGVyLXktYm90dG9tKScpO1xuICAgICAgZG9tQ2FuZGlkYXRlLnN0eWxlLnNldFByb3BlcnR5KCctLWVuZC15LXRvcCcsICd2YXIoLS1sb3dlci15LXRvcCknKTtcbiAgICAgIGRvbUNhbmRpZGF0ZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lbmQteS1ib3R0b20nLCAndmFyKC0tbG93ZXIteS1ib3R0b20pJyk7XG4gICAgICBkb21DYW5kaWRhdGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tZW5kLWRlZycsICd2YXIoLS1kb3duLWVuZC1kZWcpJyk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgRGlyZWN0aW9uLnVwOlxuICAgICAgZG9tQ2FuZGlkYXRlLnN0eWxlLnNldFByb3BlcnR5KCctLXN0YXJ0LXktdG9wJywgJ3ZhcigtLWxvd2VyLXktdG9wKScpO1xuICAgICAgZG9tQ2FuZGlkYXRlLnN0eWxlLnNldFByb3BlcnR5KCctLXN0YXJ0LXktYm90dG9tJywgJ3ZhcigtLWxvd2VyLXktYm90dG9tKScpO1xuICAgICAgZG9tQ2FuZGlkYXRlLnN0eWxlLnNldFByb3BlcnR5KCctLWVuZC15LXRvcCcsICd2YXIoLS11cHBlci15LXRvcCknKTtcbiAgICAgIGRvbUNhbmRpZGF0ZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lbmQteS1ib3R0b20nLCAndmFyKC0tdXBwZXIteS1ib3R0b20pJyk7XG4gICAgICBkb21DYW5kaWRhdGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tZW5kLWRlZycsICd2YXIoLS11cC1lbmQtZGVnKScpO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICBkb21DYW5kaWRhdGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tZHVyYXRpb24nLCBgJHtkdXJhdGlvblNlY31zYCk7XG4gIGRvbU5leHRDYW5kaWRhdGUucmVtb3ZlQXR0cmlidXRlKCdzbG90Jyk7XG4gIGRvbU5leHQuYXBwZW5kKGRvbU5leHRDYW5kaWRhdGUpO1xuICBkb21DYW5kaWRhdGUuYXBwZW5kKGRvbU5leHQpO1xuXG4gIGlmIChsYXN0Q2FuZGlkYXRlTm9kZSkge1xuICAgIGNvbnN0IGRvbUJhY2tncm91bmQgPSBjcmVhdGVUZW1wTm9kZSh7IHN0eWxlOiBnZXRCYWNrZ3JvdW5kU3R5bGUob3B0aW9ucykgfSk7XG4gICAgY29uc3QgZG9tTGFzdCA9IGNyZWF0ZVRlbXBOb2RlKHsgc3R5bGU6IGdldExhc3RDYW5kaWRhdGVTdHlsZShvcHRpb25zKSB9KTtcbiAgICBjb25zdCBkb21MYXN0Q2FuZGlkYXRlID0gY2xvbmVOb2RlKGxhc3RDYW5kaWRhdGVOb2RlKTtcbiAgICBjb25zdCBkb21MYXN0QmFja2dyb3VuZENhbmRpZGF0ZSA9IGNsb25lTm9kZShsYXN0Q2FuZGlkYXRlTm9kZSk7XG5cbiAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgICAgZGVmYXVsdDpcbiAgICAgIGNhc2UgRGlyZWN0aW9uLmRvd246XG4gICAgICAgIGRvbUJhY2tncm91bmQuc3R5bGUuc2V0UHJvcGVydHkoJy0teS10b3AnLCAndmFyKC0tbG93ZXIteS10b3ApJyk7XG4gICAgICAgIGRvbUJhY2tncm91bmQuc3R5bGUuc2V0UHJvcGVydHkoJy0teS1ib3R0b20nLCAndmFyKC0tbG93ZXIteS1ib3R0b20pJyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIERpcmVjdGlvbi51cDpcbiAgICAgICAgZG9tQmFja2dyb3VuZC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS15LXRvcCcsICd2YXIoLS11cHBlci15LXRvcCknKTtcbiAgICAgICAgZG9tQmFja2dyb3VuZC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS15LWJvdHRvbScsICd2YXIoLS11cHBlci15LWJvdHRvbSknKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgZG9tTGFzdENhbmRpZGF0ZS5yZW1vdmVBdHRyaWJ1dGUoJ3Nsb3QnKTtcbiAgICBkb21MYXN0LmFwcGVuZChkb21MYXN0Q2FuZGlkYXRlKTtcbiAgICBkb21DYW5kaWRhdGUuYXBwZW5kKGRvbUxhc3QpO1xuICAgIGRvbUxhc3RCYWNrZ3JvdW5kQ2FuZGlkYXRlLnJlbW92ZUF0dHJpYnV0ZSgnc2xvdCcpO1xuICAgIGRvbUJhY2tncm91bmQuYXBwZW5kKGRvbUxhc3RCYWNrZ3JvdW5kQ2FuZGlkYXRlKTtcbiAgICB0ZW1wQ2FuZGlkYXRlTm9kZS5hcHBlbmQoZG9tQmFja2dyb3VuZCk7XG4gIH1cblxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICB0ZW1wQ2FuZGlkYXRlTm9kZS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ2FuaW1hdGlvbmVuZCcsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgIH0sXG4gICAgICB7IG9uY2U6IHRydWUgfSxcbiAgICApO1xuICAgIHRlbXBDYW5kaWRhdGVOb2RlLmFwcGVuZChkb21DYW5kaWRhdGUpO1xuICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZmxpcHBpbmdWZXJ0aWNhbGx5O1xuIiwiaW1wb3J0IERpcmVjdGlvbiBmcm9tICcuLi8uLi92YWx1ZXMvZGlyZWN0aW9uJztcbmltcG9ydCB7IEZsaXBPbmVDYW5kaWRhdGVPcHRpb25zIH0gZnJvbSAnLi9mbGlwT25lQ2FuZGlkYXRlJztcbmltcG9ydCBmbGlwcGluZ0hvcml6b250YWxseSBmcm9tICcuL2hvcml6b250YWwnO1xuaW1wb3J0IGZsaXBwaW5nVmVydGljYWxseSBmcm9tICcuL3ZlcnRpY2FsJztcblxuZXhwb3J0IGludGVyZmFjZSBGbGlwQW5pbWF0aW9uT3B0aW9uIGV4dGVuZHMgUmVxdWlyZWQ8RmxpcE9uZUNhbmRpZGF0ZU9wdGlvbnM+IHtcbiAgdGVtcENhbmRpZGF0ZU5vZGU6IEhUTUxFbGVtZW50O1xufVxuXG4vKipcbiAqIERvZXMgZmxpcHBpbmcgYW5pbWF0aW9uIGZyb20gbGFzdCBjYW5kaWRhdGUgdG8gbmV4dCBjYW5kaWRhdGUuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGZsaXBBbmltYXRpb24ob3B0aW9uczogRmxpcEFuaW1hdGlvbk9wdGlvbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IGRpcmVjdGlvbiB9ID0gb3B0aW9ucztcblxuICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIGRpcmVjdGlvbjogJHtkaXJlY3Rpb259YCk7XG5cbiAgICBjYXNlIERpcmVjdGlvbi51cDpcbiAgICBjYXNlIERpcmVjdGlvbi5kb3duOlxuICAgICAgcmV0dXJuIGZsaXBwaW5nVmVydGljYWxseShvcHRpb25zKTtcblxuICAgIGNhc2UgRGlyZWN0aW9uLnJpZ2h0OlxuICAgIGNhc2UgRGlyZWN0aW9uLmxlZnQ6XG4gICAgICByZXR1cm4gZmxpcHBpbmdIb3Jpem9udGFsbHkob3B0aW9ucyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZmxpcEFuaW1hdGlvbjtcbiIsImltcG9ydCBGbGlwIGZyb20gJy4uL2ZsaXAnO1xuXG4vKipcbiAqIFJldHVybnMgY2FyZCBpbmRleCBieSByZWZlcmVuY2UuXG4gKi9cbmZ1bmN0aW9uIGdldENhbmRpZGF0ZUluZGV4KFxuICB0aGlzOiBGbGlwLFxuICBzb3VyY2U6IHN0cmluZyB8IEhUTUxFbGVtZW50IHwgbnVsbCxcbik6IG51bWJlciB7XG4gIC8vIG51bGxcbiAgaWYgKHNvdXJjZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIGNvbnN0IHsgY2FuZGlkYXRlc0NhdGNoOiBjYXJkc0NhdGNoIH0gPSB0aGlzO1xuXG4gIC8vIGNhcmQgbm9kZVxuICBpZiAoc291cmNlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICByZXR1cm4gY2FyZHNDYXRjaC5pbmRleE9mKHNvdXJjZSk7XG4gIH1cblxuICAvLyB2YWx1ZVxuICByZXR1cm4gY2FyZHNDYXRjaC5maW5kSW5kZXgoKGNhcmQpID0+IChcbiAgICBGbGlwLmdldENhbmRpZGF0ZVZhbHVlKGNhcmQpID09PSBzb3VyY2VcbiAgKSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGdldENhbmRpZGF0ZUluZGV4O1xuIiwiaW1wb3J0IEZsaXAgZnJvbSAnLi4vZmxpcCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FuZGlkYXRlSW5mbyB7XG4gIGluZGV4OiBudW1iZXI7XG4gIG5vZGU6IEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgdmFsdWU6IHN0cmluZyB8IG51bGw7XG59XG5cbi8qKlxuICogUmV0dXJucyBjYXJkIGluZm8gYnkgcmVmZXJlbmNlLlxuICovXG5mdW5jdGlvbiBnZXRDYW5kaWRhdGVJbmZvKFxuICB0aGlzOiBGbGlwLFxuICBzb3VyY2U6IG51bWJlciB8IHN0cmluZyB8IEhUTUxFbGVtZW50IHwgbnVsbCxcbik6IENhbmRpZGF0ZUluZm8ge1xuICAvLyBudWxsXG4gIGlmIChzb3VyY2UgPT09IG51bGwpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbm9kZTogbnVsbCxcbiAgICAgIGluZGV4OiAtMSxcbiAgICAgIHZhbHVlOiBudWxsLFxuICAgIH07XG4gIH1cblxuICAvLyBjYXJkIG5vZGVcbiAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmdldENhbmRpZGF0ZUluZGV4KHNvdXJjZSk7XG4gICAgY29uc3QgY2FyZCA9IGluZGV4ID09PSAtMSA/IG51bGwgOiBzb3VyY2U7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbm9kZTogY2FyZCxcbiAgICAgIGluZGV4LFxuICAgICAgdmFsdWU6IEZsaXAuZ2V0Q2FuZGlkYXRlVmFsdWUoY2FyZCksXG4gICAgfTtcbiAgfVxuXG4gIC8vIHZhbHVlXG4gIGlmICh0eXBlb2Ygc291cmNlID09PSAnc3RyaW5nJykge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5nZXRDYW5kaWRhdGVJbmRleChzb3VyY2UpO1xuICAgIGNvbnN0IGNhcmQgPSBpbmRleCA9PT0gLTEgPyBudWxsIDogdGhpcy5nZXRDYW5kaWRhdGVOb2RlKGluZGV4KTtcblxuICAgIHJldHVybiB7XG4gICAgICBub2RlOiBjYXJkLFxuICAgICAgaW5kZXgsXG4gICAgICB2YWx1ZTogRmxpcC5nZXRDYW5kaWRhdGVWYWx1ZShjYXJkKSxcbiAgICB9O1xuICB9XG5cbiAgLy8gaW5kZXhcbiAgY29uc3QgY2FyZCA9IHRoaXMuZ2V0Q2FuZGlkYXRlTm9kZShzb3VyY2UpO1xuXG4gIHJldHVybiB7XG4gICAgbm9kZTogY2FyZCxcbiAgICBpbmRleDogY2FyZCA9PT0gbnVsbCA/IC0xIDogc291cmNlLFxuICAgIHZhbHVlOiBGbGlwLmdldENhbmRpZGF0ZVZhbHVlKGNhcmQpLFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBnZXRDYW5kaWRhdGVJbmZvO1xuIiwiaW1wb3J0IEZsaXAgZnJvbSAnLi4vZmxpcCc7XG5cbi8qKlxuICogUmV0dXJucyBjYXJkIG5vZGUgYnkgcmVmZXJlbmNlLlxuICovXG5mdW5jdGlvbiBnZXRDYW5kaWRhdGVOb2RlKFxuICB0aGlzOiBGbGlwLFxuICBzb3VyY2U6IG51bWJlciB8IHN0cmluZyB8IG51bGwsXG4pOiBIVE1MRWxlbWVudCB8IG51bGwge1xuICAvLyBudWxsXG4gIGlmIChzb3VyY2UgPT09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIHZhbHVlXG4gIGlmICh0eXBlb2Ygc291cmNlID09PSAnc3RyaW5nJykge1xuICAgIGNvbnN0IGNhcmRSZXN1bHQgPSB0aGlzLmNhbmRpZGF0ZXNDYXRjaC5maW5kKChjYXJkKSA9PiAoXG4gICAgICBGbGlwLmdldENhbmRpZGF0ZVZhbHVlKGNhcmQpID09PSBzb3VyY2VcbiAgICApKTtcblxuICAgIHJldHVybiBjYXJkUmVzdWx0ID8/IG51bGw7XG4gIH1cblxuICAvLyBpbmRleFxuICByZXR1cm4gdGhpcy5jYW5kaWRhdGVzQ2F0Y2hbc291cmNlXSA/PyBudWxsO1xufVxuXG5leHBvcnQgZGVmYXVsdCBnZXRDYW5kaWRhdGVOb2RlO1xuIiwiaW1wb3J0IEZsaXAgZnJvbSAnLi4vZmxpcCc7XG5cbi8qKlxuICogUmV0dXJucyBjYXJkIHZhbHVlIGJ5IHJlZmVyZW5jZS5cbiAqL1xuZnVuY3Rpb24gZ2V0Q2FuZGlkYXRlVmFsdWUoXG4gIHRoaXM6IEZsaXAsXG4gIHNvdXJjZTogbnVtYmVyIHwgSFRNTEVsZW1lbnQgfCBudWxsLFxuKTogc3RyaW5nIHwgbnVsbCB7XG4gIC8vIG51bGxcbiAgaWYgKHNvdXJjZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gY2FyZCBub2RlXG4gIGlmIChzb3VyY2UgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgIHJldHVybiBGbGlwLmdldENhbmRpZGF0ZVZhbHVlKHNvdXJjZSk7XG4gIH1cblxuICAvLyBpbmRleFxuICByZXR1cm4gRmxpcC5nZXRDYW5kaWRhdGVWYWx1ZSh0aGlzLmNhbmRpZGF0ZXNDYXRjaFtzb3VyY2VdKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2V0Q2FuZGlkYXRlVmFsdWU7XG4iLCJlbnVtIE1vZGUge1xuICBsb29wID0gJ2xvb3AnLFxuICByYW5kb20gPSAncmFuZG9tJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgTW9kZTtcbiIsImltcG9ydCBGbGlwIGZyb20gJy4uL2ZsaXAnO1xuaW1wb3J0IE1vZGUgZnJvbSAnLi4vdmFsdWVzL21vZGUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEdldE5leHRDYW5kaWRhdGVPcHRpb25zIHtcbiAgbW9kZT86IE1vZGU7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW5kZXggb2YgbmV4dCBjYXJkLlxuICovXG5mdW5jdGlvbiBnZXROZXh0Q2FuZGlkYXRlSW5kZXgoXG4gIHRoaXM6IEZsaXAsXG4gIG9wdGlvbnM6IEdldE5leHRDYW5kaWRhdGVPcHRpb25zID0ge30sXG4pOiBudW1iZXIge1xuICBjb25zdCB7XG4gICAgbW9kZSA9IHRoaXMubW9kZSxcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHsgaW5kZXgsIGNhbmRpZGF0ZXNDYXRjaCB9ID0gdGhpcztcbiAgY29uc3QgeyBsZW5ndGggfSA9IGNhbmRpZGF0ZXNDYXRjaDtcblxuICBzd2l0Y2ggKG1vZGUpIHtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBtb2RlOiAke21vZGV9YCk7XG5cbiAgICBjYXNlIE1vZGUubG9vcDpcbiAgICAgIHJldHVybiAobGVuZ3RoID4gMFxuICAgICAgICA/IChpbmRleCArIDEpICUgbGVuZ3RoXG4gICAgICAgIDogLTFcbiAgICAgICk7XG5cbiAgICBjYXNlIE1vZGUucmFuZG9tOiB7XG4gICAgICBzd2l0Y2ggKGxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgcmV0dXJuIC0xO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICByZXR1cm4gdGhpcy5pbmRleDtcblxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgbGV0IG5leHRJbmRleCA9IGluZGV4O1xuXG4gICAgICAgICAgd2hpbGUgKG5leHRJbmRleCA9PT0gaW5kZXgpIHtcbiAgICAgICAgICAgIG5leHRJbmRleCA9IE1hdGguZmxvb3IobGVuZ3RoICogTWF0aC5yYW5kb20oKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG5leHRJbmRleDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBnZXROZXh0Q2FuZGlkYXRlSW5kZXg7XG4iLCJlbnVtIEF0dHJpYnV0ZSB7XG4gIGluZGV4ID0gJ2luZGV4JyxcbiAgdmFsdWUgPSAndmFsdWUnLFxuICBtb2RlID0gJ21vZGUnLFxuICBkdXJhdGlvbiA9ICdkdXJhdGlvbicsXG4gIGRpcmVjdGlvbiA9ICdkaXJlY3Rpb24nLFxuICBtaW5GbGlwcyA9ICdtaW4tZmxpcHMnLFxuICBtYXhGbGlwcyA9ICdtYXgtZmxpcHMnLFxuICBwZXJzcGVjdGl2ZSA9ICdwZXJzcGVjdGl2ZScsXG59XG5cbmV4cG9ydCBkZWZhdWx0IEF0dHJpYnV0ZTtcbiIsImltcG9ydCBmbGlwLCB7IEZsaXBPcHRpb25zIH0gZnJvbSAnLi9tZXRob2RzL2ZsaXAnO1xuaW1wb3J0IGZsaXBBbmltYXRpb24gZnJvbSAnLi9tZXRob2RzL2ZsaXAvZmxpcEFuaW1hdGlvbic7XG5pbXBvcnQgZ2V0Q2FuZGlkYXRlSW5kZXggZnJvbSAnLi9tZXRob2RzL2dldENhbmRpZGF0ZUluZGV4JztcbmltcG9ydCBnZXRDYW5kaWRhdGVJbmZvIGZyb20gJy4vbWV0aG9kcy9nZXRDYW5kaWRhdGVJbmZvJztcbmltcG9ydCBnZXRDYW5kaWRhdGVOb2RlIGZyb20gJy4vbWV0aG9kcy9nZXRDYW5kaWRhdGVOb2RlJztcbmltcG9ydCBnZXRDYW5kaWRhdGVWYWx1ZSBmcm9tICcuL21ldGhvZHMvZ2V0Q2FuZGlkYXRlVmFsdWUnO1xuaW1wb3J0IGdldE5leHRDYW5kaWRhdGVJbmRleCBmcm9tICcuL21ldGhvZHMvZ2V0TmV4dENhbmRpZGF0ZUluZGV4JztcbmltcG9ydCByZWdpc3RlckVsZW1lbnQgZnJvbSAnLi91dGlscy9yZWdpc3RlckVsZW1lbnQnO1xuaW1wb3J0IEF0dHJpYnV0ZSBmcm9tICcuL3ZhbHVlcy9hdHRyaWJ1dGUnO1xuaW1wb3J0IERpcmVjdGlvbiBmcm9tICcuL3ZhbHVlcy9kaXJlY3Rpb24nO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vdmFsdWVzL2V2ZW50JztcbmltcG9ydCBNb2RlIGZyb20gJy4vdmFsdWVzL21vZGUnO1xuaW1wb3J0IFNsb3QgZnJvbSAnLi92YWx1ZXMvc2xvdCc7XG5cbmNvbnN0IG5vZGVOYW1lID0gJ2ZsaXAtcGFjayc7XG5cbmNvbnN0IHsgaXNOYU4gfSA9IGdsb2JhbFRoaXM7XG5jb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0QXR0cmlidXRlVmFsdWVzID0ge1xuICBbQXR0cmlidXRlLm1vZGVdOiBNb2RlLmxvb3AsXG4gIFtBdHRyaWJ1dGUuZHVyYXRpb25dOiA0MDAsXG4gIFtBdHRyaWJ1dGUuZGlyZWN0aW9uXTogRGlyZWN0aW9uLmRvd24sXG4gIFtBdHRyaWJ1dGUuaW5kZXhdOiAtMSxcbiAgW0F0dHJpYnV0ZS5taW5GbGlwc106IDAsXG4gIFtBdHRyaWJ1dGUubWF4RmxpcHNdOiBJbmZpbml0eSxcbn07XG5cbnRlbXBsYXRlLmlubmVySFRNTCA9IGBcbiAgPHN0eWxlPlxuICAgIDpob3N0IHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICB9XG5cbiAgICBzbG90IHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIHotaW5kZXg6IDA7XG4gICAgfVxuXG4gICAgc2xvdDpub3QoW25hbWVdKSB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgPC9zdHlsZT5cbiAgPGZsaXA+XG4gICAgPHNsb3Q+PC9zbG90PlxuICAgIDxzbG90IG5hbWU9XCIke1Nsb3QuY3VycmVudH1cIj48L3Nsb3Q+XG4gICAgPHNsb3QgbmFtZT1cIiR7U2xvdC50ZW1wfVwiPjwvc2xvdD5cbiAgPC9mbGlwPlxuYDtcblxuZXhwb3J0IGludGVyZmFjZSBGbGlwcGluZ09wdGlvbiB7XG4gIGR1cmF0aW9uOiBudW1iZXI7XG4gIGluZGV4OiBudW1iZXI7XG4gIGxhc3RJbmRleDogbnVtYmVyO1xuICBsYXN0Q2FuZGlkYXRlOiBIVE1MRWxlbWVudCB8IG51bGw7XG4gIHRlbXBDYW5kaWRhdGU6IEhUTUxFbGVtZW50O1xufVxuXG5jbGFzcyBGbGlwIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBwcm90ZWN0ZWQgY2FuZGlkYXRlc0NhdGNoOiBIVE1MRWxlbWVudFtdID0gW107XG5cbiAgcHJvdGVjdGVkIHJvb3RFbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgY29uc3Qgc2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuXG4gICAgc2hhZG93Um9vdC5hcHBlbmQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgIHRoaXMucm9vdEVsZW1lbnQgPSBzaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJ2ZsaXAnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAoc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCdzbG90Om5vdChbbmFtZV0pJykgYXMgSFRNTFNsb3RFbGVtZW50KVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ3Nsb3RjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2FuZGlkYXRlc0NhdGNoID0gQXJyYXkuZnJvbShcbiAgICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoJzpzY29wZSA+IDpub3QoW3Nsb3Q9dGVtcF0pJyksXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgeyBjYW5kaWRhdGVzQ2F0Y2ggfSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKHRoaXMuaW5kZXggPT09IC0xICYmIHRoaXMuaGFzQXR0cmlidXRlKEF0dHJpYnV0ZS52YWx1ZSkpIHtcbiAgICAgICAgICAvLyBpbml0aWFsaXplIGluZGV4IGJ5IHZhbHVlXG4gICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuZ2V0QXR0cmlidXRlKEF0dHJpYnV0ZS52YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pbmRleCA+PSBjYW5kaWRhdGVzQ2F0Y2gubGVuZ3RoIHx8IHRoaXMuaW5kZXggPCAwKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBjYW5kaWRhdGVzQ2F0Y2gubGVuZ3RoID4gMCA/IDAgOiAtMTtcblxuICAgICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IERJUkVDVElPTigpIHtcbiAgICByZXR1cm4geyAuLi5EaXJlY3Rpb24gfTtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgTU9ERSgpIHtcbiAgICByZXR1cm4geyAuLi5Nb2RlIH07XG4gIH1cblxuICBzdGF0aWMgZ2V0IEVWRU5UKCkge1xuICAgIHJldHVybiB7IC4uLkV2ZW50IH07XG4gIH1cblxuICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgQXR0cmlidXRlLmluZGV4LFxuICAgICAgQXR0cmlidXRlLnZhbHVlLFxuICAgIF07XG4gIH1cblxuICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soYXR0cmlidXRlTmFtZTogQXR0cmlidXRlKSB7XG4gICAgc3dpdGNoIChhdHRyaWJ1dGVOYW1lKSB7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBBdHRyaWJ1dGUuaW5kZXg6XG4gICAgICAgIGlmICh0aGlzLmhhc0F0dHJpYnV0ZShBdHRyaWJ1dGUuaW5kZXgpKSB7XG4gICAgICAgICAgdGhpcy5pbmRleCA9IE51bWJlcih0aGlzLmdldEF0dHJpYnV0ZShBdHRyaWJ1dGUuaW5kZXgpKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBBdHRyaWJ1dGUudmFsdWU6XG4gICAgICAgIGlmICh0aGlzLmhhc0F0dHJpYnV0ZShBdHRyaWJ1dGUudmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuZ2V0QXR0cmlidXRlKEF0dHJpYnV0ZS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdmFsdWUgb2YgY2FuZGlkYXRlIG5vZGUuXG4gICAqL1xuICBzdGF0aWMgZ2V0Q2FuZGlkYXRlVmFsdWUoY2FuZGlkYXRlOiBIVE1MRWxlbWVudCB8IG51bGwpOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gY2FuZGlkYXRlPy5nZXRBdHRyaWJ1dGU/LihBdHRyaWJ1dGUudmFsdWUpID8/IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogRG9lcyBmbGlwcGluZyBhbmltYXRpb24gZnJvbSBsYXN0IGNhbmRpZGF0ZSB0byBuZXh0IGNhbmRpZGF0ZS5cbiAgICovXG4gIHN0YXRpYyBmbGlwQW5pbWF0aW9uID0gZmxpcEFuaW1hdGlvblxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGNhbmRpZGF0ZSBlbGVtZW50cy5cbiAgICovXG4gIGdldCBjYW5kaWRhdGVzKCk6IEhUTUxFbGVtZW50W10ge1xuICAgIHJldHVybiBbLi4udGhpcy5jYW5kaWRhdGVzQ2F0Y2hdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgZmxpcHBpbmcgbW9kZS5cbiAgICovXG4gIGdldCBtb2RlKCk6IE1vZGUge1xuICAgIGNvbnN0IG1vZGUgPSB0aGlzLmdldEF0dHJpYnV0ZShBdHRyaWJ1dGUubW9kZSkgYXMgTW9kZTtcblxuICAgIHJldHVybiAobW9kZSA9PT0gbnVsbCB8fCAhT2JqZWN0LnZhbHVlcyhNb2RlKS5pbmNsdWRlcyhtb2RlKVxuICAgICAgPyBkZWZhdWx0QXR0cmlidXRlVmFsdWVzW0F0dHJpYnV0ZS5tb2RlXVxuICAgICAgOiBtb2RlXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGZsaXBwaW5nIG1vZGUuXG4gICAqL1xuICBzZXQgbW9kZShtb2RlOiBNb2RlKSB7XG4gICAgaWYgKCFPYmplY3QudmFsdWVzKE1vZGUpLmluY2x1ZGVzKG1vZGUpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIG1vZGU6ICR7bW9kZX1gKTtcbiAgICB9XG5cbiAgICB0aGlzLnNldEF0dHJpYnV0ZShBdHRyaWJ1dGUubW9kZSwgbW9kZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBmbGlwcGluZyBkdXJhdGlvbi5cbiAgICovXG4gIGdldCBkdXJhdGlvbigpOiBudW1iZXIge1xuICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlLmR1cmF0aW9uKTtcblxuICAgIHJldHVybiAoZHVyYXRpb24gPT09IG51bGwgfHwgZHVyYXRpb24ubGVuZ3RoID09PSAwXG4gICAgICA/IGRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNbQXR0cmlidXRlLmR1cmF0aW9uXVxuICAgICAgOiBOdW1iZXIoZHVyYXRpb24pXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGZsaXBwaW5nIGR1cmF0aW9uLlxuICAgKi9cbiAgc2V0IGR1cmF0aW9uKGR1cmF0aW9uOiBudW1iZXIpIHtcbiAgICBpZiAoaXNOYU4oZHVyYXRpb24pKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIGR1cmF0aW9uOiAke2R1cmF0aW9ufWApO1xuICAgIH0gZWxzZSBpZiAoZHVyYXRpb24gPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgRHVyYXRpb24gc2hvdWxkIG5vdCBiZSBsZXNzZXIgdGhhbiAwOiAke2R1cmF0aW9ufWApO1xuICAgIH1cblxuICAgIHRoaXMuc2V0QXR0cmlidXRlKEF0dHJpYnV0ZS5kdXJhdGlvbiwgYCR7ZHVyYXRpb259YCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBmbGlwcGluZyBkaXJlY3Rpb24uXG4gICAqL1xuICBnZXQgZGlyZWN0aW9uKCk6IERpcmVjdGlvbiB7XG4gICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlLmRpcmVjdGlvbikgYXMgRGlyZWN0aW9uO1xuXG4gICAgcmV0dXJuIChPYmplY3QudmFsdWVzKERpcmVjdGlvbikuaW5jbHVkZXMoZGlyZWN0aW9uKVxuICAgICAgPyBkaXJlY3Rpb25cbiAgICAgIDogZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1tBdHRyaWJ1dGUuZGlyZWN0aW9uXVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBmbGlwcGluZyBkaXJlY3Rpb24uXG4gICAqL1xuICBzZXQgZGlyZWN0aW9uKGRpcmVjdGlvbjogRGlyZWN0aW9uKSB7XG4gICAgaWYgKCFPYmplY3QudmFsdWVzKERpcmVjdGlvbikuaW5jbHVkZXMoZGlyZWN0aW9uKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBkaXJlY3Rpb246ICR7ZGlyZWN0aW9ufWApO1xuICAgIH1cblxuICAgIHRoaXMuc2V0QXR0cmlidXRlKEF0dHJpYnV0ZS5kaXJlY3Rpb24sIGRpcmVjdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBtaW4gZmxpcHMuXG4gICAqL1xuICBnZXQgbWluRmxpcHMoKTogbnVtYmVyIHtcbiAgICBjb25zdCBtaW5GbGlwcyA9IHRoaXMuZ2V0QXR0cmlidXRlKEF0dHJpYnV0ZS5taW5GbGlwcyk7XG5cbiAgICByZXR1cm4gKG1pbkZsaXBzID09PSBudWxsIHx8IG1pbkZsaXBzLmxlbmd0aCA9PT0gMFxuICAgICAgPyBkZWZhdWx0QXR0cmlidXRlVmFsdWVzW0F0dHJpYnV0ZS5taW5GbGlwc11cbiAgICAgIDogTnVtYmVyKG1pbkZsaXBzKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBtaW4gZmxpcHMuXG4gICAqL1xuICBzZXQgbWluRmxpcHMobWluRmxpcHM6IG51bWJlcikge1xuICAgIGlmIChpc05hTihtaW5GbGlwcykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgbWluIGZsaXBzOiAke21pbkZsaXBzfWApO1xuICAgIH0gZWxzZSBpZiAocGFyc2VJbnQoYCR7bWluRmxpcHN9YCwgMTApICE9PSBtaW5GbGlwcykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgTWluIGZsaXBzIHNob3VsZCBiZSBhbiBpbnRlZ2VyOiAke21pbkZsaXBzfWApO1xuICAgIH0gZWxzZSBpZiAobWluRmxpcHMgPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgTWluIGZsaXBzIHNob3VsZCBub3QgYmUgbGVzc2VyIHRoYW4gMDogJHttaW5GbGlwc31gKTtcbiAgICB9XG5cbiAgICB0aGlzLnNldEF0dHJpYnV0ZShBdHRyaWJ1dGUubWluRmxpcHMsIGAke21pbkZsaXBzfWApO1xuXG4gICAgaWYgKHRoaXMubWF4RmxpcHMgPCBtaW5GbGlwcykge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXG4gICAgICAgICdTZXR0aW5nIG1pbiBmbGlwcyB0aGF0IGlzIGdyZWF0ZXIgdGhhbiBtYXggZmxpcHMgbWlnaHQgY2F1c2UgZmxpcHBpbmcgZXJyb3InLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBtYXggZmxpcHMuXG4gICAqL1xuICBnZXQgbWF4RmxpcHMoKTogbnVtYmVyIHtcbiAgICBjb25zdCBtYXhGbGlwcyA9IHRoaXMuZ2V0QXR0cmlidXRlKEF0dHJpYnV0ZS5tYXhGbGlwcyk7XG5cbiAgICByZXR1cm4gKG1heEZsaXBzID09PSBudWxsIHx8IG1heEZsaXBzLmxlbmd0aCA9PT0gMFxuICAgICAgPyBkZWZhdWx0QXR0cmlidXRlVmFsdWVzW0F0dHJpYnV0ZS5tYXhGbGlwc11cbiAgICAgIDogTnVtYmVyKG1heEZsaXBzKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBtYXggZmxpcHMuXG4gICAqL1xuICBzZXQgbWF4RmxpcHMobWF4RmxpcHM6IG51bWJlcikge1xuICAgIGlmIChpc05hTihtYXhGbGlwcykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgbWF4IGZsaXBzOiAke21heEZsaXBzfWApO1xuICAgIH0gZWxzZSBpZiAocGFyc2VJbnQoYCR7bWF4RmxpcHN9YCwgMTApICE9PSBtYXhGbGlwcykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgTWF4IGZsaXBzIHNob3VsZCBiZSBhbiBpbnRlZ2VyOiAke21heEZsaXBzfWApO1xuICAgIH0gZWxzZSBpZiAobWF4RmxpcHMgPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgTWF4IGZsaXBzIHNob3VsZCBub3QgYmUgbGVzc2VyIHRoYW4gMDogJHttYXhGbGlwc31gKTtcbiAgICB9XG5cbiAgICB0aGlzLnNldEF0dHJpYnV0ZShBdHRyaWJ1dGUubWF4RmxpcHMsIGAke21heEZsaXBzfWApO1xuXG4gICAgaWYgKHRoaXMubWluRmxpcHMgPiBtYXhGbGlwcykge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXG4gICAgICAgICdTZXR0aW5nIG1heCBmbGlwcyB0aGF0IGlzIGxlc3MgdGhhbiBtaW4gZmxpcHMgbWlnaHQgY2F1c2UgZmxpcHBpbmcgZXJyb3InLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyAzRCBwZXJzcGVjdGl2ZSB2YWx1ZS5cbiAgICovXG4gIGdldCBwZXJzcGVjdGl2ZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHBlcnNwZWN0aXZlID0gdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlLnBlcnNwZWN0aXZlKTtcblxuICAgIGlmIChwZXJzcGVjdGl2ZSAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHBlcnNwZWN0aXZlO1xuICAgIH1cblxuICAgIGNvbnN0IHsgY2xpZW50V2lkdGgsIGNsaWVudEhlaWdodCB9ID0gdGhpcztcbiAgICBjb25zdCBzaXplID0gMiAqIE1hdGgubWF4KGNsaWVudFdpZHRoLCBjbGllbnRIZWlnaHQpO1xuXG4gICAgcmV0dXJuIGAke3NpemV9cHhgO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgM0QgcGVyc3BlY3RpdmUgdmFsdWUuXG4gICAqL1xuICBzZXQgcGVyc3BlY3RpdmUocGVyc3BlY3RpdmU6IHN0cmluZykge1xuICAgIGlmICh0eXBlb2YgcGVyc3BlY3RpdmUgPT09ICdzdHJpbmcnICYmIHBlcnNwZWN0aXZlLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKEF0dHJpYnV0ZS5wZXJzcGVjdGl2ZSwgcGVyc3BlY3RpdmUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGN1cnJlbnQgaW5kZXguXG4gICAqL1xuICBnZXQgaW5kZXgoKTogbnVtYmVyIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZ2V0QXR0cmlidXRlKEF0dHJpYnV0ZS5pbmRleCk7XG5cbiAgICBpZiAoaW5kZXggPT09IG51bGwgfHwgaW5kZXgubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1tBdHRyaWJ1dGUuaW5kZXhdO1xuICAgIH1cblxuICAgIHJldHVybiBOdW1iZXIoaW5kZXgpICUgdGhpcy5jYW5kaWRhdGVzLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGN1cnJlbnQgaW5kZXguXG4gICAqL1xuICBzZXQgaW5kZXgoaW5kZXg6IG51bWJlcikge1xuICAgIGlmIChpc05hTihpbmRleCkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgaW5kZXg6ICR7aW5kZXh9YCk7XG4gICAgfSBlbHNlIGlmIChwYXJzZUludChgJHtpbmRleH1gLCAxMCkgIT09IGluZGV4KSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbmRleCBzaG91bGQgYmUgYW4gaW50ZWdlcjogJHtpbmRleH1gKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGNhbmRpZGF0ZXNDYXRjaCB9ID0gdGhpcztcbiAgICBjb25zdCBjYW5kaWRhdGVJbmZvID0gdGhpcy5nZXRDYW5kaWRhdGVJbmZvKGluZGV4KTtcbiAgICBjb25zdCB7XG4gICAgICBpbmRleDogY2FuZGlkYXRlSW5kZXgsXG4gICAgICB2YWx1ZTogY2FuZGlkYXRlVmFsdWUsXG4gICAgICBub2RlOiBjYW5kaWRhdGVOb2RlLFxuICAgIH0gPSBjYW5kaWRhdGVJbmZvO1xuXG4gICAgaWYgKGNhbmRpZGF0ZU5vZGUgPT09IG51bGwgJiYgY2FuZGlkYXRlc0NhdGNoLmxlbmd0aCA+IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSWxsZWdhbCBpbmRleDogJHtpbmRleH1gKTtcbiAgICB9XG5cbiAgICB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoYFtzbG90PVwiJHtTbG90LmN1cnJlbnR9XCJdYCkuZm9yRWFjaCgoY2FuZGlkYXRlKSA9PiB7XG4gICAgICBjYW5kaWRhdGUucmVtb3ZlQXR0cmlidXRlKCdzbG90Jyk7XG4gICAgfSk7XG4gICAgY2FuZGlkYXRlTm9kZT8uc2V0QXR0cmlidXRlPy4oJ3Nsb3QnLCBTbG90LmN1cnJlbnQpO1xuXG4gICAgaWYgKGNhbmRpZGF0ZUluZGV4ICE9PSB0aGlzLmluZGV4KSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShBdHRyaWJ1dGUuaW5kZXgsIGAke2NhbmRpZGF0ZUluZGV4fWApO1xuXG4gICAgICBpZiAoY2FuZGlkYXRlVmFsdWUpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoQXR0cmlidXRlLnZhbHVlLCBjYW5kaWRhdGVWYWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShBdHRyaWJ1dGUudmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGN1cnJlbnQgdmFsdWUuXG4gICAqL1xuICBnZXQgdmFsdWUoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q2FuZGlkYXRlVmFsdWUodGhpcy5pbmRleCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBjdXJyZW50IHZhbHVlLlxuICAgKi9cbiAgc2V0IHZhbHVlKHZhbHVlOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgaWYgKHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgdmFsdWU6ICR7dmFsdWV9YCk7XG4gICAgfVxuXG4gICAgdGhpcy5pbmRleCA9IHRoaXMuZ2V0Q2FuZGlkYXRlSW5kZXgodmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgY3VycmVudCBjYW5kaWRhdGUuXG4gICAqL1xuICBnZXQgY2FuZGlkYXRlKCk6IEhUTUxFbGVtZW50IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q2FuZGlkYXRlTm9kZSh0aGlzLmluZGV4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGN1cnJlbnQgY2FuZGlkYXRlLlxuICAgKi9cbiAgc2V0IGNhbmRpZGF0ZShjYW5kaWRhdGU6IEhUTUxFbGVtZW50IHwgbnVsbCkge1xuICAgIHRoaXMuaW5kZXggPSB0aGlzLmdldENhbmRpZGF0ZUluZGV4KGNhbmRpZGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBjYW5kaWRhdGUgbm9kZS5cbiAgICovXG4gIGdldENhbmRpZGF0ZU5vZGUgPSBnZXRDYW5kaWRhdGVOb2RlXG5cbiAgLyoqXG4gICAqIFJldHVybnMgY2FuZGlkYXRlIGluZGV4LlxuICAgKi9cbiAgZ2V0Q2FuZGlkYXRlSW5kZXggPSBnZXRDYW5kaWRhdGVJbmRleFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGNhbmRpZGF0ZSB2YWx1ZS5cbiAgICovXG4gIGdldENhbmRpZGF0ZVZhbHVlID0gZ2V0Q2FuZGlkYXRlVmFsdWVcblxuICAvKipcbiAgICogUmV0dXJucyBjYWNhbmRpZGF0ZXJkIGluZm8uXG4gICAqL1xuICBnZXRDYW5kaWRhdGVJbmZvID0gZ2V0Q2FuZGlkYXRlSW5mb1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiBuZXh0IGNhbmRpZGF0ZS5cbiAgICovXG4gIGdldE5leHRDYW5kaWRhdGVJbmRleCA9IGdldE5leHRDYW5kaWRhdGVJbmRleFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBub2RlIG9mIG5leHQgY2FuZGlkYXRlLlxuICAgKi9cbiAgZ2V0TmV4dENhbmRpZGF0ZU5vZGUoLi4uYXJnczogUGFyYW1ldGVyczxGbGlwWydnZXROZXh0Q2FuZGlkYXRlSW5kZXgnXT4pOiBSZXR1cm5UeXBlPEZsaXBbJ2dldENhbmRpZGF0ZU5vZGUnXT4ge1xuICAgIGNvbnN0IG5leHRJbmRleCA9IHRoaXMuZ2V0TmV4dENhbmRpZGF0ZUluZGV4KC4uLmFyZ3MpO1xuXG4gICAgcmV0dXJuIHRoaXMuZ2V0Q2FuZGlkYXRlTm9kZShuZXh0SW5kZXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHZhbHVlIG9mIG5leHQgY2FuZGlkYXRlLlxuICAgKi9cbiAgZ2V0TmV4dENhbmRpZGF0ZVZhbHVlKC4uLmFyZ3M6IFBhcmFtZXRlcnM8RmxpcFsnZ2V0TmV4dENhbmRpZGF0ZUluZGV4J10+KTogUmV0dXJuVHlwZTxGbGlwWydnZXRDYW5kaWRhdGVWYWx1ZSddPiB7XG4gICAgY29uc3QgbmV4dEluZGV4ID0gdGhpcy5nZXROZXh0Q2FuZGlkYXRlSW5kZXgoLi4uYXJncyk7XG5cbiAgICByZXR1cm4gdGhpcy5nZXRDYW5kaWRhdGVWYWx1ZShuZXh0SW5kZXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGluZm8gb2YgbmV4dCBjYW5kaWRhdGUuXG4gICAqL1xuICBnZXROZXh0Q2FuZGlkYXRlSW5mbyguLi5hcmdzOiBQYXJhbWV0ZXJzPEZsaXBbJ2dldE5leHRDYW5kaWRhdGVJbmRleCddPik6IFJldHVyblR5cGU8RmxpcFsnZ2V0Q2FuZGlkYXRlSW5mbyddPiB7XG4gICAgY29uc3QgbmV4dEluZGV4ID0gdGhpcy5nZXROZXh0Q2FuZGlkYXRlSW5kZXgoLi4uYXJncyk7XG5cbiAgICByZXR1cm4gdGhpcy5nZXRDYW5kaWRhdGVJbmZvKG5leHRJbmRleCk7XG4gIH1cblxuICAvKipcbiAgICogRmxpcHMgdG8gY2FuZGlkYXRlIGJ5IHJlZmVyZW5jZS5cbiAgICovXG4gIGZsaXAoXG4gICAgc291cmNlPzogbnVtYmVyIHwgc3RyaW5nIHwgSFRNTEVsZW1lbnQsXG4gICAgb3B0aW9ucz86IEZsaXBPcHRpb25zLFxuICApOiBSZXR1cm5UeXBlPHR5cGVvZiBmbGlwPlxuXG4gIGZsaXAob3B0aW9ucz86IEZsaXBPcHRpb25zKTogUmV0dXJuVHlwZTx0eXBlb2YgZmxpcD5cblxuICBmbGlwKC4uLmFyZ3M6IFBhcmFtZXRlcnM8dHlwZW9mIGZsaXA+KSB7XG4gICAgcmV0dXJuIGZsaXAuY2FsbCh0aGlzLCAuLi5hcmdzKTtcbiAgfVxufVxuXG5yZWdpc3RlckVsZW1lbnQoRmxpcCwgbm9kZU5hbWUpO1xuXG5leHBvcnQgZGVmYXVsdCBGbGlwO1xuIiwiLyoqXG4gKiBSZWdpc3RlcnMgZWxlbWVudC5cbiAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJFbGVtZW50KFxuICBOb2RlOiB0eXBlb2YgSFRNTEVsZW1lbnQsXG4gIG5vZGVOYW1lOiBzdHJpbmcsXG4pOiBSZXR1cm5UeXBlPHR5cGVvZiBjdXN0b21FbGVtZW50cy53aGVuRGVmaW5lZD4ge1xuICBpZiAoY3VzdG9tRWxlbWVudHMuZ2V0KG5vZGVOYW1lKSkge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcbiAgICAgIG5ldyBFcnJvcihgQWxyZWFkeSBkZWZpbmVkIDwke25vZGVOYW1lfT5gKSxcbiAgICApO1xuICB9XG5cbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKG5vZGVOYW1lLCBOb2RlKTtcblxuICByZXR1cm4gY3VzdG9tRWxlbWVudHMud2hlbkRlZmluZWQobm9kZU5hbWUpO1xufVxuXG5leHBvcnQgZGVmYXVsdCByZWdpc3RlckVsZW1lbnQ7XG4iXSwibmFtZXMiOlsidHJpZ2dlckV2ZW50IiwicmVmIiwidHlwZSIsIm9wdGlvbnMiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJFdmVudCIsImNsYXNzTmFtZSIsInNsb3QiLCJzdHlsZSIsImF0dHJpYnV0ZXMiLCJpbm5lckhUTUwiLCJ0ZW1wTm9kZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImF0dGFjaFNoYWRvdyIsIm1vZGUiLCJ1bmRlZmluZWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImtleSIsIkNsYXNzTmFtZSIsIlNsb3QiLCJhc3luYyIsIm5leHRDYW5kaWRhdGVJbmZvIiwiaW5kZXgiLCJuZXh0SW5kZXgiLCJ0ZW1wQ2FuZGlkYXRlTm9kZSIsImNyZWF0ZVRlbXBOb2RlIiwibGFzdFRlbXBDYXJkIiwidGhpcyIsInF1ZXJ5U2VsZWN0b3IiLCJyZW1vdmUiLCJhcHBlbmQiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsImNvbXBvc2VkIiwiZGV0YWlsIiwiRmxpcCIsImFyZzAiLCJhcmcxIiwiSFRNTEVsZW1lbnQiLCJkdXJhdGlvbiIsImRpcmVjdGlvbiIsIm1pbkZsaXBzIiwibWF4RmxpcHMiLCJwZXJzcGVjdGl2ZSIsImZsaXBPcHRpb25zIiwidGFyZ2V0U291cmNlIiwiZ2V0TmV4dENhbmRpZGF0ZUluZGV4IiwidGFyZ2V0Q2FuZGlkYXRlSW5mbyIsImdldENhbmRpZGF0ZUluZm8iLCJ0YXJnZXRJbmRleCIsIm5vZGUiLCJ0YXJnZXROb2RlIiwiUmVmZXJlbmNlRXJyb3IiLCJsYXN0Q2FuZGlkYXRlSW5mbyIsImZsaXBOZXh0IiwidGltZXMiLCJjdXJyZW50Q2FuZGlkYXRlSW5mbyIsImZsaXBPbmVDYW5kaWRhdGUiLCJEaXJlY3Rpb24iLCJjbG9uZU5vZGUiLCJuZXdOb2RlIiwiSFRNTENhbnZhc0VsZW1lbnQiLCJuZXdDYW52YXMiLCJ3aWR0aCIsImhlaWdodCIsImdldENvbnRleHQiLCJkcmF3SW1hZ2UiLCJjaGlsZE5vZGVzIiwiY2hpbGQiLCJhcHBlbmRDaGlsZCIsImNzcyIsInByZWZpeHMiLCJoZWFkIiwidGVzdCIsInRleHQiLCJyZXBsYWNlIiwiQXJyYXkiLCJpc0FycmF5IiwibWFwIiwicHJlZml4IiwiY29uY2F0Iiwiam9pbiIsImdldENhbmRpZGF0ZVN0eWxlIiwicHJlZml4Q3NzIiwiVHlwZUVycm9yIiwibGFzdENhbmRpZGF0ZU5vZGUiLCJuZXh0Q2FuZGlkYXRlTm9kZSIsImR1cmF0aW9uU2VjIiwiZG9tQ2FuZGlkYXRlIiwiZG9tTmV4dCIsImRvbU5leHRDYW5kaWRhdGUiLCJzZXRQcm9wZXJ0eSIsInJlbW92ZUF0dHJpYnV0ZSIsImRvbUJhY2tncm91bmQiLCJkb21MYXN0IiwiZG9tTGFzdENhbmRpZGF0ZSIsImRvbUxhc3RCYWNrZ3JvdW5kQ2FuZGlkYXRlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJhZGRFdmVudExpc3RlbmVyIiwib25jZSIsImZsaXBwaW5nVmVydGljYWxseSIsImZsaXBwaW5nSG9yaXpvbnRhbGx5Iiwic291cmNlIiwiY2FuZGlkYXRlc0NhdGNoIiwiY2FyZHNDYXRjaCIsImluZGV4T2YiLCJmaW5kSW5kZXgiLCJjYXJkIiwidmFsdWUiLCJnZXRDYW5kaWRhdGVJbmRleCIsImdldENhbmRpZGF0ZU5vZGUiLCJmaW5kIiwiTW9kZSIsImxlbmd0aCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIkF0dHJpYnV0ZSIsImlzTmFOIiwiZ2xvYmFsVGhpcyIsInRlbXBsYXRlIiwiZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcyIsIkluZmluaXR5IiwiY29uc3RydWN0b3IiLCJzdXBlciIsInNoYWRvd1Jvb3QiLCJjb250ZW50Iiwicm9vdEVsZW1lbnQiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImhhc0F0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsIkRJUkVDVElPTiIsIk1PREUiLCJFVkVOVCIsIm9ic2VydmVkQXR0cmlidXRlcyIsImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayIsImF0dHJpYnV0ZU5hbWUiLCJOdW1iZXIiLCJjYW5kaWRhdGUiLCJmbGlwQW5pbWF0aW9uIiwiY2FuZGlkYXRlcyIsInZhbHVlcyIsImluY2x1ZGVzIiwiUmFuZ2VFcnJvciIsInBhcnNlSW50IiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJtYXgiLCJjYW5kaWRhdGVJbmZvIiwiY2FuZGlkYXRlSW5kZXgiLCJjYW5kaWRhdGVWYWx1ZSIsImNhbmRpZGF0ZU5vZGUiLCJFcnJvciIsImdldENhbmRpZGF0ZVZhbHVlIiwiZ2V0TmV4dENhbmRpZGF0ZU5vZGUiLCJhcmdzIiwiZ2V0TmV4dENhbmRpZGF0ZVZhbHVlIiwiZ2V0TmV4dENhbmRpZGF0ZUluZm8iLCJmbGlwIiwiTm9kZSIsIm5vZGVOYW1lIiwiY3VzdG9tRWxlbWVudHMiLCJnZXQiLCJyZWplY3QiLCJkZWZpbmUiLCJ3aGVuRGVmaW5lZCJdLCJzb3VyY2VSb290IjoiIn0=