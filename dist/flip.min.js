(()=>{"use strict";function t(t,e,n){return t.dispatchEvent(new CustomEvent(e,n))}var e;!function(t){t.flipStart="flipstart",t.flipCardStart="flipcardstart",t.flipCardEnd="flipcardend",t.flipEnd="flipend"}(e||(e={}));const n=e;var r;!function(t){t.loop="loop",t.random="random"}(r||(r={}));const i=r,a=function(t={}){const{className:e,slot:n,style:r="",innerHTML:i="<slot></slot>"}=t,a=document.createElement("div");return a.attachShadow({mode:"open"}).innerHTML=`\n    <style>\n      \n  :host {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    pointer-events: none;\n    display: block;\n    z-index: 0;\n  }\n\n  slot {\n    display: block;\n  }\n\n      ${r}\n    </style>\n    ${i}\n  `,void 0!==e&&a.classList.add(e),void 0!==n&&a.setAttribute("slot",n),a};var s;!function(t){t.temp="temp"}(s||(s={}));const o=s;var l;!function(t){t.current="current",t.temp="temp"}(l||(l={}));const d=l;var c;!function(t){t.up="up",t.down="down",t.left="left",t.right="right"}(c||(c={}));const p=c,h=function(t,e){const n=/^@/.test(t)?"@-":"-",r=t.replace(/^@/,"").replace(/;?$/,";");return(Array.isArray(e)?e:[e]).map((t=>`${n}${t}-${r}`)).concat(t).join("\n")},u=`\n  :host {\n    --right-x-left: 50%;\n    --right-x-right: 100vw;\n    --left-x-left: -100vw;\n    --left-x-right: 50%;\n\n    ${h("clip-path: polygon(\n      var(--x-left) -100vh,\n      var(--x-right) -100vh,\n      var(--x-right) calc(100% + 100vh),\n      var(--x-left) calc(100% + 100vh)\n    );","webkit")}\n  }\n`,y=`\n  ${h(`@keyframes clip {\n    0% {\n      ${h("clip-path: polygon(\n        var(--start-x-left) -100vh,\n        var(--start-x-right) -100vh,\n        var(--start-x-right) calc(100% + 100vh),\n        var(--start-x-left) calc(100% + 100vh)\n      );","webkit")}\n    }\n    50%, 100% {\n      ${h("clip-path: polygon(\n        var(--end-x-left) -100vh,\n        var(--end-x-right) -100vh,\n        var(--end-x-right) calc(100% + 100vh),\n        var(--end-x-left) calc(100% + 100vh)\n      );","webkit")}\n    }\n  }`,"webkit")}\n\n  :host {\n    --hori-perspective: var(--3d-perspective, 5em);\n    --right-x-left: 50%;\n    --right-x-right: calc(100% + 100vw);\n    --left-x-left: -100vw;\n    --left-x-right: 50%;\n\n    ${h("perspective: var(--hori-perspective);","webkit")}\n    ${h("animation: clip var(--duration) forwards steps(1, end);","webkit")}\n  }\n`,f=`\n  ${h(`@keyframes flip {\n    0% {\n      ${h("transform: rotateY(0);","webkit")}\n    }\n    100% {\n      ${h("transform: rotateY(var(--end-deg));","webkit")}\n    }\n  }`,"webkit")}\n\n  :host {\n    --left-end-deg: -180deg;\n    --right-end-deg: 180deg;\n\n    ${h("transform-style: preserve-3d;","webkit")}\n    ${h("animation: flip var(--duration) forwards linear;","webkit")}\n  }\n`,m=`\n  :host {\n    ${h("backface-visibility: hidden;","webkit")}\n    ${h("transform: rotateY(180deg);","webkit")}\n  }\n`,v=`\n  :host {\n    ${h("backface-visibility: hidden;","webkit")}\n  }\n`,g=function(t){const{duration:e,direction:n,lastCard:r,nextCard:i,tempCard:s}=t,o=e/1e3,l=a({style:u}),d=a({style:y}),c=a({style:f}),h=a({style:m}),g=D.cloneCard(i);switch(n){default:case p.left:l.style.setProperty("--x-left","var(--left-x-left)"),l.style.setProperty("--x-right","var(--left-x-right)"),d.style.setProperty("--start-x-left","var(--right-x-left)"),d.style.setProperty("--start-x-right","var(--right-x-right)"),d.style.setProperty("--end-x-left","var(--left-x-left)"),d.style.setProperty("--end-x-right","var(--left-x-right)"),c.style.setProperty("--end-deg","var(--left-end-deg)");break;case p.right:l.style.setProperty("--x-left","var(--right-x-left)"),l.style.setProperty("--x-right","var(--right-x-right)"),d.style.setProperty("--start-x-left","var(--left-x-left)"),d.style.setProperty("--start-x-right","var(--left-x-right)"),d.style.setProperty("--end-x-left","var(--right-x-left)"),d.style.setProperty("--end-x-right","var(--right-x-right)"),c.style.setProperty("--end-deg","var(--right-end-deg)")}if(d.style.setProperty("--duration",`${o}s`),g.removeAttribute("slot"),h.append(g),c.append(h),d.append(c),r){const t=a({style:v}),e=D.cloneCard(r);e.removeAttribute("slot"),t.append(e),c.append(t),l.append(D.cloneCard(t))}return new Promise((t=>{s.addEventListener("animationend",(()=>{t(void 0)}),{once:!0}),s.append(l),s.append(d)}))},x=`\n  :host {\n    --upper-y-top: -100vh;\n    --upper-y-bottom: 50%;\n    --lower-y-top: 50%;\n    --lower-y-bottom: calc(100% + 100vh);\n\n    ${h("clip-path: polygon(\n      -100vw var(--y-top),\n      calc(100% + 100vw) var(--y-top),\n      calc(100% + 100vw) var(--y-bottom),\n      -100vw var(--y-bottom)\n    );","webkit")}\n  }\n`,b=`\n  ${h(`@keyframes clip {\n    0% {\n      ${h("clip-path: polygon(\n        -100vw var(--start-y-top),\n        calc(100% + 100vw) var(--start-y-top),\n        calc(100% + 100vw) var(--start-y-bottom),\n        -100vw var(--start-y-bottom)\n      );","webkit")}\n    }\n    50%, 100% {\n      ${h("clip-path: polygon(\n        -100vw var(--end-y-top),\n        calc(100% + 100vw) var(--end-y-top),\n        calc(100% + 100vw) var(--end-y-bottom),\n        -100vw var(--end-y-bottom)\n      );","webkit")}\n    }\n  }`,"webkit")}\n\n  :host {\n    --vert-perspective: var(--3d-perspective, 5em);\n    --upper-y-top: -100vh;\n    --upper-y-bottom: 50%;\n    --lower-y-top: 50%;\n    --lower-y-bottom: calc(100% + 100vh);\n\n    ${h("perspective: var(--vert-perspective);","webkit")}\n    ${h("animation: clip var(--duration) forwards steps(1, end);","webkit")}\n  }\n`,w=`\n  ${h(`@keyframes flip {\n    0% {\n      ${h("transform: rotateX(0);","webkit")}\n    }\n    100% {\n      ${h("transform: rotateX(var(--end-deg));","webkit")}\n    }\n  }`,"webkit")}\n\n  :host {\n    --down-end-deg: -180deg;\n    --up-end-deg: 180deg;\n\n    ${h("transform-style: preserve-3d;","webkit")}\n    ${h("animation: flip var(--duration) forwards linear;","webkit")}\n  }\n`,C=`\n  :host {\n    ${h("backface-visibility: hidden;","webkit")}\n    ${h("transform: rotateX(180deg);","webkit")}\n  }\n`,$=`\n  :host {\n    ${h("backface-visibility: hidden;","webkit")}\n  }\n`,k=function(t){const{duration:e,direction:n,lastCard:r,nextCard:i,tempCard:s}=t,o=e/1e3,l=a({style:x}),d=a({style:b}),c=a({style:w}),h=a({style:C}),u=q.cloneCard(i);switch(n){default:case p.down:l.style.setProperty("--y-top","var(--lower-y-top)"),l.style.setProperty("--y-bottom","var(--lower-y-bottom)"),d.style.setProperty("--start-y-top","var(--upper-y-top)"),d.style.setProperty("--start-y-bottom","var(--upper-y-bottom)"),d.style.setProperty("--end-y-top","var(--lower-y-top)"),d.style.setProperty("--end-y-bottom","var(--lower-y-bottom)"),c.style.setProperty("--end-deg","var(--down-end-deg)");break;case p.up:l.style.setProperty("--y-top","var(--upper-y-top)"),l.style.setProperty("--y-bottom","var(--upper-y-bottom)"),d.style.setProperty("--start-y-top","var(--lower-y-top)"),d.style.setProperty("--start-y-bottom","var(--lower-y-bottom)"),d.style.setProperty("--end-y-top","var(--upper-y-top)"),d.style.setProperty("--end-y-bottom","var(--upper-y-bottom)"),c.style.setProperty("--end-deg","var(--up-end-deg)")}if(d.style.setProperty("--duration",`${o}s`),u.removeAttribute("slot"),h.append(u),c.append(h),d.append(c),r){const t=a({style:$}),e=q.cloneCard(r);e.removeAttribute("slot"),t.append(e),c.append(t),l.append(q.cloneCard(t))}return new Promise((t=>{s.addEventListener("animationend",(()=>{t(void 0)}),{once:!0}),s.append(l),s.append(d)}))},I=async function(t){switch(t.direction){default:return k.call(this,{...t,direction:p.down});case p.up:case p.down:return k.call(this,t);case p.right:case p.left:return g.call(this,t)}},E=async function(e){const{nextIndex:r}=e,i=await a({className:o.temp,slot:d.temp}),s=this.querySelector(`.${o.temp}`);s&&s.remove(),this.index=r,this.append(i),t(this,n.flipCardStart,{bubbles:!0,cancelable:!0,composed:!0,detail:{...e,tempCard:i}})&&await I.call(this,{...e,tempCard:i}),t(this,n.flipCardEnd,{bubbles:!0,cancelable:!1,composed:!0,detail:{...e,tempCard:i}}),i.remove()},P=async function(e,r={}){const{card:a,index:s}=this.getCardInfo(e??this.getNextIndex({different:this.cards.length>1}));if(null===a){if(void 0===e)return;throw new ReferenceError("Target card doesn't exist")}const{index:o,card:l}=this,{direct:d=!1,duration:c=this.duration,direction:p=this.direction}=r;if(t(this,n.flipStart,{bubbles:!0,cancelable:!0,composed:!0,detail:{direct:d,duration:c,direction:p,lastIndex:o,lastCard:l,targetIndex:s,targetCard:a}})){if(d)await E.call(this,{direct:d,duration:c,direction:p,lastIndex:o,lastCard:l,nextIndex:s,nextCard:a});else{const{mode:t,cards:e,minFlips:n,maxFlips:r}=this,a=e.length,h=e=>{switch(t){default:case i.loop:return this.getNextIndex();case i.random:if(e<r){let t=this.getNextIndex();for(;a>2&&e<n&&t===s;)t=this.getNextIndex();return t}return s}},u=async(t,e,n=1)=>{const r=h(n),i=this.getCardByIndex(r);await E.call(this,{direct:d,duration:c,direction:p,lastIndex:t,lastCard:e,nextIndex:r,nextCard:i}),r!==s&&await u(r,i,n+1)};await u(o,l)}t(this,n.flipEnd,{bubbles:!0,cancelable:!1,composed:!0,detail:{direct:d,duration:c,direction:p,lastIndex:o,lastCard:l,targetIndex:s,targetCard:a}})}},A=function(t){if(t instanceof HTMLElement){const e=this.getIndexByCard(t);return{index:e,card:e>=0?t:null}}if(null===t)return{index:-1,card:null};const e=this.getCardByIndex(t);return{card:e,index:null===e?-1:t}},F=function(t={}){const{different:e=!0,mode:n=this.mode}=t,{index:r,cards:a}=this,{length:s}=a;switch(n){default:case i.loop:{const t=(r+1)%s;return e&&t===r?null:t}case i.random:switch(s){case 0:return null;case 1:return e?null:this.index;default:{let t=-1;for(;-1===t||e&&t===r;)t=Math.floor(s*Math.random());return t}}}};var T;!function(t){t.index="index",t.value="value",t.mode="mode",t.duration="duration",t.direction="direction",t.minFlips="min-flips",t.maxFlips="max-flips"}(T||(T={}));const N=T,{isNaN:S}=globalThis,B=document.createElement("template");B.innerHTML=`\n  <style>\n    :host {\n      --3d-perspective: 100vmax;\n\n      position: relative;\n      display: inline-block;\n    }\n\n    slot {\n      position: relative;\n      z-index: 0;\n    }\n\n    slot:not([name]) {\n      display: none;\n    }\n  </style>\n  <flip>\n    <slot></slot>\n    <slot name="${d.current}"></slot>\n    <slot name="${d.temp}"></slot>\n  </flip>\n`;class L extends HTMLElement{#mode=i.loop;#duration=400;#direction=p.down;#index=-1;#cards=Array.from(this.children);#minFlips=0;#maxFlips;constructor(){super();const t=this.attachShadow({mode:"open"});t.append(B.content.cloneNode(!0)),t.querySelector("slot:not([name])").addEventListener("slotchange",(()=>{this.#cards=Array.from(this.querySelectorAll(":scope > :not([slot=temp])"))})),L.observedAttributes.filter((t=>this.hasAttribute(t))).forEach((t=>{this.attributeChangedCallback(t)})),-1===this.index&&(this.index=0)}static get observedAttributes(){return[N.index,N.value,N.mode,N.duration,N.direction,N.minFlips,N.maxFlips]}attributeChangedCallback(t){switch(t){default:break;case N.index:{const t=this.getAttribute(N.index);null!==t&&t.length>0&&(this.index=Number(t));break}case N.value:{const t=this.getAttribute(N.value),e=this.cards.findIndex((e=>L.getCardValue(e)===t));this.index=e;break}case N.mode:this.hasAttribute(N.mode)&&(this.mode=this.getAttribute(N.mode));break;case N.duration:{const t=this.getAttribute(N.duration);null!==t&&t.length>0&&(this.duration=Number(t));break}case N.direction:this.hasAttribute(N.direction)&&(this.direction=this.getAttribute(N.direction));break;case N.minFlips:{const t=this.getAttribute(N.minFlips);null!==t&&t.length>0&&(this.minFlips=Number(t));break}case N.maxFlips:{const t=this.getAttribute(N.maxFlips);null!==t&&t.length>0&&(this.maxFlips=Number(t));break}}}static getCardValue(t){return t?.getAttribute?.(N.value)??null}get cards(){return[...this.#cards]}get mode(){return this.#mode}set mode(t){if(!(t in i))throw new TypeError(`Invalid mode: ${t}`);this.#mode=t}get duration(){return this.#duration}set duration(t){if(S(t))throw new TypeError(`Invalid duration: ${t}`);if(t<0)throw new RangeError(`Duration should be greater than 0: ${t}`);this.#duration=t}get direction(){return this.#direction}set direction(t){if(!(t in p))throw new TypeError(`Invalid direction: ${t}`);this.#direction=t}get minFlips(){return this.#minFlips}set minFlips(t){if(S(t))throw new TypeError(`Invalid min flips: ${t}`);if(parseInt(`${t}`,10)!==t)throw new TypeError(`Min flips should be an integer: ${t}`);if(this.#minFlips=t,this.maxFlips<t)throw new RangeError("Setting min flips that is greater than max flips might cause flipping error")}get maxFlips(){return this.#maxFlips??1/0}set maxFlips(t){if(S(t))throw new TypeError(`Invalid max flips: ${t}`);if(parseInt(`${t}`,10)!==t)throw new TypeError(`Max flips should be an integer: ${t}`);if(this.#maxFlips=t,this.minFlips>t)throw new RangeError("Setting max flips that is less than min flips might cause flipping error")}get index(){return this.#index}set index(t){if(S(t))throw new TypeError(`Invalid index: ${t}`);if(parseInt(`${t}`,10)!==t)throw new TypeError(`Index should be an integer: ${t}`);if(void 0===this.cards[t])throw new RangeError(`Card index doesn't exist: ${t}`);this.#index=t,this.querySelectorAll(`[slot="${d.current}"]`).forEach((t=>{t.removeAttribute("slot")})),this.cards[t].setAttribute("slot",d.current)}get value(){return this.getValueByIndex(this.index)}set value(t){const e=this.cards.findIndex((e=>L.getCardValue(e)===t));if(-1===e)throw new ReferenceError(`Value is not in cards: ${t}`);this.index=e}get card(){return this.getCardByIndex(this.index)}set card(t){this.index=null===t?-1:this.cards.indexOf(t)}getCardByIndex(t){return this.cards[t]??null}getCardInfo=A;getValueByIndex(t){return L.getCardValue(this.getCardByIndex(t))}getIndexByCard(t){return this.cards.indexOf(t)}getIndexByValue(t){return this.cards.findIndex((e=>L.getCardValue(e)===t))}getNextIndex=F;getNextCard(...t){const e=this.getNextIndex(...t);return null!==e?this.getCardByIndex(e):null}flip=P;flipToCard(t,e){return this.flip(t,e)}flipToIndex(t,e){return this.flip(this.getCardByIndex(t),e)}flipDirectly(...[t,e]){return this.flip(t,{...e,direct:!0})}flipToCardDirectly(t,e){return this.flipDirectly(t,e)}flipToIndexDirectly(t,e){return this.flipDirectly(this.getCardByIndex(t),e)}flipAnimation=I;static cloneCard(t){const e=t.cloneNode(!0);{const n=Array.from(e.querySelectorAll("canvas"));e instanceof HTMLCanvasElement&&n.push(e),n.length>0&&t.querySelectorAll("canvas").forEach(((t,e)=>{const r=t,i=n[e];i.width=r.width,i.height=r.height,i.getContext("2d")?.drawImage(r,0,0)}))}return e}}var M,V;M=L,V="flip-pack",customElements.get(V)?Promise.reject(new Error(`Already defined <${V}>`)):(customElements.define(V,M),customElements.whenDefined(V));const D=L,q=L})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTLEdBQzNCTCxFQUFLcUMsaUJBQWlCLFVBQVVLLFNBQVEsQ0FBQ1ksRUFBS2UsS0FDNUMsTUFBTUMsRUFBYWhCLEVBQ2JpQixFQUFZTCxFQUFnQkcsR0FFbENFLEVBQVVDLE1BQVFGLEVBQVdFLE1BQzdCRCxFQUFVRSxPQUFTSCxFQUFXRyxPQUM5QkYsRUFBVUcsV0FBVyxPQUFPQyxVQUFVTCxFQUFZLEVBQUcsTUFLM0QsT0FBT0wsR0M1ZFgsSUFDRVcsRUFDQUMsRUFEQUQsRUQrZGNyRyxFQzlkZHNHLEVES2UsWUNIWEMsZUFBZUMsSUFBSUYsR0FDZGhHLFFBQVFtRyxPQUNiLElBQUlDLE1BQU8sb0JBQW1CSixRQUlsQ0MsZUFBZUksT0FBT0wsRUFBVUQsR0FFekJFLGVBQWVLLFlBQVlOLElEc2RwQyxVRW5lQSxFRm1lQSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL3V0aWxzL2V2ZW50SGFuZGxlci50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdmFsdWVzL2V2ZW50cy50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdmFsdWVzL21vZGVzLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy91dGlscy9jcmVhdGVUZW1wQ2FyZC50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdmFsdWVzL2NsYXNzTmFtZXMudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL3ZhbHVlcy9zbG90cy50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdmFsdWVzL2RpcmVjdGlvbnMudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL3V0aWxzL3ByZWZpeENzcy50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvbWV0aG9kcy9mbGlwL2hvcml6b250YWwudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL21ldGhvZHMvZmxpcC92ZXJ0aWNhbC50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvbWV0aG9kcy9mbGlwL2ZsaXBBbmltYXRpb24udHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL21ldGhvZHMvZmxpcC9mbGlwT25lQ2FyZC50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvbWV0aG9kcy9mbGlwL2luZGV4LnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy9tZXRob2RzL2dldENhcmRJbmZvLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy9tZXRob2RzL2dldE5leHRJbmRleC50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdmFsdWVzL2F0dHJpYnV0ZXMudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL2ZsaXAudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL3V0aWxzL3JlZ2lzdGVyRWxlbWVudC50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsidHlwZSBFdmVudEhvbGRlciA9IEhUTUxFbGVtZW50IHwgRG9jdW1lbnQgfCBXaW5kb3c7XG50eXBlIEV2ZW50TGlzdGVuZXIgPSAoLi4uYXJnczogYW55W10pID0+IHZvaWQ7XG5cbmludGVyZmFjZSBFdmVudExpc3RlbmVyT3B0aW9ucyB7XG4gIGNhcHR1cmU/OiBib29sZWFuO1xuICBvbmNlPzogYm9vbGVhbjtcbiAgcGFzc2l2ZT86IGJvb2xlYW47XG59XG5cbi8qKlxuICogQWRkcyBldmVudCBvZiB0eXBlIHRvIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKFxuICByZWY6IEV2ZW50SG9sZGVyLFxuICB0eXBlOiBzdHJpbmcsXG4gIGxpc3RlbmVyOiBFdmVudExpc3RlbmVyLFxuICBvcHRpb25zPzogRXZlbnRMaXN0ZW5lck9wdGlvbnMsXG4pOiB2b2lkIHtcbiAgcmVmLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIEFkZHMgZXZlbnRzIG9mIHR5cGVzIHRvIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycyhcbiAgcmVmOiBFdmVudEhvbGRlcixcbiAgdHlwZXM6IHN0cmluZ1tdLFxuICBsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lcixcbiAgb3B0aW9ucz86IEV2ZW50TGlzdGVuZXJPcHRpb25zLFxuKTogdm9pZCB7XG4gIHR5cGVzLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICBhZGRFdmVudExpc3RlbmVyKHJlZiwgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGV2ZW50IG9mIHR5cGUgZnJvbSBlbGVtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgcmVmOiBFdmVudEhvbGRlcixcbiAgdHlwZTogc3RyaW5nLFxuICBsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lcixcbiAgb3B0aW9ucz86IEV2ZW50TGlzdGVuZXJPcHRpb25zLFxuKTogdm9pZCB7XG4gIHJlZi5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGV2ZW50cyBvZiB0eXBlcyBmcm9tIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVycyhcbiAgcmVmOiBFdmVudEhvbGRlcixcbiAgdHlwZXM6IHN0cmluZ1tdLFxuICBsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lcixcbiAgb3B0aW9ucz86IEV2ZW50TGlzdGVuZXJPcHRpb25zLFxuKTogdm9pZCB7XG4gIHR5cGVzLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICByZWYucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucyk7XG4gIH0pO1xufVxuXG5pbnRlcmZhY2UgQ3VzdG9tRXZlbnRJbml0PFQ+IHtcbiAgZGV0YWlsPzogVDtcbiAgYnViYmxlcz86IGJvb2xlYW47XG4gIGNhbmNlbGFibGU/OiBib29sZWFuO1xuICBjb21wb3NlZD86IGJvb2xlYW47XG59XG5cbi8qKlxuICogVHJpZ2dlcnMgZXZlbnQgYW5kIHJldHVybnMgZmFsc2UgaWYgdGhlIGV2ZW50IGlzIGNhbmNlbGxlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyaWdnZXJFdmVudDxUPihcbiAgcmVmOiBFdmVudEhvbGRlcixcbiAgdHlwZTogc3RyaW5nLFxuICBvcHRpb25zPzogQ3VzdG9tRXZlbnRJbml0PFQ+LFxuKTogYm9vbGVhbiB7XG4gIHJldHVybiByZWYuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQodHlwZSwgb3B0aW9ucykpO1xufVxuXG4vKipcbiAqIFRyaWdnZXJzIGV2ZW50cyBhbmQgcmV0dXJucyBmYWxzZSBpZiBhbnkgb2YgdGhlIGV2ZW50IGlzXG4gKiBjYW5jZWxsZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmlnZ2VyRXZlbnRzPFQ+KFxuICByZWY6IEV2ZW50SG9sZGVyLFxuICB0eXBlczogc3RyaW5nW10sXG4gIG9wdGlvbnM/OiBDdXN0b21FdmVudEluaXQ8VD4sXG4pOiBib29sZWFuIHtcbiAgcmV0dXJuIHR5cGVzLmV2ZXJ5KCh0eXBlKSA9PiB0cmlnZ2VyRXZlbnQocmVmLCB0eXBlLCBvcHRpb25zKSk7XG59XG4iLCJlbnVtIEV2ZW50cyB7XG4gIGZsaXBTdGFydCA9ICdmbGlwc3RhcnQnLFxuICBmbGlwQ2FyZFN0YXJ0ID0gJ2ZsaXBjYXJkc3RhcnQnLFxuICBmbGlwQ2FyZEVuZCA9ICdmbGlwY2FyZGVuZCcsXG4gIGZsaXBFbmQgPSAnZmxpcGVuZCcsXG59XG5cbmV4cG9ydCBkZWZhdWx0IEV2ZW50cztcbiIsImVudW0gTW9kZXMge1xuICBsb29wID0gJ2xvb3AnLFxuICByYW5kb20gPSAncmFuZG9tJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgTW9kZXM7XG4iLCJjb25zdCB0ZW1wQ2FyZENzcyA9IGBcbiAgOmhvc3Qge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgei1pbmRleDogMDtcbiAgfVxuXG4gIHNsb3Qge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICB9XG5gO1xuXG5pbnRlcmZhY2UgVGVtcENhcmRPcHRpb25zIHtcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICBzbG90Pzogc3RyaW5nO1xuICBzdHlsZT86IHN0cmluZztcbiAgaW5uZXJIVE1MPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSB0ZW1wIGNhcmQuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVRlbXBDYXJkKFxuICBvcHRpb25zOiBUZW1wQ2FyZE9wdGlvbnMgPSB7fSxcbik6IEhUTUxFbGVtZW50IHtcbiAgY29uc3Qge1xuICAgIGNsYXNzTmFtZSxcbiAgICBzbG90LFxuICAgIHN0eWxlID0gJycsXG4gICAgaW5uZXJIVE1MID0gJzxzbG90Pjwvc2xvdD4nLFxuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgdGVtcENhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29uc3Qgc2hhZG93Um9vdCA9IHRlbXBDYXJkLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcblxuICBzaGFkb3dSb290LmlubmVySFRNTCA9IGBcbiAgICA8c3R5bGU+XG4gICAgICAke3RlbXBDYXJkQ3NzfVxuICAgICAgJHtzdHlsZX1cbiAgICA8L3N0eWxlPlxuICAgICR7aW5uZXJIVE1MfVxuICBgO1xuXG4gIGlmIChjbGFzc05hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgIHRlbXBDYXJkLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgfVxuICBpZiAoc2xvdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGVtcENhcmQuc2V0QXR0cmlidXRlKCdzbG90Jywgc2xvdCk7XG4gIH1cblxuICByZXR1cm4gdGVtcENhcmQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVRlbXBDYXJkO1xuIiwiZW51bSBDbGFzc05hbWVzIHtcbiAgdGVtcCA9ICd0ZW1wJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2xhc3NOYW1lcztcbiIsImVudW0gU2xvdHMge1xuICBjdXJyZW50ID0gJ2N1cnJlbnQnLFxuICB0ZW1wID0gJ3RlbXAnLFxufVxuXG5leHBvcnQgZGVmYXVsdCBTbG90cztcbiIsImVudW0gRGlyZWN0aW9ucyB7XG4gIHVwID0gJ3VwJyxcbiAgZG93biA9ICdkb3duJyxcbiAgbGVmdCA9ICdsZWZ0JyxcbiAgcmlnaHQgPSAncmlnaHQnLFxufVxuXG5leHBvcnQgZGVmYXVsdCBEaXJlY3Rpb25zO1xuIiwidHlwZSBQcmVmaXggPSAnd2Via2l0JyB8ICdvJyB8ICdtcycgfCAnbW96JztcblxuLyoqXG4gKiBSZXR1cm5zIHByZWZpeGVkIENTUyB0ZXh0LlxuICovXG5mdW5jdGlvbiBwcmVmaXhDc3MoY3NzOiBzdHJpbmcsIHByZWZpeHM6IFByZWZpeCB8IFByZWZpeFtdKTogc3RyaW5nIHtcbiAgY29uc3QgaGVhZCA9IC9eQC8udGVzdChjc3MpID8gJ0AtJyA6ICctJztcbiAgY29uc3QgdGV4dCA9IGNzc1xuICAgIC5yZXBsYWNlKC9eQC8sICcnKVxuICAgIC5yZXBsYWNlKC87PyQvLCAnOycpO1xuXG4gIHJldHVybiAoQXJyYXkuaXNBcnJheShwcmVmaXhzKSA/IHByZWZpeHMgOiBbcHJlZml4c10pXG4gICAgLm1hcCgocHJlZml4KSA9PiBgJHtoZWFkfSR7cHJlZml4fS0ke3RleHR9YClcbiAgICAuY29uY2F0KGNzcylcbiAgICAuam9pbignXFxuJyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHByZWZpeENzcztcbiIsImltcG9ydCBGbGlwIGZyb20gJy4uLy4uL2ZsaXAnO1xuaW1wb3J0IGNyZWF0ZVRlbXBDYXJkIGZyb20gJy4uLy4uL3V0aWxzL2NyZWF0ZVRlbXBDYXJkJztcbmltcG9ydCBwcmVmaXhDc3MgZnJvbSAnLi4vLi4vdXRpbHMvcHJlZml4Q3NzJztcbmltcG9ydCBEaXJlY3Rpb25zIGZyb20gJy4uLy4uL3ZhbHVlcy9kaXJlY3Rpb25zJztcbmltcG9ydCB7IEZsaXBBbmltYXRpb25PcHRpb24gfSBmcm9tICcuL2ZsaXBBbmltYXRpb24nO1xuXG5jb25zdCBiYWNrZ3JvdW5kU3R5bGUgPSBgXG4gIDpob3N0IHtcbiAgICAtLXJpZ2h0LXgtbGVmdDogNTAlO1xuICAgIC0tcmlnaHQteC1yaWdodDogMTAwdnc7XG4gICAgLS1sZWZ0LXgtbGVmdDogLTEwMHZ3O1xuICAgIC0tbGVmdC14LXJpZ2h0OiA1MCU7XG5cbiAgICAke3ByZWZpeENzcyhgY2xpcC1wYXRoOiBwb2x5Z29uKFxuICAgICAgdmFyKC0teC1sZWZ0KSAtMTAwdmgsXG4gICAgICB2YXIoLS14LXJpZ2h0KSAtMTAwdmgsXG4gICAgICB2YXIoLS14LXJpZ2h0KSBjYWxjKDEwMCUgKyAxMDB2aCksXG4gICAgICB2YXIoLS14LWxlZnQpIGNhbGMoMTAwJSArIDEwMHZoKVxuICAgICk7YCwgJ3dlYmtpdCcpfVxuICB9XG5gO1xuY29uc3Qgd3JhcHBlclN0eWxlID0gYFxuICAke3ByZWZpeENzcyhgQGtleWZyYW1lcyBjbGlwIHtcbiAgICAwJSB7XG4gICAgICAke3ByZWZpeENzcyhgY2xpcC1wYXRoOiBwb2x5Z29uKFxuICAgICAgICB2YXIoLS1zdGFydC14LWxlZnQpIC0xMDB2aCxcbiAgICAgICAgdmFyKC0tc3RhcnQteC1yaWdodCkgLTEwMHZoLFxuICAgICAgICB2YXIoLS1zdGFydC14LXJpZ2h0KSBjYWxjKDEwMCUgKyAxMDB2aCksXG4gICAgICAgIHZhcigtLXN0YXJ0LXgtbGVmdCkgY2FsYygxMDAlICsgMTAwdmgpXG4gICAgICApO2AsICd3ZWJraXQnKX1cbiAgICB9XG4gICAgNTAlLCAxMDAlIHtcbiAgICAgICR7cHJlZml4Q3NzKGBjbGlwLXBhdGg6IHBvbHlnb24oXG4gICAgICAgIHZhcigtLWVuZC14LWxlZnQpIC0xMDB2aCxcbiAgICAgICAgdmFyKC0tZW5kLXgtcmlnaHQpIC0xMDB2aCxcbiAgICAgICAgdmFyKC0tZW5kLXgtcmlnaHQpIGNhbGMoMTAwJSArIDEwMHZoKSxcbiAgICAgICAgdmFyKC0tZW5kLXgtbGVmdCkgY2FsYygxMDAlICsgMTAwdmgpXG4gICAgICApO2AsICd3ZWJraXQnKX1cbiAgICB9XG4gIH1gLCAnd2Via2l0Jyl9XG5cbiAgOmhvc3Qge1xuICAgIC0taG9yaS1wZXJzcGVjdGl2ZTogdmFyKC0tM2QtcGVyc3BlY3RpdmUsIDVlbSk7XG4gICAgLS1yaWdodC14LWxlZnQ6IDUwJTtcbiAgICAtLXJpZ2h0LXgtcmlnaHQ6IGNhbGMoMTAwJSArIDEwMHZ3KTtcbiAgICAtLWxlZnQteC1sZWZ0OiAtMTAwdnc7XG4gICAgLS1sZWZ0LXgtcmlnaHQ6IDUwJTtcblxuICAgICR7cHJlZml4Q3NzKCdwZXJzcGVjdGl2ZTogdmFyKC0taG9yaS1wZXJzcGVjdGl2ZSk7JywgJ3dlYmtpdCcpfVxuICAgICR7cHJlZml4Q3NzKCdhbmltYXRpb246IGNsaXAgdmFyKC0tZHVyYXRpb24pIGZvcndhcmRzIHN0ZXBzKDEsIGVuZCk7JywgJ3dlYmtpdCcpfVxuICB9XG5gO1xuY29uc3QgY2FyZFN0eWxlID0gYFxuICAke3ByZWZpeENzcyhgQGtleWZyYW1lcyBmbGlwIHtcbiAgICAwJSB7XG4gICAgICAke3ByZWZpeENzcygndHJhbnNmb3JtOiByb3RhdGVZKDApOycsICd3ZWJraXQnKX1cbiAgICB9XG4gICAgMTAwJSB7XG4gICAgICAke3ByZWZpeENzcygndHJhbnNmb3JtOiByb3RhdGVZKHZhcigtLWVuZC1kZWcpKTsnLCAnd2Via2l0Jyl9XG4gICAgfVxuICB9YCwgJ3dlYmtpdCcpfVxuXG4gIDpob3N0IHtcbiAgICAtLWxlZnQtZW5kLWRlZzogLTE4MGRlZztcbiAgICAtLXJpZ2h0LWVuZC1kZWc6IDE4MGRlZztcblxuICAgICR7cHJlZml4Q3NzKCd0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkOycsICd3ZWJraXQnKX1cbiAgICAke3ByZWZpeENzcygnYW5pbWF0aW9uOiBmbGlwIHZhcigtLWR1cmF0aW9uKSBmb3J3YXJkcyBsaW5lYXI7JywgJ3dlYmtpdCcpfVxuICB9XG5gO1xuY29uc3QgbmV4dENhcmRTdHlsZSA9IGBcbiAgOmhvc3Qge1xuICAgICR7cHJlZml4Q3NzKCdiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47JywgJ3dlYmtpdCcpfVxuICAgICR7cHJlZml4Q3NzKCd0cmFuc2Zvcm06IHJvdGF0ZVkoMTgwZGVnKTsnLCAnd2Via2l0Jyl9XG4gIH1cbmA7XG5jb25zdCBsYXN0Q2FyZFN0eWxlID0gYFxuICA6aG9zdCB7XG4gICAgJHtwcmVmaXhDc3MoJ2JhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjsnLCAnd2Via2l0Jyl9XG4gIH1cbmA7XG5cbmZ1bmN0aW9uIGZsaXBwaW5nSG9yaXpvbnRhbGx5KFxuICB0aGlzOiBGbGlwLFxuICBvcHRpb25zOiBGbGlwQW5pbWF0aW9uT3B0aW9uLFxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHtcbiAgICBkdXJhdGlvbixcbiAgICBkaXJlY3Rpb24sXG4gICAgbGFzdENhcmQsXG4gICAgbmV4dENhcmQsXG4gICAgdGVtcENhcmQsXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBkdXJhdGlvblNlYyA9IGR1cmF0aW9uIC8gMTAwMDtcbiAgY29uc3QgZG9tQmFja2dyb3VuZCA9IGNyZWF0ZVRlbXBDYXJkKHsgc3R5bGU6IGJhY2tncm91bmRTdHlsZSB9KTtcbiAgY29uc3QgZG9tV3JhcHBlciA9IGNyZWF0ZVRlbXBDYXJkKHsgc3R5bGU6IHdyYXBwZXJTdHlsZSB9KTtcbiAgY29uc3QgZG9tQ2FyZCA9IGNyZWF0ZVRlbXBDYXJkKHsgc3R5bGU6IGNhcmRTdHlsZSB9KTtcbiAgY29uc3QgZG9tTmV4dCA9IGNyZWF0ZVRlbXBDYXJkKHsgc3R5bGU6IG5leHRDYXJkU3R5bGUgfSk7XG4gIGNvbnN0IGRvbU5leHRDYXJkID0gRmxpcC5jbG9uZUNhcmQobmV4dENhcmQpO1xuXG4gIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgZGVmYXVsdDpcbiAgICBjYXNlIERpcmVjdGlvbnMubGVmdDpcbiAgICAgIGRvbUJhY2tncm91bmQuc3R5bGUuc2V0UHJvcGVydHkoJy0teC1sZWZ0JywgJ3ZhcigtLWxlZnQteC1sZWZ0KScpO1xuICAgICAgZG9tQmFja2dyb3VuZC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS14LXJpZ2h0JywgJ3ZhcigtLWxlZnQteC1yaWdodCknKTtcbiAgICAgIGRvbVdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3RhcnQteC1sZWZ0JywgJ3ZhcigtLXJpZ2h0LXgtbGVmdCknKTtcbiAgICAgIGRvbVdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3RhcnQteC1yaWdodCcsICd2YXIoLS1yaWdodC14LXJpZ2h0KScpO1xuICAgICAgZG9tV3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lbmQteC1sZWZ0JywgJ3ZhcigtLWxlZnQteC1sZWZ0KScpO1xuICAgICAgZG9tV3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lbmQteC1yaWdodCcsICd2YXIoLS1sZWZ0LXgtcmlnaHQpJyk7XG4gICAgICBkb21DYXJkLnN0eWxlLnNldFByb3BlcnR5KCctLWVuZC1kZWcnLCAndmFyKC0tbGVmdC1lbmQtZGVnKScpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIERpcmVjdGlvbnMucmlnaHQ6XG4gICAgICBkb21CYWNrZ3JvdW5kLnN0eWxlLnNldFByb3BlcnR5KCctLXgtbGVmdCcsICd2YXIoLS1yaWdodC14LWxlZnQpJyk7XG4gICAgICBkb21CYWNrZ3JvdW5kLnN0eWxlLnNldFByb3BlcnR5KCctLXgtcmlnaHQnLCAndmFyKC0tcmlnaHQteC1yaWdodCknKTtcbiAgICAgIGRvbVdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3RhcnQteC1sZWZ0JywgJ3ZhcigtLWxlZnQteC1sZWZ0KScpO1xuICAgICAgZG9tV3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zdGFydC14LXJpZ2h0JywgJ3ZhcigtLWxlZnQteC1yaWdodCknKTtcbiAgICAgIGRvbVdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tZW5kLXgtbGVmdCcsICd2YXIoLS1yaWdodC14LWxlZnQpJyk7XG4gICAgICBkb21XcmFwcGVyLnN0eWxlLnNldFByb3BlcnR5KCctLWVuZC14LXJpZ2h0JywgJ3ZhcigtLXJpZ2h0LXgtcmlnaHQpJyk7XG4gICAgICBkb21DYXJkLnN0eWxlLnNldFByb3BlcnR5KCctLWVuZC1kZWcnLCAndmFyKC0tcmlnaHQtZW5kLWRlZyknKTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgZG9tV3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1kdXJhdGlvbicsIGAke2R1cmF0aW9uU2VjfXNgKTtcbiAgZG9tTmV4dENhcmQucmVtb3ZlQXR0cmlidXRlKCdzbG90Jyk7XG4gIGRvbU5leHQuYXBwZW5kKGRvbU5leHRDYXJkKTtcbiAgZG9tQ2FyZC5hcHBlbmQoZG9tTmV4dCk7XG4gIGRvbVdyYXBwZXIuYXBwZW5kKGRvbUNhcmQpO1xuXG4gIGlmIChsYXN0Q2FyZCkge1xuICAgIGNvbnN0IGRvbUxhc3QgPSBjcmVhdGVUZW1wQ2FyZCh7IHN0eWxlOiBsYXN0Q2FyZFN0eWxlIH0pO1xuICAgIGNvbnN0IGRvbUxhc3RDYXJkID0gRmxpcC5jbG9uZUNhcmQobGFzdENhcmQpO1xuXG4gICAgZG9tTGFzdENhcmQucmVtb3ZlQXR0cmlidXRlKCdzbG90Jyk7XG4gICAgZG9tTGFzdC5hcHBlbmQoZG9tTGFzdENhcmQpO1xuICAgIGRvbUNhcmQuYXBwZW5kKGRvbUxhc3QpO1xuICAgIGRvbUJhY2tncm91bmQuYXBwZW5kKEZsaXAuY2xvbmVDYXJkKGRvbUxhc3QpKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIHRlbXBDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnYW5pbWF0aW9uZW5kJyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgfSxcbiAgICAgIHsgb25jZTogdHJ1ZSB9LFxuICAgICk7XG4gICAgdGVtcENhcmQuYXBwZW5kKGRvbUJhY2tncm91bmQpO1xuICAgIHRlbXBDYXJkLmFwcGVuZChkb21XcmFwcGVyKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZsaXBwaW5nSG9yaXpvbnRhbGx5O1xuIiwiaW1wb3J0IEZsaXAgZnJvbSAnLi4vLi4nO1xuaW1wb3J0IHByZWZpeENzcyBmcm9tICcuLi8uLi91dGlscy9wcmVmaXhDc3MnO1xuaW1wb3J0IERpcmVjdGlvbnMgZnJvbSAnLi4vLi4vdmFsdWVzL2RpcmVjdGlvbnMnO1xuaW1wb3J0IGNyZWF0ZVRlbXBDYXJkIGZyb20gJy4uLy4uL3V0aWxzL2NyZWF0ZVRlbXBDYXJkJztcbmltcG9ydCB7IEZsaXBBbmltYXRpb25PcHRpb24gfSBmcm9tICcuL2ZsaXBBbmltYXRpb24nO1xuXG5jb25zdCBiYWNrZ3JvdW5kU3R5bGUgPSBgXG4gIDpob3N0IHtcbiAgICAtLXVwcGVyLXktdG9wOiAtMTAwdmg7XG4gICAgLS11cHBlci15LWJvdHRvbTogNTAlO1xuICAgIC0tbG93ZXIteS10b3A6IDUwJTtcbiAgICAtLWxvd2VyLXktYm90dG9tOiBjYWxjKDEwMCUgKyAxMDB2aCk7XG5cbiAgICAke3ByZWZpeENzcyhgY2xpcC1wYXRoOiBwb2x5Z29uKFxuICAgICAgLTEwMHZ3IHZhcigtLXktdG9wKSxcbiAgICAgIGNhbGMoMTAwJSArIDEwMHZ3KSB2YXIoLS15LXRvcCksXG4gICAgICBjYWxjKDEwMCUgKyAxMDB2dykgdmFyKC0teS1ib3R0b20pLFxuICAgICAgLTEwMHZ3IHZhcigtLXktYm90dG9tKVxuICAgICk7YCwgJ3dlYmtpdCcpfVxuICB9XG5gO1xuY29uc3Qgd3JhcHBlclN0eWxlID0gYFxuICAke3ByZWZpeENzcyhgQGtleWZyYW1lcyBjbGlwIHtcbiAgICAwJSB7XG4gICAgICAke3ByZWZpeENzcyhgY2xpcC1wYXRoOiBwb2x5Z29uKFxuICAgICAgICAtMTAwdncgdmFyKC0tc3RhcnQteS10b3ApLFxuICAgICAgICBjYWxjKDEwMCUgKyAxMDB2dykgdmFyKC0tc3RhcnQteS10b3ApLFxuICAgICAgICBjYWxjKDEwMCUgKyAxMDB2dykgdmFyKC0tc3RhcnQteS1ib3R0b20pLFxuICAgICAgICAtMTAwdncgdmFyKC0tc3RhcnQteS1ib3R0b20pXG4gICAgICApO2AsICd3ZWJraXQnKX1cbiAgICB9XG4gICAgNTAlLCAxMDAlIHtcbiAgICAgICR7cHJlZml4Q3NzKGBjbGlwLXBhdGg6IHBvbHlnb24oXG4gICAgICAgIC0xMDB2dyB2YXIoLS1lbmQteS10b3ApLFxuICAgICAgICBjYWxjKDEwMCUgKyAxMDB2dykgdmFyKC0tZW5kLXktdG9wKSxcbiAgICAgICAgY2FsYygxMDAlICsgMTAwdncpIHZhcigtLWVuZC15LWJvdHRvbSksXG4gICAgICAgIC0xMDB2dyB2YXIoLS1lbmQteS1ib3R0b20pXG4gICAgICApO2AsICd3ZWJraXQnKX1cbiAgICB9XG4gIH1gLCAnd2Via2l0Jyl9XG5cbiAgOmhvc3Qge1xuICAgIC0tdmVydC1wZXJzcGVjdGl2ZTogdmFyKC0tM2QtcGVyc3BlY3RpdmUsIDVlbSk7XG4gICAgLS11cHBlci15LXRvcDogLTEwMHZoO1xuICAgIC0tdXBwZXIteS1ib3R0b206IDUwJTtcbiAgICAtLWxvd2VyLXktdG9wOiA1MCU7XG4gICAgLS1sb3dlci15LWJvdHRvbTogY2FsYygxMDAlICsgMTAwdmgpO1xuXG4gICAgJHtwcmVmaXhDc3MoJ3BlcnNwZWN0aXZlOiB2YXIoLS12ZXJ0LXBlcnNwZWN0aXZlKTsnLCAnd2Via2l0Jyl9XG4gICAgJHtwcmVmaXhDc3MoJ2FuaW1hdGlvbjogY2xpcCB2YXIoLS1kdXJhdGlvbikgZm9yd2FyZHMgc3RlcHMoMSwgZW5kKTsnLCAnd2Via2l0Jyl9XG4gIH1cbmA7XG5jb25zdCBjYXJkU3R5bGUgPSBgXG4gICR7cHJlZml4Q3NzKGBAa2V5ZnJhbWVzIGZsaXAge1xuICAgIDAlIHtcbiAgICAgICR7cHJlZml4Q3NzKCd0cmFuc2Zvcm06IHJvdGF0ZVgoMCk7JywgJ3dlYmtpdCcpfVxuICAgIH1cbiAgICAxMDAlIHtcbiAgICAgICR7cHJlZml4Q3NzKCd0cmFuc2Zvcm06IHJvdGF0ZVgodmFyKC0tZW5kLWRlZykpOycsICd3ZWJraXQnKX1cbiAgICB9XG4gIH1gLCAnd2Via2l0Jyl9XG5cbiAgOmhvc3Qge1xuICAgIC0tZG93bi1lbmQtZGVnOiAtMTgwZGVnO1xuICAgIC0tdXAtZW5kLWRlZzogMTgwZGVnO1xuXG4gICAgJHtwcmVmaXhDc3MoJ3RyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7JywgJ3dlYmtpdCcpfVxuICAgICR7cHJlZml4Q3NzKCdhbmltYXRpb246IGZsaXAgdmFyKC0tZHVyYXRpb24pIGZvcndhcmRzIGxpbmVhcjsnLCAnd2Via2l0Jyl9XG4gIH1cbmA7XG5jb25zdCBuZXh0Q2FyZFN0eWxlID0gYFxuICA6aG9zdCB7XG4gICAgJHtwcmVmaXhDc3MoJ2JhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjsnLCAnd2Via2l0Jyl9XG4gICAgJHtwcmVmaXhDc3MoJ3RyYW5zZm9ybTogcm90YXRlWCgxODBkZWcpOycsICd3ZWJraXQnKX1cbiAgfVxuYDtcbmNvbnN0IGxhc3RDYXJkU3R5bGUgPSBgXG4gIDpob3N0IHtcbiAgICAke3ByZWZpeENzcygnYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuOycsICd3ZWJraXQnKX1cbiAgfVxuYDtcblxuZnVuY3Rpb24gZmxpcHBpbmdWZXJ0aWNhbGx5KFxuICB0aGlzOiBGbGlwLFxuICBvcHRpb25zOiBGbGlwQW5pbWF0aW9uT3B0aW9uLFxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHtcbiAgICBkdXJhdGlvbixcbiAgICBkaXJlY3Rpb24sXG4gICAgbGFzdENhcmQsXG4gICAgbmV4dENhcmQsXG4gICAgdGVtcENhcmQsXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBkdXJhdGlvblNlYyA9IGR1cmF0aW9uIC8gMTAwMDtcbiAgY29uc3QgZG9tQmFja2dyb3VuZCA9IGNyZWF0ZVRlbXBDYXJkKHsgc3R5bGU6IGJhY2tncm91bmRTdHlsZSB9KTtcbiAgY29uc3QgZG9tV3JhcHBlciA9IGNyZWF0ZVRlbXBDYXJkKHsgc3R5bGU6IHdyYXBwZXJTdHlsZSB9KTtcbiAgY29uc3QgZG9tQ2FyZCA9IGNyZWF0ZVRlbXBDYXJkKHsgc3R5bGU6IGNhcmRTdHlsZSB9KTtcbiAgY29uc3QgZG9tTmV4dCA9IGNyZWF0ZVRlbXBDYXJkKHsgc3R5bGU6IG5leHRDYXJkU3R5bGUgfSk7XG4gIGNvbnN0IGRvbU5leHRDYXJkID0gRmxpcC5jbG9uZUNhcmQobmV4dENhcmQpO1xuXG4gIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgZGVmYXVsdDpcbiAgICBjYXNlIERpcmVjdGlvbnMuZG93bjpcbiAgICAgIGRvbUJhY2tncm91bmQuc3R5bGUuc2V0UHJvcGVydHkoJy0teS10b3AnLCAndmFyKC0tbG93ZXIteS10b3ApJyk7XG4gICAgICBkb21CYWNrZ3JvdW5kLnN0eWxlLnNldFByb3BlcnR5KCctLXktYm90dG9tJywgJ3ZhcigtLWxvd2VyLXktYm90dG9tKScpO1xuICAgICAgZG9tV3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zdGFydC15LXRvcCcsICd2YXIoLS11cHBlci15LXRvcCknKTtcbiAgICAgIGRvbVdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3RhcnQteS1ib3R0b20nLCAndmFyKC0tdXBwZXIteS1ib3R0b20pJyk7XG4gICAgICBkb21XcmFwcGVyLnN0eWxlLnNldFByb3BlcnR5KCctLWVuZC15LXRvcCcsICd2YXIoLS1sb3dlci15LXRvcCknKTtcbiAgICAgIGRvbVdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tZW5kLXktYm90dG9tJywgJ3ZhcigtLWxvd2VyLXktYm90dG9tKScpO1xuICAgICAgZG9tQ2FyZC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lbmQtZGVnJywgJ3ZhcigtLWRvd24tZW5kLWRlZyknKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBEaXJlY3Rpb25zLnVwOlxuICAgICAgZG9tQmFja2dyb3VuZC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS15LXRvcCcsICd2YXIoLS11cHBlci15LXRvcCknKTtcbiAgICAgIGRvbUJhY2tncm91bmQuc3R5bGUuc2V0UHJvcGVydHkoJy0teS1ib3R0b20nLCAndmFyKC0tdXBwZXIteS1ib3R0b20pJyk7XG4gICAgICBkb21XcmFwcGVyLnN0eWxlLnNldFByb3BlcnR5KCctLXN0YXJ0LXktdG9wJywgJ3ZhcigtLWxvd2VyLXktdG9wKScpO1xuICAgICAgZG9tV3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zdGFydC15LWJvdHRvbScsICd2YXIoLS1sb3dlci15LWJvdHRvbSknKTtcbiAgICAgIGRvbVdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tZW5kLXktdG9wJywgJ3ZhcigtLXVwcGVyLXktdG9wKScpO1xuICAgICAgZG9tV3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lbmQteS1ib3R0b20nLCAndmFyKC0tdXBwZXIteS1ib3R0b20pJyk7XG4gICAgICBkb21DYXJkLnN0eWxlLnNldFByb3BlcnR5KCctLWVuZC1kZWcnLCAndmFyKC0tdXAtZW5kLWRlZyknKTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgZG9tV3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1kdXJhdGlvbicsIGAke2R1cmF0aW9uU2VjfXNgKTtcbiAgZG9tTmV4dENhcmQucmVtb3ZlQXR0cmlidXRlKCdzbG90Jyk7XG4gIGRvbU5leHQuYXBwZW5kKGRvbU5leHRDYXJkKTtcbiAgZG9tQ2FyZC5hcHBlbmQoZG9tTmV4dCk7XG4gIGRvbVdyYXBwZXIuYXBwZW5kKGRvbUNhcmQpO1xuXG4gIGlmIChsYXN0Q2FyZCkge1xuICAgIGNvbnN0IGRvbUxhc3QgPSBjcmVhdGVUZW1wQ2FyZCh7IHN0eWxlOiBsYXN0Q2FyZFN0eWxlIH0pO1xuICAgIGNvbnN0IGRvbUxhc3RDYXJkID0gRmxpcC5jbG9uZUNhcmQobGFzdENhcmQpO1xuXG4gICAgZG9tTGFzdENhcmQucmVtb3ZlQXR0cmlidXRlKCdzbG90Jyk7XG4gICAgZG9tTGFzdC5hcHBlbmQoZG9tTGFzdENhcmQpO1xuICAgIGRvbUNhcmQuYXBwZW5kKGRvbUxhc3QpO1xuICAgIGRvbUJhY2tncm91bmQuYXBwZW5kKEZsaXAuY2xvbmVDYXJkKGRvbUxhc3QpKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIHRlbXBDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnYW5pbWF0aW9uZW5kJyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgfSxcbiAgICAgIHsgb25jZTogdHJ1ZSB9LFxuICAgICk7XG4gICAgdGVtcENhcmQuYXBwZW5kKGRvbUJhY2tncm91bmQpO1xuICAgIHRlbXBDYXJkLmFwcGVuZChkb21XcmFwcGVyKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZsaXBwaW5nVmVydGljYWxseTtcbiIsImltcG9ydCBGbGlwIGZyb20gJy4uLy4uL2ZsaXAnO1xuaW1wb3J0IERpcmVjdGlvbnMgZnJvbSAnLi4vLi4vdmFsdWVzL2RpcmVjdGlvbnMnO1xuaW1wb3J0IHsgRmxpcE9uZUNhcmRPcHRpb25zIH0gZnJvbSAnLi9mbGlwT25lQ2FyZCc7XG5pbXBvcnQgZmxpcHBpbmdIb3Jpem9udGFsbHkgZnJvbSAnLi9ob3Jpem9udGFsJztcbmltcG9ydCBmbGlwcGluZ1ZlcnRpY2FsbHkgZnJvbSAnLi92ZXJ0aWNhbCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxpcEFuaW1hdGlvbk9wdGlvbiBleHRlbmRzIEZsaXBPbmVDYXJkT3B0aW9ucyB7XG4gIHRlbXBDYXJkOiBIVE1MRWxlbWVudDtcbn1cblxuLyoqXG4gKiBEb2VzIGZsaXBwaW5nIGFuaW1hdGlvbiBmcm9tIGxhc3QgY2FyZCB0byBuZXh0IGNhcmQuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGZsaXBBbmltYXRpb24oXG4gIHRoaXM6IEZsaXAsXG4gIG9wdGlvbnM6IEZsaXBBbmltYXRpb25PcHRpb24sXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgc3dpdGNoIChvcHRpb25zLmRpcmVjdGlvbikge1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmxpcHBpbmdWZXJ0aWNhbGx5LmNhbGwodGhpcywge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkaXJlY3Rpb246IERpcmVjdGlvbnMuZG93bixcbiAgICAgIH0pO1xuXG4gICAgY2FzZSBEaXJlY3Rpb25zLnVwOlxuICAgIGNhc2UgRGlyZWN0aW9ucy5kb3duOlxuICAgICAgcmV0dXJuIGZsaXBwaW5nVmVydGljYWxseS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuXG4gICAgY2FzZSBEaXJlY3Rpb25zLnJpZ2h0OlxuICAgIGNhc2UgRGlyZWN0aW9ucy5sZWZ0OlxuICAgICAgcmV0dXJuIGZsaXBwaW5nSG9yaXpvbnRhbGx5LmNhbGwodGhpcywgb3B0aW9ucyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZmxpcEFuaW1hdGlvbjtcbiIsImltcG9ydCB7IEZsaXBPcHRpb25zIH0gZnJvbSAnLic7XG5pbXBvcnQgRmxpcCBmcm9tICcuLi8uLic7XG5pbXBvcnQgY3JlYXRlVGVtcENhcmQgZnJvbSAnLi4vLi4vdXRpbHMvY3JlYXRlVGVtcENhcmQnO1xuaW1wb3J0IHsgdHJpZ2dlckV2ZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnRIYW5kbGVyJztcbmltcG9ydCBDbGFzc05hbWVzIGZyb20gJy4uLy4uL3ZhbHVlcy9jbGFzc05hbWVzJztcbmltcG9ydCBFdmVudHMgZnJvbSAnLi4vLi4vdmFsdWVzL2V2ZW50cyc7XG5pbXBvcnQgU2xvdHMgZnJvbSAnLi4vLi4vdmFsdWVzL3Nsb3RzJztcbmltcG9ydCBmbGlwQW5pbWF0aW9uLCB7IEZsaXBBbmltYXRpb25PcHRpb24gfSBmcm9tICcuL2ZsaXBBbmltYXRpb24nO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZsaXBPbmVDYXJkT3B0aW9ucyBleHRlbmRzIFJlcXVpcmVkPEZsaXBPcHRpb25zPiB7XG4gIGxhc3RJbmRleDogbnVtYmVyO1xuICBsYXN0Q2FyZDogSFRNTEVsZW1lbnQgfCBudWxsO1xuICBuZXh0SW5kZXg6IG51bWJlcjtcbiAgbmV4dENhcmQ6IEhUTUxFbGVtZW50O1xufVxuXG5hc3luYyBmdW5jdGlvbiBmbGlwT25lQ2FyZChcbiAgdGhpczogRmxpcCxcbiAgb3B0aW9uczogRmxpcE9uZUNhcmRPcHRpb25zLFxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHsgbmV4dEluZGV4IH0gPSBvcHRpb25zO1xuICBjb25zdCB0ZW1wQ2FyZCA9IGF3YWl0IGNyZWF0ZVRlbXBDYXJkKHtcbiAgICBjbGFzc05hbWU6IENsYXNzTmFtZXMudGVtcCxcbiAgICBzbG90OiBTbG90cy50ZW1wLFxuICB9KTtcbiAgY29uc3QgbGFzdFRlbXBDYXJkID0gdGhpcy5xdWVyeVNlbGVjdG9yKGAuJHtDbGFzc05hbWVzLnRlbXB9YCk7XG5cbiAgaWYgKGxhc3RUZW1wQ2FyZCkge1xuICAgIGxhc3RUZW1wQ2FyZC5yZW1vdmUoKTtcbiAgfVxuXG4gIHRoaXMuaW5kZXggPSBuZXh0SW5kZXg7XG4gIHRoaXMuYXBwZW5kKHRlbXBDYXJkKTtcblxuICBjb25zdCBjYXJkU3RhcnRFdmVudFBhc3NlZCA9IHRyaWdnZXJFdmVudDxGbGlwQW5pbWF0aW9uT3B0aW9uPihcbiAgICB0aGlzLFxuICAgIEV2ZW50cy5mbGlwQ2FyZFN0YXJ0LFxuICAgIHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgY29tcG9zZWQ6IHRydWUsXG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgdGVtcENhcmQsXG4gICAgICB9LFxuICAgIH0sXG4gICk7XG5cbiAgaWYgKGNhcmRTdGFydEV2ZW50UGFzc2VkKSB7XG4gICAgYXdhaXQgZmxpcEFuaW1hdGlvbi5jYWxsKHRoaXMsIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICB0ZW1wQ2FyZCxcbiAgICB9KTtcbiAgfVxuXG4gIHRyaWdnZXJFdmVudDxGbGlwQW5pbWF0aW9uT3B0aW9uPihcbiAgICB0aGlzLFxuICAgIEV2ZW50cy5mbGlwQ2FyZEVuZCxcbiAgICB7XG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogZmFsc2UsXG4gICAgICBjb21wb3NlZDogdHJ1ZSxcbiAgICAgIGRldGFpbDoge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICB0ZW1wQ2FyZCxcbiAgICAgIH0sXG4gICAgfSxcbiAgKTtcbiAgdGVtcENhcmQucmVtb3ZlKCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZsaXBPbmVDYXJkO1xuIiwiaW1wb3J0IEZsaXAgZnJvbSAnLi4vLi4vZmxpcCc7XG5pbXBvcnQgeyB0cmlnZ2VyRXZlbnQgfSBmcm9tICcuLi8uLi91dGlscy9ldmVudEhhbmRsZXInO1xuaW1wb3J0IERpcmVjdGlvbnMgZnJvbSAnLi4vLi4vdmFsdWVzL2RpcmVjdGlvbnMnO1xuaW1wb3J0IEV2ZW50cyBmcm9tICcuLi8uLi92YWx1ZXMvZXZlbnRzJztcbmltcG9ydCBNb2RlcyBmcm9tICcuLi8uLi92YWx1ZXMvbW9kZXMnO1xuaW1wb3J0IGZsaXBPbmVDYXJkIGZyb20gJy4vZmxpcE9uZUNhcmQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZsaXBPcHRpb25zIHtcbiAgZGlyZWN0PzogYm9vbGVhbjtcbiAgZGlyZWN0aW9uPzogRGlyZWN0aW9ucztcbiAgZHVyYXRpb24/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxpcERldGFpbCBleHRlbmRzIFJlcXVpcmVkPEZsaXBPcHRpb25zPiB7XG4gIGxhc3RJbmRleDogbnVtYmVyO1xuICBsYXN0Q2FyZDogSFRNTEVsZW1lbnQgfCBudWxsO1xuICB0YXJnZXRJbmRleDogbnVtYmVyO1xuICB0YXJnZXRDYXJkOiBIVE1MRWxlbWVudDtcbn1cblxuLyoqXG4gKiBGbGlwcyB0byBzcGVjaWZpYyBjYXJkL2luZGV4LlxuICovXG5hc3luYyBmdW5jdGlvbiBmbGlwKFxuICB0aGlzOiBGbGlwLFxuICBuZXh0OiBudW1iZXIgfCBIVE1MRWxlbWVudCB8IG51bGwsXG4gIG9wdGlvbnM6IEZsaXBPcHRpb25zID0ge30sXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qge1xuICAgIGNhcmQ6IG5leHRDYXJkLFxuICAgIGluZGV4OiBuZXh0SW5kZXgsXG4gIH0gPSB0aGlzLmdldENhcmRJbmZvKFxuICAgIG5leHRcbiAgICA/PyB0aGlzLmdldE5leHRJbmRleCh7XG4gICAgICBkaWZmZXJlbnQ6IHRoaXMuY2FyZHMubGVuZ3RoID4gMSxcbiAgICB9KSxcbiAgKTtcblxuICBpZiAobmV4dENhcmQgPT09IG51bGwpIHtcbiAgICBpZiAobmV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCdUYXJnZXQgY2FyZCBkb2VzblxcJ3QgZXhpc3QnKTtcbiAgfVxuXG4gIGNvbnN0IHtcbiAgICBpbmRleDogbGFzdEluZGV4LFxuICAgIGNhcmQ6IGxhc3RDYXJkLFxuICB9ID0gdGhpcztcbiAgY29uc3Qge1xuICAgIGRpcmVjdCA9IGZhbHNlLFxuICAgIGR1cmF0aW9uID0gdGhpcy5kdXJhdGlvbixcbiAgICBkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbixcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHN0YXJ0RXZlbnRQYXNzZWQgPSB0cmlnZ2VyRXZlbnQ8RmxpcERldGFpbD4oXG4gICAgdGhpcyxcbiAgICBFdmVudHMuZmxpcFN0YXJ0LFxuICAgIHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgY29tcG9zZWQ6IHRydWUsXG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgZGlyZWN0LFxuICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgZGlyZWN0aW9uLFxuICAgICAgICBsYXN0SW5kZXgsXG4gICAgICAgIGxhc3RDYXJkLFxuICAgICAgICB0YXJnZXRJbmRleDogbmV4dEluZGV4LFxuICAgICAgICB0YXJnZXRDYXJkOiBuZXh0Q2FyZCxcbiAgICAgIH0sXG4gICAgfSxcbiAgKTtcblxuICBpZiAoIXN0YXJ0RXZlbnRQYXNzZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoZGlyZWN0KSB7XG4gICAgYXdhaXQgZmxpcE9uZUNhcmQuY2FsbCh0aGlzLCB7XG4gICAgICBkaXJlY3QsXG4gICAgICBkdXJhdGlvbixcbiAgICAgIGRpcmVjdGlvbixcbiAgICAgIGxhc3RJbmRleCxcbiAgICAgIGxhc3RDYXJkLFxuICAgICAgbmV4dEluZGV4LFxuICAgICAgbmV4dENhcmQsXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qge1xuICAgICAgbW9kZSxcbiAgICAgIGNhcmRzLFxuICAgICAgbWluRmxpcHMsXG4gICAgICBtYXhGbGlwcyxcbiAgICB9ID0gdGhpcztcbiAgICBjb25zdCBjYXJkc0xlbmd0aCA9IGNhcmRzLmxlbmd0aDtcbiAgICBjb25zdCBnZXROZXh0SW5kZXggPSAodGltZXM6IG51bWJlcikgPT4ge1xuICAgICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNhc2UgTW9kZXMubG9vcDpcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXROZXh0SW5kZXgoKSBhcyBudW1iZXI7XG5cbiAgICAgICAgY2FzZSBNb2Rlcy5yYW5kb206IHtcbiAgICAgICAgICBpZiAodGltZXMgPCBtYXhGbGlwcykge1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5nZXROZXh0SW5kZXgoKSBhcyBudW1iZXI7XG5cbiAgICAgICAgICAgIHdoaWxlIChjYXJkc0xlbmd0aCA+IDJcbiAgICAgICAgICAgICAgJiYgKHRpbWVzIDwgbWluRmxpcHMgJiYgaW5kZXggPT09IG5leHRJbmRleClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuZ2V0TmV4dEluZGV4KCkgYXMgbnVtYmVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG5leHRJbmRleDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgZmxpcE5leHQgPSBhc3luYyAoXG4gICAgICBwcmV2SW5kZXg6IG51bWJlcixcbiAgICAgIHByZXZDYXJkOiBIVE1MRWxlbWVudCB8IG51bGwsXG4gICAgICB0aW1lcyA9IDEsXG4gICAgKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgICBjb25zdCB0YXJnZXRJbmRleCA9IGdldE5leHRJbmRleCh0aW1lcyk7XG4gICAgICBjb25zdCB0YXJnZXRDYXJkID0gdGhpcy5nZXRDYXJkQnlJbmRleCh0YXJnZXRJbmRleCkgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgIGF3YWl0IGZsaXBPbmVDYXJkLmNhbGwodGhpcywge1xuICAgICAgICBkaXJlY3QsXG4gICAgICAgIGR1cmF0aW9uLFxuICAgICAgICBkaXJlY3Rpb24sXG4gICAgICAgIGxhc3RJbmRleDogcHJldkluZGV4LFxuICAgICAgICBsYXN0Q2FyZDogcHJldkNhcmQsXG4gICAgICAgIG5leHRJbmRleDogdGFyZ2V0SW5kZXgsXG4gICAgICAgIG5leHRDYXJkOiB0YXJnZXRDYXJkLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICh0YXJnZXRJbmRleCAhPT0gbmV4dEluZGV4KSB7XG4gICAgICAgIGF3YWl0IGZsaXBOZXh0KHRhcmdldEluZGV4LCB0YXJnZXRDYXJkLCB0aW1lcyArIDEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBhd2FpdCBmbGlwTmV4dChsYXN0SW5kZXgsIGxhc3RDYXJkKTtcbiAgfVxuXG4gIHRyaWdnZXJFdmVudDxGbGlwRGV0YWlsPihcbiAgICB0aGlzLFxuICAgIEV2ZW50cy5mbGlwRW5kLFxuICAgIHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiBmYWxzZSxcbiAgICAgIGNvbXBvc2VkOiB0cnVlLFxuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIGRpcmVjdCxcbiAgICAgICAgZHVyYXRpb24sXG4gICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgbGFzdEluZGV4LFxuICAgICAgICBsYXN0Q2FyZCxcbiAgICAgICAgdGFyZ2V0SW5kZXg6IG5leHRJbmRleCxcbiAgICAgICAgdGFyZ2V0Q2FyZDogbmV4dENhcmQsXG4gICAgICB9LFxuICAgIH0sXG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZsaXA7XG4iLCJpbXBvcnQgRmxpcCBmcm9tICcuLi9mbGlwJztcblxuaW50ZXJmYWNlIENhcmRJbmZvIHtcbiAgaW5kZXg6IG51bWJlcjtcbiAgY2FyZDogSFRNTEVsZW1lbnQgfCBudWxsO1xufVxuXG4vKipcbiAqIFJldHVybnMgY2FyZCBpbmZvIHdpdGggaW5kZXggYW5kIGNhcmQgZWxlbWVudC5cbiAqL1xuZnVuY3Rpb24gZ2V0Q2FyZEluZm8oXG4gIHRoaXM6IEZsaXAsXG4gIHNvdXJjZTogbnVtYmVyIHwgSFRNTEVsZW1lbnQgfCBudWxsLFxuKTogQ2FyZEluZm8ge1xuICBpZiAoc291cmNlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZ2V0SW5kZXhCeUNhcmQoc291cmNlKTtcblxuICAgIHJldHVybiB7XG4gICAgICBpbmRleCxcbiAgICAgIGNhcmQ6IGluZGV4ID49IDAgPyBzb3VyY2UgOiBudWxsLFxuICAgIH07XG4gIH1cbiAgaWYgKHNvdXJjZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiB7XG4gICAgICBpbmRleDogLTEsXG4gICAgICBjYXJkOiBudWxsLFxuICAgIH07XG4gIH1cblxuICBjb25zdCBjYXJkID0gdGhpcy5nZXRDYXJkQnlJbmRleChzb3VyY2UpO1xuXG4gIHJldHVybiB7XG4gICAgY2FyZCxcbiAgICBpbmRleDogY2FyZCA9PT0gbnVsbCA/IC0xIDogc291cmNlLFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBnZXRDYXJkSW5mbztcbiIsImltcG9ydCBGbGlwIGZyb20gJy4uL2ZsaXAnO1xuaW1wb3J0IE1vZGVzIGZyb20gJy4uL3ZhbHVlcy9tb2Rlcyc7XG5cbmludGVyZmFjZSBHZXROZXh0Q2FyZE9wdGlvbnMge1xuICBkaWZmZXJlbnQ/OiBib29sZWFuO1xuICBtb2RlPzogTW9kZXM7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbmV4dCBjYXJkIGluZGV4LlxuICovXG5mdW5jdGlvbiBnZXROZXh0SW5kZXgoXG4gIHRoaXM6IEZsaXAsXG4gIG9wdGlvbnM6IEdldE5leHRDYXJkT3B0aW9ucyA9IHt9LFxuKTogbnVtYmVyIHwgbnVsbCB7XG4gIGNvbnN0IHtcbiAgICBkaWZmZXJlbnQgPSB0cnVlLFxuICAgIG1vZGUgPSB0aGlzLm1vZGUsXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCB7IGluZGV4LCBjYXJkcyB9ID0gdGhpcztcbiAgY29uc3QgeyBsZW5ndGggfSA9IGNhcmRzO1xuXG4gIHN3aXRjaCAobW9kZSkge1xuICAgIGRlZmF1bHQ6XG4gICAgY2FzZSBNb2Rlcy5sb29wOiB7XG4gICAgICBjb25zdCBuZXh0SW5kZXggPSAoaW5kZXggKyAxKSAlIGxlbmd0aDtcblxuICAgICAgcmV0dXJuIChkaWZmZXJlbnQgJiYgbmV4dEluZGV4ID09PSBpbmRleFxuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBuZXh0SW5kZXhcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY2FzZSBNb2Rlcy5yYW5kb206XG4gICAgICBzd2l0Y2ggKGxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHJldHVybiBkaWZmZXJlbnQgPyBudWxsIDogdGhpcy5pbmRleDtcblxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgbGV0IG5leHRJbmRleCA9IC0xO1xuXG4gICAgICAgICAgd2hpbGUgKG5leHRJbmRleCA9PT0gLTEgfHwgKGRpZmZlcmVudCAmJiBuZXh0SW5kZXggPT09IGluZGV4KSkge1xuICAgICAgICAgICAgbmV4dEluZGV4ID0gTWF0aC5mbG9vcihsZW5ndGggKiBNYXRoLnJhbmRvbSgpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gbmV4dEluZGV4O1xuICAgICAgICB9XG4gICAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2V0TmV4dEluZGV4O1xuIiwiZW51bSBBdHRyaWJ1dGVzIHtcbiAgaW5kZXggPSAnaW5kZXgnLFxuICB2YWx1ZSA9ICd2YWx1ZScsXG4gIG1vZGUgPSAnbW9kZScsXG4gIGR1cmF0aW9uID0gJ2R1cmF0aW9uJyxcbiAgZGlyZWN0aW9uID0gJ2RpcmVjdGlvbicsXG4gIG1pbkZsaXBzID0gJ21pbi1mbGlwcycsXG4gIG1heEZsaXBzID0gJ21heC1mbGlwcycsXG59XG5cbmV4cG9ydCBkZWZhdWx0IEF0dHJpYnV0ZXM7XG4iLCJpbXBvcnQgZmxpcCwgeyBGbGlwT3B0aW9ucyB9IGZyb20gJy4vbWV0aG9kcy9mbGlwJztcbmltcG9ydCBmbGlwQW5pbWF0aW9uIGZyb20gJy4vbWV0aG9kcy9mbGlwL2ZsaXBBbmltYXRpb24nO1xuaW1wb3J0IGdldENhcmRJbmZvIGZyb20gJy4vbWV0aG9kcy9nZXRDYXJkSW5mbyc7XG5pbXBvcnQgZ2V0TmV4dEluZGV4IGZyb20gJy4vbWV0aG9kcy9nZXROZXh0SW5kZXgnO1xuaW1wb3J0IHJlZ2lzdGVyRWxlbWVudCBmcm9tICcuL3V0aWxzL3JlZ2lzdGVyRWxlbWVudCc7XG5pbXBvcnQgQXR0cmlidXRlcyBmcm9tICcuL3ZhbHVlcy9hdHRyaWJ1dGVzJztcbmltcG9ydCBEaXJlY3Rpb25zIGZyb20gJy4vdmFsdWVzL2RpcmVjdGlvbnMnO1xuaW1wb3J0IE1vZGVzIGZyb20gJy4vdmFsdWVzL21vZGVzJztcbmltcG9ydCBTbG90cyBmcm9tICcuL3ZhbHVlcy9zbG90cyc7XG5cbmNvbnN0IG5vZGVOYW1lID0gJ2ZsaXAtcGFjayc7XG5cbmNvbnN0IHsgaXNOYU4gfSA9IGdsb2JhbFRoaXM7XG5jb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG5cbnRlbXBsYXRlLmlubmVySFRNTCA9IGBcbiAgPHN0eWxlPlxuICAgIDpob3N0IHtcbiAgICAgIC0tM2QtcGVyc3BlY3RpdmU6IDEwMHZtYXg7XG5cbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICB9XG5cbiAgICBzbG90IHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIHotaW5kZXg6IDA7XG4gICAgfVxuXG4gICAgc2xvdDpub3QoW25hbWVdKSB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgPC9zdHlsZT5cbiAgPGZsaXA+XG4gICAgPHNsb3Q+PC9zbG90PlxuICAgIDxzbG90IG5hbWU9XCIke1Nsb3RzLmN1cnJlbnR9XCI+PC9zbG90PlxuICAgIDxzbG90IG5hbWU9XCIke1Nsb3RzLnRlbXB9XCI+PC9zbG90PlxuICA8L2ZsaXA+XG5gO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZsaXBwaW5nT3B0aW9uIHtcbiAgZHVyYXRpb246IG51bWJlcjtcbiAgaW5kZXg6IG51bWJlcjtcbiAgbGFzdEluZGV4OiBudW1iZXI7XG4gIGxhc3RDYXJkOiBIVE1MRWxlbWVudCB8IG51bGw7XG4gIHRlbXBDYXJkOiBIVE1MRWxlbWVudDtcbn1cblxuY2xhc3MgRmxpcCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgI21vZGU6IE1vZGVzID0gTW9kZXMubG9vcDtcblxuICAjZHVyYXRpb246IG51bWJlciA9IDQwMDtcblxuICAjZGlyZWN0aW9uOiBEaXJlY3Rpb25zID0gRGlyZWN0aW9ucy5kb3duO1xuXG4gICNpbmRleDogbnVtYmVyID0gLTE7XG5cbiAgI2NhcmRzOiBIVE1MRWxlbWVudFtdID0gQXJyYXkuZnJvbSh0aGlzLmNoaWxkcmVuKSBhcyBIVE1MRWxlbWVudFtdO1xuXG4gICNtaW5GbGlwczogbnVtYmVyID0gMDtcblxuICAjbWF4RmxpcHM6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgY29uc3Qgc2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuXG4gICAgc2hhZG93Um9vdC5hcHBlbmQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgIChzaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJ3Nsb3Q6bm90KFtuYW1lXSknKSBhcyBIVE1MU2xvdEVsZW1lbnQpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignc2xvdGNoYW5nZScsICgpID0+IHtcbiAgICAgICAgdGhpcy4jY2FyZHMgPSBBcnJheS5mcm9tKFxuICAgICAgICAgIHRoaXMucXVlcnlTZWxlY3RvckFsbCgnOnNjb3BlID4gOm5vdChbc2xvdD10ZW1wXSknKSxcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIEZsaXAub2JzZXJ2ZWRBdHRyaWJ1dGVzXG4gICAgICAuZmlsdGVyKChhdHRyTmFtZSkgPT4gdGhpcy5oYXNBdHRyaWJ1dGUoYXR0ck5hbWUpKVxuICAgICAgLmZvckVhY2goKGF0dHJOYW1lKSA9PiB7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGF0dHJOYW1lKTtcbiAgICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuaW5kZXggPT09IC0xKSB7XG4gICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgQXR0cmlidXRlcy5pbmRleCxcbiAgICAgIEF0dHJpYnV0ZXMudmFsdWUsXG4gICAgICBBdHRyaWJ1dGVzLm1vZGUsXG4gICAgICBBdHRyaWJ1dGVzLmR1cmF0aW9uLFxuICAgICAgQXR0cmlidXRlcy5kaXJlY3Rpb24sXG4gICAgICBBdHRyaWJ1dGVzLm1pbkZsaXBzLFxuICAgICAgQXR0cmlidXRlcy5tYXhGbGlwcyxcbiAgICBdO1xuICB9XG5cbiAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGF0dHJOYW1lOiBzdHJpbmcpIHtcbiAgICBzd2l0Y2ggKGF0dHJOYW1lKSB7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBBdHRyaWJ1dGVzLmluZGV4OiB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlcy5pbmRleCk7XG5cbiAgICAgICAgaWYgKGluZGV4ICE9PSBudWxsICYmIGluZGV4Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLmluZGV4ID0gTnVtYmVyKGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSBBdHRyaWJ1dGVzLnZhbHVlOiB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlcy52YWx1ZSk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jYXJkcy5maW5kSW5kZXgoKGNhcmQpID0+IChcbiAgICAgICAgICBGbGlwLmdldENhcmRWYWx1ZShjYXJkKSA9PT0gdmFsdWVcbiAgICAgICAgKSk7XG5cbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSBBdHRyaWJ1dGVzLm1vZGU6XG4gICAgICAgIGlmICh0aGlzLmhhc0F0dHJpYnV0ZShBdHRyaWJ1dGVzLm1vZGUpKSB7XG4gICAgICAgICAgdGhpcy5tb2RlID0gdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlcy5tb2RlKSBhcyBNb2RlcztcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBBdHRyaWJ1dGVzLmR1cmF0aW9uOiB7XG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlcy5kdXJhdGlvbik7XG5cbiAgICAgICAgaWYgKGR1cmF0aW9uICE9PSBudWxsICYmIGR1cmF0aW9uLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLmR1cmF0aW9uID0gTnVtYmVyKGR1cmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSBBdHRyaWJ1dGVzLmRpcmVjdGlvbjpcbiAgICAgICAgaWYgKHRoaXMuaGFzQXR0cmlidXRlKEF0dHJpYnV0ZXMuZGlyZWN0aW9uKSkge1xuICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlcy5kaXJlY3Rpb24pIGFzIERpcmVjdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQXR0cmlidXRlcy5taW5GbGlwczoge1xuICAgICAgICBjb25zdCBtaW5GbGlwcyA9IHRoaXMuZ2V0QXR0cmlidXRlKEF0dHJpYnV0ZXMubWluRmxpcHMpO1xuXG4gICAgICAgIGlmIChtaW5GbGlwcyAhPT0gbnVsbCAmJiBtaW5GbGlwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5taW5GbGlwcyA9IE51bWJlcihtaW5GbGlwcyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgQXR0cmlidXRlcy5tYXhGbGlwczoge1xuICAgICAgICBjb25zdCBtYXhGbGlwcyA9IHRoaXMuZ2V0QXR0cmlidXRlKEF0dHJpYnV0ZXMubWF4RmxpcHMpO1xuXG4gICAgICAgIGlmIChtYXhGbGlwcyAhPT0gbnVsbCAmJiBtYXhGbGlwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5tYXhGbGlwcyA9IE51bWJlcihtYXhGbGlwcyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHZhbHVlIG9mIGNhcmQuXG4gICAqL1xuICBzdGF0aWMgZ2V0Q2FyZFZhbHVlKGNhcmQ6IEhUTUxFbGVtZW50IHwgbnVsbCk6IHN0cmluZyB8IG51bGwge1xuICAgIHJldHVybiBjYXJkPy5nZXRBdHRyaWJ1dGU/LihBdHRyaWJ1dGVzLnZhbHVlKSA/PyBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgY2FyZCBlbGVtZW50cy5cbiAgICovXG4gIGdldCBjYXJkcygpOiBIVE1MRWxlbWVudFtdIHtcbiAgICByZXR1cm4gWy4uLnRoaXMuI2NhcmRzXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGZsaXBwaW5nIG1vZGUuXG4gICAqL1xuICBnZXQgbW9kZSgpOiBNb2RlcyB7XG4gICAgcmV0dXJuIHRoaXMuI21vZGU7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBmbGlwcGluZyBtb2RlLlxuICAgKi9cbiAgc2V0IG1vZGUobW9kZTogTW9kZXMpIHtcbiAgICBpZiAoIShtb2RlIGluIE1vZGVzKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBtb2RlOiAke21vZGV9YCk7XG4gICAgfVxuXG4gICAgdGhpcy4jbW9kZSA9IG1vZGU7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBmbGlwcGluZyBkdXJhdGlvbi5cbiAgICovXG4gIGdldCBkdXJhdGlvbigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLiNkdXJhdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGZsaXBwaW5nIGR1cmF0aW9uLlxuICAgKi9cbiAgc2V0IGR1cmF0aW9uKGR1cmF0aW9uOiBudW1iZXIpIHtcbiAgICBpZiAoaXNOYU4oZHVyYXRpb24pKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIGR1cmF0aW9uOiAke2R1cmF0aW9ufWApO1xuICAgIH0gZWxzZSBpZiAoZHVyYXRpb24gPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgRHVyYXRpb24gc2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiAwOiAke2R1cmF0aW9ufWApO1xuICAgIH1cblxuICAgIHRoaXMuI2R1cmF0aW9uID0gZHVyYXRpb247XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBmbGlwcGluZyBkaXJlY3Rpb24uXG4gICAqL1xuICBnZXQgZGlyZWN0aW9uKCk6IERpcmVjdGlvbnMge1xuICAgIHJldHVybiB0aGlzLiNkaXJlY3Rpb247XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBmbGlwcGluZyBkaXJlY3Rpb24uXG4gICAqL1xuICBzZXQgZGlyZWN0aW9uKGRpcmVjdGlvbjogRGlyZWN0aW9ucykge1xuICAgIGlmICghKGRpcmVjdGlvbiBpbiBEaXJlY3Rpb25zKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBkaXJlY3Rpb246ICR7ZGlyZWN0aW9ufWApO1xuICAgIH1cblxuICAgIHRoaXMuI2RpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIG1pbiBmbGlwcy5cbiAgICovXG4gIGdldCBtaW5GbGlwcygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLiNtaW5GbGlwcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIG1pbiBmbGlwcy5cbiAgICovXG4gIHNldCBtaW5GbGlwcyhtaW5GbGlwczogbnVtYmVyKSB7XG4gICAgaWYgKGlzTmFOKG1pbkZsaXBzKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBtaW4gZmxpcHM6ICR7bWluRmxpcHN9YCk7XG4gICAgfSBlbHNlIGlmIChwYXJzZUludChgJHttaW5GbGlwc31gLCAxMCkgIT09IG1pbkZsaXBzKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBNaW4gZmxpcHMgc2hvdWxkIGJlIGFuIGludGVnZXI6ICR7bWluRmxpcHN9YCk7XG4gICAgfVxuXG4gICAgdGhpcy4jbWluRmxpcHMgPSBtaW5GbGlwcztcblxuICAgIGlmICh0aGlzLm1heEZsaXBzIDwgbWluRmxpcHMpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFxuICAgICAgICAnU2V0dGluZyBtaW4gZmxpcHMgdGhhdCBpcyBncmVhdGVyIHRoYW4gbWF4IGZsaXBzIG1pZ2h0IGNhdXNlIGZsaXBwaW5nIGVycm9yJyxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgbWF4IGZsaXBzLlxuICAgKi9cbiAgZ2V0IG1heEZsaXBzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuI21heEZsaXBzID8/IEluZmluaXR5O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgbWF4IGZsaXBzLlxuICAgKi9cbiAgc2V0IG1heEZsaXBzKG1heEZsaXBzOiBudW1iZXIpIHtcbiAgICBpZiAoaXNOYU4obWF4RmxpcHMpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIG1heCBmbGlwczogJHttYXhGbGlwc31gKTtcbiAgICB9IGVsc2UgaWYgKHBhcnNlSW50KGAke21heEZsaXBzfWAsIDEwKSAhPT0gbWF4RmxpcHMpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYE1heCBmbGlwcyBzaG91bGQgYmUgYW4gaW50ZWdlcjogJHttYXhGbGlwc31gKTtcbiAgICB9XG5cbiAgICB0aGlzLiNtYXhGbGlwcyA9IG1heEZsaXBzO1xuXG4gICAgaWYgKHRoaXMubWluRmxpcHMgPiBtYXhGbGlwcykge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXG4gICAgICAgICdTZXR0aW5nIG1heCBmbGlwcyB0aGF0IGlzIGxlc3MgdGhhbiBtaW4gZmxpcHMgbWlnaHQgY2F1c2UgZmxpcHBpbmcgZXJyb3InLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBjdXJyZW50IGluZGV4LlxuICAgKi9cbiAgZ2V0IGluZGV4KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuI2luZGV4O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgY3VycmVudCBpbmRleC5cbiAgICovXG4gIHNldCBpbmRleChpbmRleDogbnVtYmVyKSB7XG4gICAgaWYgKGlzTmFOKGluZGV4KSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBpbmRleDogJHtpbmRleH1gKTtcbiAgICB9IGVsc2UgaWYgKHBhcnNlSW50KGAke2luZGV4fWAsIDEwKSAhPT0gaW5kZXgpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEluZGV4IHNob3VsZCBiZSBhbiBpbnRlZ2VyOiAke2luZGV4fWApO1xuICAgIH0gZWxzZSBpZiAodGhpcy5jYXJkc1tpbmRleF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYENhcmQgaW5kZXggZG9lc24ndCBleGlzdDogJHtpbmRleH1gKTtcbiAgICB9XG5cbiAgICB0aGlzLiNpbmRleCA9IGluZGV4O1xuICAgIHRoaXMucXVlcnlTZWxlY3RvckFsbChgW3Nsb3Q9XCIke1Nsb3RzLmN1cnJlbnR9XCJdYCkuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgY2FyZC5yZW1vdmVBdHRyaWJ1dGUoJ3Nsb3QnKTtcbiAgICB9KTtcbiAgICB0aGlzLmNhcmRzW2luZGV4XS5zZXRBdHRyaWJ1dGUoJ3Nsb3QnLCBTbG90cy5jdXJyZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGN1cnJlbnQgdmFsdWUuXG4gICAqL1xuICBnZXQgdmFsdWUoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWVCeUluZGV4KHRoaXMuaW5kZXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgY3VycmVudCB2YWx1ZS5cbiAgICovXG4gIHNldCB2YWx1ZSh2YWx1ZTogc3RyaW5nIHwgbnVsbCkge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jYXJkcy5maW5kSW5kZXgoKGRvbSkgPT4gKFxuICAgICAgRmxpcC5nZXRDYXJkVmFsdWUoZG9tKSA9PT0gdmFsdWVcbiAgICApKTtcblxuICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihgVmFsdWUgaXMgbm90IGluIGNhcmRzOiAke3ZhbHVlfWApO1xuICAgIH1cblxuICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGN1cnJlbnQgY2FyZC5cbiAgICovXG4gIGdldCBjYXJkKCk6IEhUTUxFbGVtZW50IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q2FyZEJ5SW5kZXgodGhpcy5pbmRleCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBjdXJyZW50IGNhcmQuXG4gICAqL1xuICBzZXQgY2FyZChjYXJkOiBIVE1MRWxlbWVudCB8IG51bGwpIHtcbiAgICBpZiAoY2FyZCA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5pbmRleCA9IC0xO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmluZGV4ID0gdGhpcy5jYXJkcy5pbmRleE9mKGNhcmQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBudGggY2FyZCBieSBpbmRleC5cbiAgICovXG4gIGdldENhcmRCeUluZGV4KGluZGV4OiBudW1iZXIpOiBIVE1MRWxlbWVudCB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmNhcmRzW2luZGV4XSA/PyBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgY2FyZCBpbmZvIHdpdGggaW5kZXggYW5kIGNhcmQgZWxlbWVudC5cbiAgICovXG4gIGdldENhcmRJbmZvID0gZ2V0Q2FyZEluZm9cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmFsdWUgb2YgbnRoIGNhcmQgYnkgaW5kZXguXG4gICAqL1xuICBnZXRWYWx1ZUJ5SW5kZXgoaW5kZXg6IG51bWJlcik6IHN0cmluZyB8IG51bGwge1xuICAgIHJldHVybiBGbGlwLmdldENhcmRWYWx1ZSh0aGlzLmdldENhcmRCeUluZGV4KGluZGV4KSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgaW5kZXggb2YgY2FyZC5cbiAgICovXG4gIGdldEluZGV4QnlDYXJkKGNhcmQ6IEhUTUxFbGVtZW50KTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jYXJkcy5pbmRleE9mKGNhcmQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBjYXJkIG1hdGNoZXMgb2YgdmFsdWUuXG4gICAqL1xuICBnZXRJbmRleEJ5VmFsdWUodmFsdWU6IHN0cmluZyk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY2FyZHMuZmluZEluZGV4KChjYXJkKSA9PiAoXG4gICAgICBGbGlwLmdldENhcmRWYWx1ZShjYXJkKSA9PT0gdmFsdWVcbiAgICApKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBuZXh0IGNhcmQgaW5kZXguXG4gICAqL1xuICBnZXROZXh0SW5kZXggPSBnZXROZXh0SW5kZXhcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbmV4dCBjYXJkLlxuICAgKi9cbiAgZ2V0TmV4dENhcmQoXG4gICAgLi4uYXJnczogUGFyYW1ldGVyczxGbGlwWydnZXROZXh0SW5kZXgnXT5cbiAgKTogSFRNTEVsZW1lbnQgfCBudWxsIHtcbiAgICBjb25zdCBuZXh0SW5kZXggPSB0aGlzLmdldE5leHRJbmRleCguLi5hcmdzKTtcblxuICAgIHJldHVybiAobmV4dEluZGV4ICE9PSBudWxsXG4gICAgICA/IHRoaXMuZ2V0Q2FyZEJ5SW5kZXgobmV4dEluZGV4KVxuICAgICAgOiBudWxsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGbGlwcyB0byBzcGVjaWZpYyBjYXJkL2luZGV4LlxuICAgKi9cbiAgZmxpcCA9IGZsaXBcblxuICAvKipcbiAgICogQWxpYXMgb2YgLmZsaXAoLi4uKS5cbiAgICovXG4gIGZsaXBUb0NhcmQoY2FyZDogSFRNTEVsZW1lbnQsIG9wdGlvbnM/OiBGbGlwT3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmZsaXAoY2FyZCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogRmxpcHMgdG8gdGhlIG50aCBjYXJkIGJ5IGluZGV4LlxuICAgKi9cbiAgZmxpcFRvSW5kZXgoaW5kZXg6IG51bWJlciwgb3B0aW9ucz86IEZsaXBPcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuZmxpcCh0aGlzLmdldENhcmRCeUluZGV4KGluZGV4KSwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogRmxpcHMgdG8gc3BlY2lmaWMgY2FyZC9pbmRleCBEaXJlY3RseS5cbiAgICovXG4gIGZsaXBEaXJlY3RseSguLi5bbmV4dCwgb3B0aW9uc106IFBhcmFtZXRlcnM8RmxpcFsnZmxpcCddPikge1xuICAgIHJldHVybiB0aGlzLmZsaXAobmV4dCwge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGRpcmVjdDogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbGlhcyBvZiAuZmxpcERpcmVjdGx5KC4uLikuXG4gICAqL1xuICBmbGlwVG9DYXJkRGlyZWN0bHkoY2FyZDogSFRNTEVsZW1lbnQsIG9wdGlvbnM/OiBGbGlwT3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmZsaXBEaXJlY3RseShjYXJkLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGbGlwcyBkaXJlY3RseSB0byB0aGUgbnRoIGNhcmQgYnkgaW5kZXguXG4gICAqL1xuICBmbGlwVG9JbmRleERpcmVjdGx5KGluZGV4OiBudW1iZXIsIG9wdGlvbnM/OiBGbGlwT3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmZsaXBEaXJlY3RseSh0aGlzLmdldENhcmRCeUluZGV4KGluZGV4KSwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogRG9lcyBmbGlwcGluZyBhbmltYXRpb24gZnJvbSBsYXN0IGNhcmQgdG8gbmV4dCBjYXJkLlxuICAgKi9cbiAgZmxpcEFuaW1hdGlvbiA9IGZsaXBBbmltYXRpb25cblxuICAvKipcbiAgICogUmV0dXJucyBjbG9uZWQgZWxlbWVudCBvZiBjYXJkLlxuICAgKlxuICAgKiBUT0RPOiBjbG9uZSBzdHlsZT9cbiAgICovXG4gIHN0YXRpYyBjbG9uZUNhcmQoY2FyZDogSFRNTEVsZW1lbnQpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgbmV3Q2FyZCA9IGNhcmQuY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgeyAvLyBjYXNlIG9mIGNhbnZhc1xuICAgICAgY29uc3QgbmV3Q2FyZENhbnZhc2VzID0gQXJyYXkuZnJvbShuZXdDYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJ2NhbnZhcycpKTtcblxuICAgICAgaWYgKG5ld0NhcmQgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgICAgICBuZXdDYXJkQ2FudmFzZXMucHVzaChuZXdDYXJkKTtcbiAgICAgIH1cbiAgICAgIGlmIChuZXdDYXJkQ2FudmFzZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJ2NhbnZhcycpLmZvckVhY2goKGRvbSwgZG9tSW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBjYXJkQ2FudmFzID0gZG9tIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuICAgICAgICAgIGNvbnN0IG5ld0NhbnZhcyA9IG5ld0NhcmRDYW52YXNlc1tkb21JbmRleF0gYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG5cbiAgICAgICAgICBuZXdDYW52YXMud2lkdGggPSBjYXJkQ2FudmFzLndpZHRoO1xuICAgICAgICAgIG5ld0NhbnZhcy5oZWlnaHQgPSBjYXJkQ2FudmFzLmhlaWdodDtcbiAgICAgICAgICBuZXdDYW52YXMuZ2V0Q29udGV4dCgnMmQnKT8uZHJhd0ltYWdlKGNhcmRDYW52YXMsIDAsIDApO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3Q2FyZDtcbiAgfVxufVxuXG5yZWdpc3RlckVsZW1lbnQoRmxpcCwgbm9kZU5hbWUpO1xuXG5leHBvcnQgZGVmYXVsdCBGbGlwO1xuIiwiLyoqXG4gKiBSZWdpc3RlcnMgZWxlbWVudC5cbiAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJFbGVtZW50KFxuICBOb2RlOiB0eXBlb2YgSFRNTEVsZW1lbnQsXG4gIG5vZGVOYW1lOiBzdHJpbmcsXG4pOiBSZXR1cm5UeXBlPHR5cGVvZiBjdXN0b21FbGVtZW50cy53aGVuRGVmaW5lZD4ge1xuICBpZiAoY3VzdG9tRWxlbWVudHMuZ2V0KG5vZGVOYW1lKSkge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcbiAgICAgIG5ldyBFcnJvcihgQWxyZWFkeSBkZWZpbmVkIDwke25vZGVOYW1lfT5gKSxcbiAgICApO1xuICB9XG5cbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKG5vZGVOYW1lLCBOb2RlKTtcblxuICByZXR1cm4gY3VzdG9tRWxlbWVudHMud2hlbkRlZmluZWQobm9kZU5hbWUpO1xufVxuXG5leHBvcnQgZGVmYXVsdCByZWdpc3RlckVsZW1lbnQ7XG4iLCJpbXBvcnQgRmxpcCBmcm9tICcuL2ZsaXAnO1xuXG5leHBvcnQgZGVmYXVsdCBGbGlwO1xuIl0sIm5hbWVzIjpbInRyaWdnZXJFdmVudCIsInJlZiIsInR5cGUiLCJvcHRpb25zIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiRXZlbnRzIiwiTW9kZXMiLCJjbGFzc05hbWUiLCJzbG90Iiwic3R5bGUiLCJpbm5lckhUTUwiLCJ0ZW1wQ2FyZCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImF0dGFjaFNoYWRvdyIsIm1vZGUiLCJ1bmRlZmluZWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJDbGFzc05hbWVzIiwiU2xvdHMiLCJEaXJlY3Rpb25zIiwiY3NzIiwicHJlZml4cyIsImhlYWQiLCJ0ZXN0IiwidGV4dCIsInJlcGxhY2UiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJwcmVmaXgiLCJjb25jYXQiLCJqb2luIiwiYmFja2dyb3VuZFN0eWxlIiwicHJlZml4Q3NzIiwid3JhcHBlclN0eWxlIiwiY2FyZFN0eWxlIiwibmV4dENhcmRTdHlsZSIsImxhc3RDYXJkU3R5bGUiLCJkdXJhdGlvbiIsImRpcmVjdGlvbiIsImxhc3RDYXJkIiwibmV4dENhcmQiLCJkdXJhdGlvblNlYyIsImRvbUJhY2tncm91bmQiLCJjcmVhdGVUZW1wQ2FyZCIsImRvbVdyYXBwZXIiLCJkb21DYXJkIiwiZG9tTmV4dCIsImRvbU5leHRDYXJkIiwiRmxpcCIsInNldFByb3BlcnR5IiwicmVtb3ZlQXR0cmlidXRlIiwiYXBwZW5kIiwiZG9tTGFzdCIsImRvbUxhc3RDYXJkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJhZGRFdmVudExpc3RlbmVyIiwib25jZSIsImFzeW5jIiwiZmxpcHBpbmdWZXJ0aWNhbGx5IiwidGhpcyIsImZsaXBwaW5nSG9yaXpvbnRhbGx5IiwibmV4dEluZGV4IiwibGFzdFRlbXBDYXJkIiwicXVlcnlTZWxlY3RvciIsInJlbW92ZSIsImluZGV4IiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJjb21wb3NlZCIsImRldGFpbCIsImZsaXBBbmltYXRpb24iLCJuZXh0IiwiY2FyZCIsImdldENhcmRJbmZvIiwiZ2V0TmV4dEluZGV4IiwiZGlmZmVyZW50IiwiY2FyZHMiLCJsZW5ndGgiLCJSZWZlcmVuY2VFcnJvciIsImxhc3RJbmRleCIsImRpcmVjdCIsInRhcmdldEluZGV4IiwidGFyZ2V0Q2FyZCIsImZsaXBPbmVDYXJkIiwibWluRmxpcHMiLCJtYXhGbGlwcyIsImNhcmRzTGVuZ3RoIiwidGltZXMiLCJmbGlwTmV4dCIsInByZXZJbmRleCIsInByZXZDYXJkIiwiZ2V0Q2FyZEJ5SW5kZXgiLCJzb3VyY2UiLCJIVE1MRWxlbWVudCIsImdldEluZGV4QnlDYXJkIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiQXR0cmlidXRlcyIsImlzTmFOIiwiZ2xvYmFsVGhpcyIsInRlbXBsYXRlIiwiZnJvbSIsImNoaWxkcmVuIiwiY29uc3RydWN0b3IiLCJzdXBlciIsInNoYWRvd1Jvb3QiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwicXVlcnlTZWxlY3RvckFsbCIsIm9ic2VydmVkQXR0cmlidXRlcyIsImZpbHRlciIsImF0dHJOYW1lIiwiaGFzQXR0cmlidXRlIiwiZm9yRWFjaCIsImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayIsImdldEF0dHJpYnV0ZSIsIk51bWJlciIsInZhbHVlIiwiZmluZEluZGV4IiwiZ2V0Q2FyZFZhbHVlIiwiVHlwZUVycm9yIiwiUmFuZ2VFcnJvciIsInBhcnNlSW50IiwiSW5maW5pdHkiLCJnZXRWYWx1ZUJ5SW5kZXgiLCJkb20iLCJpbmRleE9mIiwiZ2V0SW5kZXhCeVZhbHVlIiwiZ2V0TmV4dENhcmQiLCJhcmdzIiwiZmxpcCIsImZsaXBUb0NhcmQiLCJmbGlwVG9JbmRleCIsImZsaXBEaXJlY3RseSIsImZsaXBUb0NhcmREaXJlY3RseSIsImZsaXBUb0luZGV4RGlyZWN0bHkiLCJuZXdDYXJkIiwibmV3Q2FyZENhbnZhc2VzIiwiSFRNTENhbnZhc0VsZW1lbnQiLCJwdXNoIiwiZG9tSW5kZXgiLCJjYXJkQ2FudmFzIiwibmV3Q2FudmFzIiwid2lkdGgiLCJoZWlnaHQiLCJnZXRDb250ZXh0IiwiZHJhd0ltYWdlIiwiTm9kZSIsIm5vZGVOYW1lIiwiY3VzdG9tRWxlbWVudHMiLCJnZXQiLCJyZWplY3QiLCJFcnJvciIsImRlZmluZSIsIndoZW5EZWZpbmVkIl0sInNvdXJjZVJvb3QiOiIifQ==