(()=>{"use strict";function t(t,e,n){return t.dispatchEvent(new CustomEvent(e,n))}var e;!function(t){t.flipStart="flipstart",t.flipCandidateStart="flipcandidatestart",t.flipCandidateEnd="flipcandidateend",t.flipEnd="flipend"}(e||(e={}));const n=e,i=function(t={}){const{className:e,slot:n,style:i="",attributes:r={},innerHTML:a="<slot></slot>"}=t,o=document.createElement("div");return o.attachShadow({mode:"open"}).innerHTML=`\n    <style>\n      \n  :host {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    pointer-events: none;\n    display: block;\n  }\n\n  slot {\n    display: block;\n  }\n\n      ${i}\n    </style>\n    ${a}\n  `,void 0!==e&&o.classList.add(e),void 0!==n&&o.setAttribute("slot",n),Object.keys(r).forEach((t=>{o.setAttribute(t,r[t])})),o};var r;!function(t){t.temp="temp"}(r||(r={}));const a=r;var o;!function(t){t.current="current",t.temp="temp"}(o||(o={}));const s=o,d=async function(e){const{nextCandidateInfo:r}=e,{index:o}=r,d=i({className:a.temp,slot:s.temp}),l=this.querySelector(`.${a.temp}`);l&&l.remove(),this.index=o,this.append(d),t(this,n.flipCandidateStart,{bubbles:!0,cancelable:!0,composed:!0,detail:{...e,tempCandidateNode:d}})&&await this.flipAnimation({...e,tempCandidateNode:d}),t(this,n.flipCandidateEnd,{bubbles:!0,cancelable:!1,composed:!0,detail:{...e,tempCandidateNode:d}}),d.remove()},l=async function(e,i){const r=("object"!=typeof e||e instanceof HTMLElement?i:e)??{},{mode:a=this.mode,direct:o=!1,different:s=this.candidatesCatch.length>1,duration:l=this.duration,direction:p=this.direction}=r,c=e===r||void 0===e?this.getNextCandidateIndex({different:s,mode:a}):e,h=this.getCandidateInfo(c),{index:u,node:f}=h;if(null===f)throw new ReferenceError(`Target candidate doesn't exist: ${c}`);const v=this.getCandidateInfo(this.index);if(t(this,n.flipStart,{bubbles:!0,cancelable:!0,composed:!0,detail:{mode:a,direct:o,different:s,duration:l,direction:p,lastCandidateInfo:v,targetCandidateInfo:h}})){if(o)await d.call(this,{mode:a,direct:o,different:s,duration:l,direction:p,lastCandidateInfo:v,nextCandidateInfo:h});else{const{minFlips:t,maxFlips:e}=this,n=async(i=1)=>{const r=i<e?this.getNextCandidateIndex({mode:a,different:i<t}):u,c=this.getCandidateInfo(r),h=this.getCandidateInfo(this.index);await d.call(this,{mode:a,direct:o,different:s,duration:l,direction:p,lastCandidateInfo:h,nextCandidateInfo:c}),r!==u&&await n(i+1)};await n()}t(this,n.flipEnd,{bubbles:!0,cancelable:!1,composed:!0,detail:{mode:a,direct:o,different:s,duration:l,direction:p,lastCandidateInfo:v,targetCandidateInfo:h}})}};var p;!function(t){t.up="up",t.down="down",t.left="left",t.right="right"}(p||(p={}));const c=p,h=function t(e){const n=e.cloneNode(!1);if(e instanceof HTMLCanvasElement){const t=n;t.width=e.width,t.height=e.height,t.getContext("2d")?.drawImage?.(e,0,0)}return e.childNodes.forEach((e=>{n.appendChild(t(e))})),n},u=function(t,e){const n=/^@/.test(t)?"@-":"-",i=t.replace(/^@/,"").replace(/;?$/,";");return(Array.isArray(e)?e:[e]).map((t=>`${n}${t}-${i}`)).concat(t).join("\n")},f=function(t){const{duration:e,direction:n,lastCandidateInfo:r,nextCandidateInfo:a,tempCandidateNode:o}=t,{node:s}=r,d=a.node,l=e/1e3,p=i({style:(g=this,`\n  ${u(`@keyframes flip {\n    0% {\n      ${u("transform: perspective(var(--hori-perspective)) rotateY(0);","webkit")}\n    }\n    100% {\n      ${u("transform: perspective(var(--hori-perspective)) rotateY(var(--end-deg));","webkit")}\n    }\n  }`,"webkit")}\n\n  :host {\n    --hori-perspective: ${g.perspective};\n    --right-x-left: 50%;\n    --right-x-right: calc(100% + 100vw);\n    --left-x-left: -100vw;\n    --left-x-right: 50%;\n    --left-end-deg: -180deg;\n    --right-end-deg: 180deg;\n\n    ${u("clip-path: polygon(\n      var(--start-x-left) -100vh,\n      var(--start-x-right) -100vh,\n      var(--start-x-right) calc(100% + 100vh),\n      var(--start-x-left) calc(100% + 100vh)\n    );","webkit")}\n    ${u("animation: flip var(--duration) forwards linear;","webkit")}\n  }\n`)}),f=i({style:`\n  ${u("@keyframes clip-next {\n    0% { opacity: 0 }\n    50%, 100% { opacity: 1 }\n  }","webkit")}\n\n  :host {\n    ${u("transform: rotateY(180deg);","webkit")}\n    ${u("animation: clip-next var(--duration) forwards steps(1, end);","webkit")}\n  }\n`}),v=h(d);var g;switch(n){default:case c.left:p.style.setProperty("--start-x-left","var(--right-x-left)"),p.style.setProperty("--start-x-right","var(--right-x-right)"),p.style.setProperty("--end-x-left","var(--left-x-left)"),p.style.setProperty("--end-x-right","var(--left-x-right)"),p.style.setProperty("--end-deg","var(--left-end-deg)");break;case c.right:p.style.setProperty("--start-x-left","var(--left-x-left)"),p.style.setProperty("--start-x-right","var(--left-x-right)"),p.style.setProperty("--end-x-left","var(--right-x-left)"),p.style.setProperty("--end-x-right","var(--right-x-right)"),p.style.setProperty("--end-deg","var(--right-end-deg)")}if(p.style.setProperty("--duration",`${l}s`),v.removeAttribute("slot"),f.append(v),p.append(f),s){const t=i({style:`\n  :host {\n    --right-x-left: 50%;\n    --right-x-right: 100vw;\n    --left-x-left: -100vw;\n    --left-x-right: 50%;\n\n    ${u("clip-path: polygon(\n      var(--x-left) -100vh,\n      var(--x-right) -100vh,\n      var(--x-right) calc(100% + 100vh),\n      var(--x-left) calc(100% + 100vh)\n    );","webkit")}\n  }\n`}),e=i({style:`\n  ${u("@keyframes clip-last {\n    0% { opacity: 1 }\n    50%, 100% { opacity: 0 }\n  }","webkit")}\n\n  :host {\n    ${u("animation: clip-last var(--duration) forwards steps(1, end);","webkit")}\n  }\n`}),r=h(s),a=h(s);switch(n){default:case c.left:t.style.setProperty("--x-left","var(--left-x-left)"),t.style.setProperty("--x-right","var(--left-x-right)");break;case c.right:t.style.setProperty("--x-left","var(--right-x-left)"),t.style.setProperty("--x-right","var(--right-x-right)")}r.removeAttribute("slot"),e.append(r),p.append(e),a.removeAttribute("slot"),t.append(a),o.append(t)}return new Promise((t=>{o.addEventListener("animationend",(()=>{t(void 0)}),{once:!0}),o.append(p)}))},v=function(t){const{duration:e,direction:n,lastCandidateInfo:r,nextCandidateInfo:a,tempCandidateNode:o}=t,{node:s}=r,d=a.node,l=e/1e3,p=i({style:(g=this,`\n  ${u(`@keyframes flip {\n    0% {\n      ${u("transform: perspective(var(--vert-perspective)) rotateX(0);","webkit")}\n    }\n    100% {\n      ${u("transform: perspective(var(--vert-perspective)) rotateX(var(--end-deg));","webkit")}\n    }\n  }`,"webkit")}\n\n  :host {\n    --vert-perspective: ${g.perspective};\n    --upper-y-top: -100vh;\n    --upper-y-bottom: 50%;\n    --lower-y-top: 50%;\n    --lower-y-bottom: calc(100% + 100vh);\n    --down-end-deg: -180deg;\n    --up-end-deg: 180deg;\n\n    ${u("clip-path: polygon(\n      -100vw var(--start-y-top),\n      calc(100% + 100vw) var(--start-y-top),\n      calc(100% + 100vw) var(--start-y-bottom),\n      -100vw var(--start-y-bottom)\n    );","webkit")}\n    ${u("animation: flip var(--duration) forwards linear;","webkit")}\n  }\n`)}),f=i({style:`\n  ${u("@keyframes clip-next {\n    0% { opacity: 0 }\n    50%, 100% { opacity: 1 }\n  }","webkit")}\n\n  :host {\n    ${u("transform: rotateX(180deg);","webkit")}\n    ${u("animation: clip-next var(--duration) forwards steps(1, end);","webkit")}\n  }\n`}),v=h(d);var g;switch(n){default:case c.down:p.style.setProperty("--start-y-top","var(--upper-y-top)"),p.style.setProperty("--start-y-bottom","var(--upper-y-bottom)"),p.style.setProperty("--end-y-top","var(--lower-y-top)"),p.style.setProperty("--end-y-bottom","var(--lower-y-bottom)"),p.style.setProperty("--end-deg","var(--down-end-deg)");break;case c.up:p.style.setProperty("--start-y-top","var(--lower-y-top)"),p.style.setProperty("--start-y-bottom","var(--lower-y-bottom)"),p.style.setProperty("--end-y-top","var(--upper-y-top)"),p.style.setProperty("--end-y-bottom","var(--upper-y-bottom)"),p.style.setProperty("--end-deg","var(--up-end-deg)")}if(p.style.setProperty("--duration",`${l}s`),v.removeAttribute("slot"),f.append(v),p.append(f),s){const t=i({style:`\n  :host {\n    --upper-y-top: -100vh;\n    --upper-y-bottom: 50%;\n    --lower-y-top: 50%;\n    --lower-y-bottom: calc(100% + 100vh);\n\n    ${u("clip-path: polygon(\n      -100vw var(--y-top),\n      calc(100% + 100vw) var(--y-top),\n      calc(100% + 100vw) var(--y-bottom),\n      -100vw var(--y-bottom)\n    );","webkit")}\n  }\n`}),e=i({style:`\n  ${u("@keyframes clip-last {\n    0% { opacity: 1 }\n    50%, 100% { opacity: 0 }\n  }","webkit")}\n\n  :host {\n    ${u("animation: clip-last var(--duration) forwards steps(1, end);","webkit")}\n  }\n`}),r=h(s),a=h(s);switch(n){default:case c.down:t.style.setProperty("--y-top","var(--lower-y-top)"),t.style.setProperty("--y-bottom","var(--lower-y-bottom)");break;case c.up:t.style.setProperty("--y-top","var(--upper-y-top)"),t.style.setProperty("--y-bottom","var(--upper-y-bottom)")}r.removeAttribute("slot"),e.append(r),p.append(e),a.removeAttribute("slot"),t.append(a),o.append(t)}return new Promise((t=>{o.addEventListener("animationend",(()=>{t(void 0)}),{once:!0}),o.append(p)}))},g=async function(t){const{direction:e}=t;switch(e){default:throw new TypeError(`Invalid direction: ${e}`);case c.up:case c.down:return v.call(this,t);case c.right:case c.left:return f.call(this,t)}},y=function(t){if(null===t)return-1;const{candidatesCatch:e}=this;return t instanceof HTMLElement?e.indexOf(t):e.findIndex((e=>M.getCandidateValue(e)===t))},m=function(t){if(null===t)return{node:null,index:-1,value:null};if(t instanceof HTMLElement){const e=this.getCandidateIndex(t),n=-1===e?null:t;return{node:n,index:e,value:M.getCandidateValue(n)}}if("string"==typeof t){const e=this.getCandidateIndex(t),n=-1===e?null:this.getCandidateNode(e);return{node:n,index:e,value:M.getCandidateValue(n)}}const e=this.getCandidateNode(t);return{node:e,index:null===e?-1:t,value:M.getCandidateValue(e)}},x=function(t){return null===t?null:"string"==typeof t?this.candidatesCatch.find((e=>M.getCandidateValue(e)===t))??null:this.candidatesCatch[t]??null},b=function(t){return null===t?null:t instanceof HTMLElement?M.getCandidateValue(t):M.getCandidateValue(this.candidatesCatch[t])};var w;!function(t){t.loop="loop",t.random="random"}(w||(w={}));const C=w,$=function(t={}){const{different:e=this.candidatesCatch.length>1,mode:n=this.mode}=t,{index:i,candidatesCatch:r}=this,{length:a}=r;switch(n){default:throw new TypeError(`Invalid mode: ${n}`);case C.loop:{const t=(i+1)%a;return t===i&&e?-1:t}case C.random:switch(a){case 0:return-1;case 1:return e?-1:this.index;default:{let t=-1;for(;-1===t||t===i&&e;)t=Math.floor(a*Math.random());return t}}}};var I;!function(t){t.index="index",t.value="value",t.mode="mode",t.duration="duration",t.direction="direction",t.minFlips="min-flips",t.maxFlips="max-flips",t.perspective="perspective"}(I||(I={}));const E=I,{isNaN:A}=globalThis,k=document.createElement("template"),N={[E.mode]:C.loop,[E.duration]:400,[E.direction]:c.down,[E.index]:-1,[E.minFlips]:0,[E.maxFlips]:1/0};k.innerHTML=`\n  <style>\n    :host {\n      position: relative;\n      display: inline-block;\n    }\n\n    slot {\n      position: relative;\n      z-index: 0;\n    }\n\n    slot:not([name]) {\n      display: none;\n    }\n  </style>\n  <flip>\n    <slot></slot>\n    <slot name="${s.current}"></slot>\n    <slot name="${s.temp}"></slot>\n  </flip>\n`;class P extends HTMLElement{candidatesCatch=[];constructor(){super();const t=this.attachShadow({mode:"open"});t.append(k.content.cloneNode(!0)),this.rootElement=t.querySelector("flip"),t.querySelector("slot:not([name])").addEventListener("slotchange",(()=>{this.candidatesCatch=Array.from(this.querySelectorAll(":scope > :not([slot=temp])"));const{candidatesCatch:t}=this;if(-1===this.index&&this.hasAttribute(E.value)&&(this.value=this.getAttribute(E.value)),this.index>=t.length||this.index<0){const e=t.length>0?0:-1;this.index=e}}))}static get DIRECTION(){return{...c}}static get MODE(){return{...C}}static get EVENT(){return{...n}}static get observedAttributes(){return[E.index,E.value]}attributeChangedCallback(t){switch(t){default:break;case E.index:this.hasAttribute(E.index)&&(this.index=Number(this.getAttribute(E.index)));break;case E.value:this.hasAttribute(E.value)&&(this.value=this.getAttribute(E.value))}}static getCandidateValue(t){return t?.getAttribute?.(E.value)??null}get candidates(){return[...this.candidatesCatch]}get mode(){const t=this.getAttribute(E.mode);return null!==t&&Object.values(C).includes(t)?t:N[E.mode]}set mode(t){if(!Object.values(C).includes(t))throw new TypeError(`Invalid mode: ${t}`);this.setAttribute(E.mode,t)}get duration(){const t=this.getAttribute(E.duration);return null===t||0===t.length?N[E.duration]:Number(t)}set duration(t){if(A(t))throw new TypeError(`Invalid duration: ${t}`);if(t<0)throw new RangeError(`Duration should not be lesser than 0: ${t}`);this.setAttribute(E.duration,`${t}`)}get direction(){const t=this.getAttribute(E.direction);return Object.values(c).includes(t)?t:N[E.direction]}set direction(t){if(!Object.values(c).includes(t))throw new TypeError(`Invalid direction: ${t}`);this.setAttribute(E.direction,t)}get minFlips(){const t=this.getAttribute(E.minFlips);return null===t||0===t.length?N[E.minFlips]:Number(t)}set minFlips(t){if(A(t))throw new TypeError(`Invalid min flips: ${t}`);if(parseInt(`${t}`,10)!==t)throw new TypeError(`Min flips should be an integer: ${t}`);if(t<0)throw new RangeError(`Min flips should not be lesser than 0: ${t}`);if(this.setAttribute(E.minFlips,`${t}`),this.maxFlips<t)throw new RangeError("Setting min flips that is greater than max flips might cause flipping error")}get maxFlips(){const t=this.getAttribute(E.maxFlips);return null===t||0===t.length?N[E.maxFlips]:Number(t)}set maxFlips(t){if(A(t))throw new TypeError(`Invalid max flips: ${t}`);if(parseInt(`${t}`,10)!==t)throw new TypeError(`Max flips should be an integer: ${t}`);if(t<0)throw new RangeError(`Max flips should not be lesser than 0: ${t}`);if(this.setAttribute(E.maxFlips,`${t}`),this.minFlips>t)throw new RangeError("Setting max flips that is less than min flips might cause flipping error")}get perspective(){const t=this.getAttribute(E.perspective);if(null!==t)return t;const{clientWidth:e,clientHeight:n}=this;return 2*Math.max(e,n)+"px"}set perspective(t){"string"==typeof t&&t.length>0&&this.setAttribute(E.perspective,t)}get index(){const t=this.getAttribute(E.index);return null===t||0===t.length?N[E.index]:Number(t)%this.candidates.length}set index(t){if(A(t))throw new TypeError(`Invalid index: ${t}`);if(parseInt(`${t}`,10)!==t)throw new TypeError(`Index should be an integer: ${t}`);const{candidatesCatch:e}=this,n=this.getCandidateInfo(t),{index:i,value:r,node:a}=n;if(null===a&&e.length>0)throw new Error(`Illegal index: ${t}`);this.querySelectorAll(`[slot="${s.current}"]`).forEach((t=>{t.removeAttribute("slot")})),a?.setAttribute?.("slot",s.current),i!==this.index&&(this.setAttribute(E.index,`${i}`),r?this.setAttribute(E.value,r):this.removeAttribute(E.value))}get value(){return this.getCandidateValue(this.index)}set value(t){if(null!==t&&"string"!=typeof t)throw new TypeError(`Invalid value: ${t}`);this.index=this.getCandidateIndex(t)}get candidate(){return this.getCandidateNode(this.index)}set candidate(t){this.index=this.getCandidateIndex(t)}getCandidateNode=x;getCandidateIndex=y;getCandidateValue=b;getCandidateInfo=m;getNextCandidateIndex=$;getNextCandidateNode(...t){const e=this.getNextCandidateIndex(...t);return this.getCandidateNode(e)}getNextCandidateValue(...t){const e=this.getNextCandidateIndex(...t);return this.getCandidateValue(e)}getNextCandidateInfo(...t){const e=this.getNextCandidateIndex(...t);return this.getCandidateInfo(e)}flip(...t){return l.call(this,...t)}flipAnimation=g}var T,F;T=P,F="flip-pack",customElements.get(F)?Promise.reject(new Error(`Already defined <${F}>`)):(customElements.define(F,T),customElements.whenDefined(F));const M=P})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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N0YsS0FBSzZILGtCQUFrQjdILEtBQUtMLE9BTTVCLFVBQUMwRixHQUNSLEdBQWMsT0FBVkEsR0FBbUMsaUJBQVZBLEVBQzNCLE1BQU0sSUFBSVQsVUFBVyxrQkFBaUJTLEtBR3hDckYsS0FBS0wsTUFBUUssS0FBS3NGLGtCQUFrQkQsR0FNekIsZ0JBQ1gsT0FBT3JGLEtBQUt1RixpQkFBaUJ2RixLQUFLTCxPQU12QixjQUFDb0gsR0FDWi9HLEtBQUtMLE1BQVFLLEtBQUtzRixrQkFBa0J5QixHQU10Q3hCLGlCQUFtQkEsRUFLbkJELGtCQUFvQkEsRUFLcEJ1QyxrQkFBb0JBLEVBS3BCeEcsaUJBQW1CQSxFQUtuQkYsc0JBQXdCQSxFQUt4QjJHLHdCQUF3QkMsR0FDdEIsTUFBTW5JLEVBQVlJLEtBQUttQix5QkFBeUI0RyxHQUVoRCxPQUFPL0gsS0FBS3VGLGlCQUFpQjNGLEdBTS9Cb0kseUJBQXlCRCxHQUN2QixNQUFNbkksRUFBWUksS0FBS21CLHlCQUF5QjRHLEdBRWhELE9BQU8vSCxLQUFLNkgsa0JBQWtCakksR0FNaENxSSx3QkFBd0JGLEdBQ3RCLE1BQU1uSSxFQUFZSSxLQUFLbUIseUJBQXlCNEcsR0FFaEQsT0FBTy9ILEtBQUtxQixpQkFBaUJ6QixHQWEvQmlFLFFBQVFrRSxHQUNOLE9BQU9sRSxFQUFBQSxLQUFVN0QsUUFBUytILEdBTWxCdkgsY0FBZ0JBLEVDdmM1QixJQUNFMEgsRUFDQUMsRUFEQUQsRUR5Y2M5QyxFQ3hjZCtDLEVEU2UsWUNQWEMsZUFBZUMsSUFBSUYsR0FDZDNELFFBQVE4RCxPQUNiLElBQUlWLE1BQU8sb0JBQW1CTyxRQUlsQ0MsZUFBZUcsT0FBT0osRUFBVUQsR0FFekJFLGVBQWVJLFlBQVlMLElEZ2NwQyxXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL3V0aWxzL2V2ZW50SGFuZGxlci50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdmFsdWVzL2V2ZW50LnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy91dGlscy9jcmVhdGVUZW1wTm9kZS50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdmFsdWVzL2NsYXNzTmFtZS50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdmFsdWVzL3Nsb3QudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL21ldGhvZHMvZmxpcC9mbGlwT25lQ2FuZGlkYXRlLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy9tZXRob2RzL2ZsaXAvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL3ZhbHVlcy9kaXJlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL3V0aWxzL2Nsb25lTm9kZS50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdXRpbHMvcHJlZml4Q3NzLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy9tZXRob2RzL2ZsaXAvaG9yaXpvbnRhbC50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvbWV0aG9kcy9mbGlwL3ZlcnRpY2FsLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy9tZXRob2RzL2ZsaXAvZmxpcEFuaW1hdGlvbi50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvbWV0aG9kcy9nZXRDYW5kaWRhdGVJbmRleC50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvbWV0aG9kcy9nZXRDYW5kaWRhdGVJbmZvLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy9tZXRob2RzL2dldENhbmRpZGF0ZU5vZGUudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL21ldGhvZHMvZ2V0Q2FuZGlkYXRlVmFsdWUudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL3ZhbHVlcy9tb2RlLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy9tZXRob2RzL2dldE5leHRDYW5kaWRhdGVJbmRleC50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdmFsdWVzL2F0dHJpYnV0ZS50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvZmxpcC50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdXRpbHMvcmVnaXN0ZXJFbGVtZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbInR5cGUgRXZlbnRIb2xkZXIgPSBIVE1MRWxlbWVudCB8IERvY3VtZW50IHwgV2luZG93O1xudHlwZSBFdmVudExpc3RlbmVyID0gKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkO1xuXG5pbnRlcmZhY2UgRXZlbnRMaXN0ZW5lck9wdGlvbnMge1xuICBjYXB0dXJlPzogYm9vbGVhbjtcbiAgb25jZT86IGJvb2xlYW47XG4gIHBhc3NpdmU/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIEFkZHMgZXZlbnQgb2YgdHlwZSB0byBlbGVtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihcbiAgcmVmOiBFdmVudEhvbGRlcixcbiAgdHlwZTogc3RyaW5nLFxuICBsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lcixcbiAgb3B0aW9ucz86IEV2ZW50TGlzdGVuZXJPcHRpb25zLFxuKTogdm9pZCB7XG4gIHJlZi5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBBZGRzIGV2ZW50cyBvZiB0eXBlcyB0byBlbGVtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnMoXG4gIHJlZjogRXZlbnRIb2xkZXIsXG4gIHR5cGVzOiBzdHJpbmdbXSxcbiAgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXIsXG4gIG9wdGlvbnM/OiBFdmVudExpc3RlbmVyT3B0aW9ucyxcbik6IHZvaWQge1xuICB0eXBlcy5mb3JFYWNoKCh0eXBlKSA9PiB7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcihyZWYsIHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTtcbiAgfSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBldmVudCBvZiB0eXBlIGZyb20gZWxlbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gIHJlZjogRXZlbnRIb2xkZXIsXG4gIHR5cGU6IHN0cmluZyxcbiAgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXIsXG4gIG9wdGlvbnM/OiBFdmVudExpc3RlbmVyT3B0aW9ucyxcbik6IHZvaWQge1xuICByZWYucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBldmVudHMgb2YgdHlwZXMgZnJvbSBlbGVtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoXG4gIHJlZjogRXZlbnRIb2xkZXIsXG4gIHR5cGVzOiBzdHJpbmdbXSxcbiAgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXIsXG4gIG9wdGlvbnM/OiBFdmVudExpc3RlbmVyT3B0aW9ucyxcbik6IHZvaWQge1xuICB0eXBlcy5mb3JFYWNoKCh0eXBlKSA9PiB7XG4gICAgcmVmLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xuICB9KTtcbn1cblxuaW50ZXJmYWNlIEN1c3RvbUV2ZW50SW5pdDxUPiB7XG4gIGRldGFpbD86IFQ7XG4gIGJ1YmJsZXM/OiBib29sZWFuO1xuICBjYW5jZWxhYmxlPzogYm9vbGVhbjtcbiAgY29tcG9zZWQ/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIFRyaWdnZXJzIGV2ZW50IGFuZCByZXR1cm5zIGZhbHNlIGlmIHRoZSBldmVudCBpcyBjYW5jZWxsZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmlnZ2VyRXZlbnQ8VD4oXG4gIHJlZjogRXZlbnRIb2xkZXIsXG4gIHR5cGU6IHN0cmluZyxcbiAgb3B0aW9ucz86IEN1c3RvbUV2ZW50SW5pdDxUPixcbik6IGJvb2xlYW4ge1xuICByZXR1cm4gcmVmLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KHR5cGUsIG9wdGlvbnMpKTtcbn1cblxuLyoqXG4gKiBUcmlnZ2VycyBldmVudHMgYW5kIHJldHVybnMgZmFsc2UgaWYgYW55IG9mIHRoZSBldmVudCBpc1xuICogY2FuY2VsbGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJpZ2dlckV2ZW50czxUPihcbiAgcmVmOiBFdmVudEhvbGRlcixcbiAgdHlwZXM6IHN0cmluZ1tdLFxuICBvcHRpb25zPzogQ3VzdG9tRXZlbnRJbml0PFQ+LFxuKTogYm9vbGVhbiB7XG4gIHJldHVybiB0eXBlcy5ldmVyeSgodHlwZSkgPT4gdHJpZ2dlckV2ZW50KHJlZiwgdHlwZSwgb3B0aW9ucykpO1xufVxuIiwiZW51bSBFdmVudCB7XG4gIGZsaXBTdGFydCA9ICdmbGlwc3RhcnQnLFxuICBmbGlwQ2FuZGlkYXRlU3RhcnQgPSAnZmxpcGNhbmRpZGF0ZXN0YXJ0JyxcbiAgZmxpcENhbmRpZGF0ZUVuZCA9ICdmbGlwY2FuZGlkYXRlZW5kJyxcbiAgZmxpcEVuZCA9ICdmbGlwZW5kJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgRXZlbnQ7XG4iLCJjb25zdCB0ZW1wQ2FuZGlkYXRlQ3NzID0gYFxuICA6aG9zdCB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICByaWdodDogMDtcbiAgICBib3R0b206IDA7XG4gICAgbGVmdDogMDtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgfVxuXG4gIHNsb3Qge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICB9XG5gO1xuXG5pbnRlcmZhY2UgVGVtcE5vZGVPcHRpb25zIHtcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICBzbG90Pzogc3RyaW5nO1xuICBzdHlsZT86IHN0cmluZztcbiAgYXR0cmlidXRlcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIGlubmVySFRNTD86IHN0cmluZztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdGVtcCBub2RlLlxuICovXG5mdW5jdGlvbiBjcmVhdGVUZW1wTm9kZShcbiAgb3B0aW9uczogVGVtcE5vZGVPcHRpb25zID0ge30sXG4pOiBIVE1MRWxlbWVudCB7XG4gIGNvbnN0IHtcbiAgICBjbGFzc05hbWUsXG4gICAgc2xvdCxcbiAgICBzdHlsZSA9ICcnLFxuICAgIGF0dHJpYnV0ZXMgPSB7fSxcbiAgICBpbm5lckhUTUwgPSAnPHNsb3Q+PC9zbG90PicsXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCB0ZW1wTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBjb25zdCBzaGFkb3dSb290ID0gdGVtcE5vZGUuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuXG4gIHNoYWRvd1Jvb3QuaW5uZXJIVE1MID0gYFxuICAgIDxzdHlsZT5cbiAgICAgICR7dGVtcENhbmRpZGF0ZUNzc31cbiAgICAgICR7c3R5bGV9XG4gICAgPC9zdHlsZT5cbiAgICAke2lubmVySFRNTH1cbiAgYDtcblxuICBpZiAoY2xhc3NOYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICB0ZW1wTm9kZS5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gIH1cbiAgaWYgKHNsb3QgIT09IHVuZGVmaW5lZCkge1xuICAgIHRlbXBOb2RlLnNldEF0dHJpYnV0ZSgnc2xvdCcsIHNsb3QpO1xuICB9XG5cbiAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgdGVtcE5vZGUuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHRlbXBOb2RlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVUZW1wTm9kZTtcbiIsImVudW0gQ2xhc3NOYW1lIHtcbiAgdGVtcCA9ICd0ZW1wJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2xhc3NOYW1lO1xuIiwiZW51bSBTbG90IHtcbiAgY3VycmVudCA9ICdjdXJyZW50JyxcbiAgdGVtcCA9ICd0ZW1wJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgU2xvdDtcbiIsImltcG9ydCB7IEZsaXBPcHRpb25zIH0gZnJvbSAnLic7XG5pbXBvcnQgRmxpcCBmcm9tICcuLi8uLi9mbGlwJztcbmltcG9ydCBjcmVhdGVUZW1wTm9kZSBmcm9tICcuLi8uLi91dGlscy9jcmVhdGVUZW1wTm9kZSc7XG5pbXBvcnQgeyB0cmlnZ2VyRXZlbnQgfSBmcm9tICcuLi8uLi91dGlscy9ldmVudEhhbmRsZXInO1xuaW1wb3J0IENsYXNzTmFtZSBmcm9tICcuLi8uLi92YWx1ZXMvY2xhc3NOYW1lJztcbmltcG9ydCBFdmVudCBmcm9tICcuLi8uLi92YWx1ZXMvZXZlbnQnO1xuaW1wb3J0IFNsb3QgZnJvbSAnLi4vLi4vdmFsdWVzL3Nsb3QnO1xuaW1wb3J0IHsgQ2FuZGlkYXRlSW5mbyB9IGZyb20gJy4uL2dldENhbmRpZGF0ZUluZm8nO1xuaW1wb3J0IHsgRmxpcEFuaW1hdGlvbk9wdGlvbiB9IGZyb20gJy4vZmxpcEFuaW1hdGlvbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxpcE9uZUNhbmRpZGF0ZU9wdGlvbnMgZXh0ZW5kcyBSZXF1aXJlZDxGbGlwT3B0aW9ucz4ge1xuICBsYXN0Q2FuZGlkYXRlSW5mbzogQ2FuZGlkYXRlSW5mbztcbiAgbmV4dENhbmRpZGF0ZUluZm86IENhbmRpZGF0ZUluZm87XG59XG5cbi8qKlxuICogRmxpcHMgY2FyZCBvbmNlLlxuICovXG5hc3luYyBmdW5jdGlvbiBmbGlwT25lQ2FuZGlkYXRlKFxuICB0aGlzOiBGbGlwLFxuICBvcHRpb25zOiBGbGlwT25lQ2FuZGlkYXRlT3B0aW9ucyxcbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IG5leHRDYW5kaWRhdGVJbmZvIH0gPSBvcHRpb25zO1xuICBjb25zdCB7XG4gICAgaW5kZXg6IG5leHRJbmRleCxcbiAgfSA9IG5leHRDYW5kaWRhdGVJbmZvO1xuICBjb25zdCB0ZW1wQ2FuZGlkYXRlTm9kZSA9IGNyZWF0ZVRlbXBOb2RlKHtcbiAgICBjbGFzc05hbWU6IENsYXNzTmFtZS50ZW1wLFxuICAgIHNsb3Q6IFNsb3QudGVtcCxcbiAgfSk7XG4gIGNvbnN0IGxhc3RUZW1wQ2FyZCA9IHRoaXMucXVlcnlTZWxlY3RvcihgLiR7Q2xhc3NOYW1lLnRlbXB9YCk7XG5cbiAgaWYgKGxhc3RUZW1wQ2FyZCkge1xuICAgIGxhc3RUZW1wQ2FyZC5yZW1vdmUoKTtcbiAgfVxuXG4gIHRoaXMuaW5kZXggPSBuZXh0SW5kZXg7XG4gIHRoaXMuYXBwZW5kKHRlbXBDYW5kaWRhdGVOb2RlKTtcblxuICBjb25zdCBwYXNzRmxpcENhcmRTdGFydEV2ZW50ID0gdHJpZ2dlckV2ZW50PEZsaXBBbmltYXRpb25PcHRpb24+KFxuICAgIHRoaXMsXG4gICAgRXZlbnQuZmxpcENhbmRpZGF0ZVN0YXJ0LFxuICAgIHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgY29tcG9zZWQ6IHRydWUsXG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgdGVtcENhbmRpZGF0ZU5vZGUsXG4gICAgICB9LFxuICAgIH0sXG4gICk7XG5cbiAgaWYgKHBhc3NGbGlwQ2FyZFN0YXJ0RXZlbnQpIHtcbiAgICBhd2FpdCB0aGlzLmZsaXBBbmltYXRpb24oe1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIHRlbXBDYW5kaWRhdGVOb2RlLFxuICAgIH0pO1xuICB9XG5cbiAgdHJpZ2dlckV2ZW50PEZsaXBBbmltYXRpb25PcHRpb24+KFxuICAgIHRoaXMsXG4gICAgRXZlbnQuZmxpcENhbmRpZGF0ZUVuZCxcbiAgICB7XG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogZmFsc2UsXG4gICAgICBjb21wb3NlZDogdHJ1ZSxcbiAgICAgIGRldGFpbDoge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICB0ZW1wQ2FuZGlkYXRlTm9kZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgKTtcbiAgdGVtcENhbmRpZGF0ZU5vZGUucmVtb3ZlKCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZsaXBPbmVDYW5kaWRhdGU7XG4iLCJpbXBvcnQgRmxpcCBmcm9tICcuLi8uLi9mbGlwJztcbmltcG9ydCB7IHRyaWdnZXJFdmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL2V2ZW50SGFuZGxlcic7XG5pbXBvcnQgRGlyZWN0aW9uIGZyb20gJy4uLy4uL3ZhbHVlcy9kaXJlY3Rpb24nO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4uLy4uL3ZhbHVlcy9ldmVudCc7XG5pbXBvcnQgeyBDYW5kaWRhdGVJbmZvIH0gZnJvbSAnLi4vZ2V0Q2FuZGlkYXRlSW5mbyc7XG5pbXBvcnQgeyBHZXROZXh0Q2FuZGlkYXRlT3B0aW9ucyB9IGZyb20gJy4uL2dldE5leHRDYW5kaWRhdGVJbmRleCc7XG5pbXBvcnQgZmxpcE9uZUNhbmRpZGF0ZSBmcm9tICcuL2ZsaXBPbmVDYW5kaWRhdGUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZsaXBPcHRpb25zIGV4dGVuZHMgR2V0TmV4dENhbmRpZGF0ZU9wdGlvbnMge1xuICBkaXJlY3Q/OiBib29sZWFuO1xuICBkaXJlY3Rpb24/OiBEaXJlY3Rpb247XG4gIGR1cmF0aW9uPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZsaXBEZXRhaWwgZXh0ZW5kcyBSZXF1aXJlZDxGbGlwT3B0aW9ucz4ge1xuICBsYXN0Q2FuZGlkYXRlSW5mbzogQ2FuZGlkYXRlSW5mbztcbiAgdGFyZ2V0Q2FuZGlkYXRlSW5mbzogQ2FuZGlkYXRlSW5mbztcbn1cblxudHlwZSBGbGlwU291cmNlID0gbnVtYmVyIHwgc3RyaW5nIHwgSFRNTEVsZW1lbnQgfCBudWxsO1xuXG4vKipcbiAqIEZsaXBzIHRvIHNwZWNpZmljIGNhbmRpZGF0ZS9pbmRleC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZmxpcDxcbiAgQTAgZXh0ZW5kcyBGbGlwU291cmNlIHwgRmxpcE9wdGlvbnMsXG4gIEExIGV4dGVuZHMgQTAgZXh0ZW5kcyBGbGlwT3B0aW9ucyA/IG5ldmVyIDogRmxpcE9wdGlvbnMsXG4+KFxuICB0aGlzOiBGbGlwLFxuICBhcmcwPzogQTAsXG4gIGFyZzE/OiBBMSxcbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBvcHRpb25zOiBGbGlwT3B0aW9ucyA9ICh0eXBlb2YgYXJnMCA9PT0gJ29iamVjdCcgJiYgIShhcmcwIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpXG4gICAgPyBhcmcwXG4gICAgOiBhcmcxXG4gICkgPz8ge307XG4gIGNvbnN0IHtcbiAgICBtb2RlID0gdGhpcy5tb2RlLFxuICAgIGRpcmVjdCA9IGZhbHNlLFxuICAgIGRpZmZlcmVudCA9IHRoaXMuY2FuZGlkYXRlc0NhdGNoLmxlbmd0aCA+IDEsXG4gICAgZHVyYXRpb24gPSB0aGlzLmR1cmF0aW9uLFxuICAgIGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uLFxuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgdGFyZ2V0U291cmNlID0gKGFyZzAgPT09IG9wdGlvbnMgfHwgYXJnMCA9PT0gdW5kZWZpbmVkXG4gICAgPyB0aGlzLmdldE5leHRDYW5kaWRhdGVJbmRleCh7IGRpZmZlcmVudCwgbW9kZSB9KVxuICAgIDogYXJnMFxuICApIGFzIG51bWJlcjtcbiAgY29uc3QgdGFyZ2V0Q2FuZGlkYXRlSW5mbyA9IHRoaXMuZ2V0Q2FuZGlkYXRlSW5mbyh0YXJnZXRTb3VyY2UpO1xuICBjb25zdCB7XG4gICAgaW5kZXg6IHRhcmdldEluZGV4LFxuICAgIG5vZGU6IHRhcmdldE5vZGUsXG4gIH0gPSB0YXJnZXRDYW5kaWRhdGVJbmZvO1xuXG4gIGlmICh0YXJnZXROb2RlID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKGBUYXJnZXQgY2FuZGlkYXRlIGRvZXNuJ3QgZXhpc3Q6ICR7dGFyZ2V0U291cmNlfWApO1xuICB9XG5cbiAgY29uc3QgbGFzdENhbmRpZGF0ZUluZm8gPSB0aGlzLmdldENhbmRpZGF0ZUluZm8odGhpcy5pbmRleCk7XG4gIGNvbnN0IHBhc3NTdGFydEV2ZW50ID0gdHJpZ2dlckV2ZW50PEZsaXBEZXRhaWw+KFxuICAgIHRoaXMsXG4gICAgRXZlbnQuZmxpcFN0YXJ0LFxuICAgIHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgY29tcG9zZWQ6IHRydWUsXG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgbW9kZSxcbiAgICAgICAgZGlyZWN0LFxuICAgICAgICBkaWZmZXJlbnQsXG4gICAgICAgIGR1cmF0aW9uLFxuICAgICAgICBkaXJlY3Rpb24sXG4gICAgICAgIGxhc3RDYW5kaWRhdGVJbmZvLFxuICAgICAgICB0YXJnZXRDYW5kaWRhdGVJbmZvLFxuICAgICAgfSxcbiAgICB9LFxuICApO1xuXG4gIGlmICghcGFzc1N0YXJ0RXZlbnQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoZGlyZWN0KSB7XG4gICAgYXdhaXQgZmxpcE9uZUNhbmRpZGF0ZS5jYWxsKHRoaXMsIHtcbiAgICAgIG1vZGUsXG4gICAgICBkaXJlY3QsXG4gICAgICBkaWZmZXJlbnQsXG4gICAgICBkdXJhdGlvbixcbiAgICAgIGRpcmVjdGlvbixcbiAgICAgIGxhc3RDYW5kaWRhdGVJbmZvLFxuICAgICAgbmV4dENhbmRpZGF0ZUluZm86IHRhcmdldENhbmRpZGF0ZUluZm8sXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qge1xuICAgICAgbWluRmxpcHMsXG4gICAgICBtYXhGbGlwcyxcbiAgICB9ID0gdGhpcztcbiAgICBjb25zdCBmbGlwTmV4dCA9IGFzeW5jICh0aW1lcyA9IDEpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgIGNvbnN0IG5leHRJbmRleCA9ICh0aW1lcyA8IG1heEZsaXBzXG4gICAgICAgID8gKFxuICAgICAgICAgIHRoaXMuZ2V0TmV4dENhbmRpZGF0ZUluZGV4KHtcbiAgICAgICAgICAgIG1vZGUsXG4gICAgICAgICAgICBkaWZmZXJlbnQ6IHRpbWVzIDwgbWluRmxpcHMsXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICA6IHRhcmdldEluZGV4XG4gICAgICApO1xuICAgICAgY29uc3QgbmV4dENhbmRpZGF0ZUluZm8gPSB0aGlzLmdldENhbmRpZGF0ZUluZm8obmV4dEluZGV4KTtcbiAgICAgIGNvbnN0IGN1cnJlbnRDYW5kaWRhdGVJbmZvID0gdGhpcy5nZXRDYW5kaWRhdGVJbmZvKHRoaXMuaW5kZXgpO1xuXG4gICAgICBhd2FpdCBmbGlwT25lQ2FuZGlkYXRlLmNhbGwodGhpcywge1xuICAgICAgICBtb2RlLFxuICAgICAgICBkaXJlY3QsXG4gICAgICAgIGRpZmZlcmVudCxcbiAgICAgICAgZHVyYXRpb24sXG4gICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgbGFzdENhbmRpZGF0ZUluZm86IGN1cnJlbnRDYW5kaWRhdGVJbmZvLFxuICAgICAgICBuZXh0Q2FuZGlkYXRlSW5mbyxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAobmV4dEluZGV4ICE9PSB0YXJnZXRJbmRleCkge1xuICAgICAgICBhd2FpdCBmbGlwTmV4dCh0aW1lcyArIDEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBhd2FpdCBmbGlwTmV4dCgpO1xuICB9XG5cbiAgdHJpZ2dlckV2ZW50PEZsaXBEZXRhaWw+KFxuICAgIHRoaXMsXG4gICAgRXZlbnQuZmxpcEVuZCxcbiAgICB7XG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogZmFsc2UsXG4gICAgICBjb21wb3NlZDogdHJ1ZSxcbiAgICAgIGRldGFpbDoge1xuICAgICAgICBtb2RlLFxuICAgICAgICBkaXJlY3QsXG4gICAgICAgIGRpZmZlcmVudCxcbiAgICAgICAgZHVyYXRpb24sXG4gICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgbGFzdENhbmRpZGF0ZUluZm8sXG4gICAgICAgIHRhcmdldENhbmRpZGF0ZUluZm8sXG4gICAgICB9LFxuICAgIH0sXG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZsaXA7XG4iLCJlbnVtIERpcmVjdGlvbiB7XG4gIHVwID0gJ3VwJyxcbiAgZG93biA9ICdkb3duJyxcbiAgbGVmdCA9ICdsZWZ0JyxcbiAgcmlnaHQgPSAncmlnaHQnLFxufVxuXG5leHBvcnQgZGVmYXVsdCBEaXJlY3Rpb247XG4iLCIvKipcbiAqIFJldHVybnMgY2xvbmVkIGNhbmRpZGF0ZSBlbGVtZW50LlxuICovXG5mdW5jdGlvbiBjbG9uZU5vZGUobm9kZTogTm9kZSk6IEhUTUxFbGVtZW50IHtcbiAgY29uc3QgbmV3Tm9kZSA9IG5vZGUuY2xvbmVOb2RlKGZhbHNlKTtcblxuICAvLyBjYW52YXNcbiAgaWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgIGNvbnN0IG5ld0NhbnZhcyA9IG5ld05vZGUgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG5cbiAgICBuZXdDYW52YXMud2lkdGggPSBub2RlLndpZHRoO1xuICAgIG5ld0NhbnZhcy5oZWlnaHQgPSBub2RlLmhlaWdodDtcbiAgICBuZXdDYW52YXMuZ2V0Q29udGV4dCgnMmQnKT8uZHJhd0ltYWdlPy4obm9kZSwgMCwgMCk7XG4gIH1cblxuICAvLyBjaGlsZHJlblxuICBub2RlLmNoaWxkTm9kZXMuZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICBuZXdOb2RlLmFwcGVuZENoaWxkKGNsb25lTm9kZShjaGlsZCkpO1xuICB9KTtcblxuICByZXR1cm4gbmV3Tm9kZSBhcyBIVE1MRWxlbWVudDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xvbmVOb2RlO1xuIiwidHlwZSBQcmVmaXggPSAnd2Via2l0JyB8ICdvJyB8ICdtcycgfCAnbW96JztcblxuLyoqXG4gKiBSZXR1cm5zIHByZWZpeGVkIENTUyB0ZXh0LlxuICovXG5mdW5jdGlvbiBwcmVmaXhDc3MoY3NzOiBzdHJpbmcsIHByZWZpeHM6IFByZWZpeCB8IFByZWZpeFtdKTogc3RyaW5nIHtcbiAgY29uc3QgaGVhZCA9IC9eQC8udGVzdChjc3MpID8gJ0AtJyA6ICctJztcbiAgY29uc3QgdGV4dCA9IGNzc1xuICAgIC5yZXBsYWNlKC9eQC8sICcnKVxuICAgIC5yZXBsYWNlKC87PyQvLCAnOycpO1xuXG4gIHJldHVybiAoQXJyYXkuaXNBcnJheShwcmVmaXhzKSA/IHByZWZpeHMgOiBbcHJlZml4c10pXG4gICAgLm1hcCgocHJlZml4KSA9PiBgJHtoZWFkfSR7cHJlZml4fS0ke3RleHR9YClcbiAgICAuY29uY2F0KGNzcylcbiAgICAuam9pbignXFxuJyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHByZWZpeENzcztcbiIsImltcG9ydCBGbGlwIGZyb20gJy4uLy4uL2ZsaXAnO1xuaW1wb3J0IGNsb25lTm9kZSBmcm9tICcuLi8uLi91dGlscy9jbG9uZU5vZGUnO1xuaW1wb3J0IGNyZWF0ZVRlbXBOb2RlIGZyb20gJy4uLy4uL3V0aWxzL2NyZWF0ZVRlbXBOb2RlJztcbmltcG9ydCBwcmVmaXhDc3MgZnJvbSAnLi4vLi4vdXRpbHMvcHJlZml4Q3NzJztcbmltcG9ydCBEaXJlY3Rpb24gZnJvbSAnLi4vLi4vdmFsdWVzL2RpcmVjdGlvbic7XG5pbXBvcnQgeyBGbGlwQW5pbWF0aW9uT3B0aW9uIH0gZnJvbSAnLi9mbGlwQW5pbWF0aW9uJztcblxudHlwZSBTdHlsZUdldHRlciA9IChmbGlwOiBGbGlwKSA9PiBzdHJpbmc7XG5cbmNvbnN0IGdldEJhY2tncm91bmRTdHlsZTogU3R5bGVHZXR0ZXIgPSAoKSA9PiAoYFxuICA6aG9zdCB7XG4gICAgLS1yaWdodC14LWxlZnQ6IDUwJTtcbiAgICAtLXJpZ2h0LXgtcmlnaHQ6IDEwMHZ3O1xuICAgIC0tbGVmdC14LWxlZnQ6IC0xMDB2dztcbiAgICAtLWxlZnQteC1yaWdodDogNTAlO1xuXG4gICAgJHtwcmVmaXhDc3MoYGNsaXAtcGF0aDogcG9seWdvbihcbiAgICAgIHZhcigtLXgtbGVmdCkgLTEwMHZoLFxuICAgICAgdmFyKC0teC1yaWdodCkgLTEwMHZoLFxuICAgICAgdmFyKC0teC1yaWdodCkgY2FsYygxMDAlICsgMTAwdmgpLFxuICAgICAgdmFyKC0teC1sZWZ0KSBjYWxjKDEwMCUgKyAxMDB2aClcbiAgICApO2AsICd3ZWJraXQnKX1cbiAgfVxuYCk7XG5cbmNvbnN0IGdldENhbmRpZGF0ZVN0eWxlOiBTdHlsZUdldHRlciA9IChmbGlwKSA9PiAoYFxuICAke3ByZWZpeENzcyhgQGtleWZyYW1lcyBmbGlwIHtcbiAgICAwJSB7XG4gICAgICAke3ByZWZpeENzcygndHJhbnNmb3JtOiBwZXJzcGVjdGl2ZSh2YXIoLS1ob3JpLXBlcnNwZWN0aXZlKSkgcm90YXRlWSgwKTsnLCAnd2Via2l0Jyl9XG4gICAgfVxuICAgIDEwMCUge1xuICAgICAgJHtwcmVmaXhDc3MoJ3RyYW5zZm9ybTogcGVyc3BlY3RpdmUodmFyKC0taG9yaS1wZXJzcGVjdGl2ZSkpIHJvdGF0ZVkodmFyKC0tZW5kLWRlZykpOycsICd3ZWJraXQnKX1cbiAgICB9XG4gIH1gLCAnd2Via2l0Jyl9XG5cbiAgOmhvc3Qge1xuICAgIC0taG9yaS1wZXJzcGVjdGl2ZTogJHtmbGlwLnBlcnNwZWN0aXZlfTtcbiAgICAtLXJpZ2h0LXgtbGVmdDogNTAlO1xuICAgIC0tcmlnaHQteC1yaWdodDogY2FsYygxMDAlICsgMTAwdncpO1xuICAgIC0tbGVmdC14LWxlZnQ6IC0xMDB2dztcbiAgICAtLWxlZnQteC1yaWdodDogNTAlO1xuICAgIC0tbGVmdC1lbmQtZGVnOiAtMTgwZGVnO1xuICAgIC0tcmlnaHQtZW5kLWRlZzogMTgwZGVnO1xuXG4gICAgJHtwcmVmaXhDc3MoYGNsaXAtcGF0aDogcG9seWdvbihcbiAgICAgIHZhcigtLXN0YXJ0LXgtbGVmdCkgLTEwMHZoLFxuICAgICAgdmFyKC0tc3RhcnQteC1yaWdodCkgLTEwMHZoLFxuICAgICAgdmFyKC0tc3RhcnQteC1yaWdodCkgY2FsYygxMDAlICsgMTAwdmgpLFxuICAgICAgdmFyKC0tc3RhcnQteC1sZWZ0KSBjYWxjKDEwMCUgKyAxMDB2aClcbiAgICApO2AsICd3ZWJraXQnKX1cbiAgICAke3ByZWZpeENzcygnYW5pbWF0aW9uOiBmbGlwIHZhcigtLWR1cmF0aW9uKSBmb3J3YXJkcyBsaW5lYXI7JywgJ3dlYmtpdCcpfVxuICB9XG5gKTtcblxuY29uc3QgZ2V0TmV4dENhbmRpZGF0ZVN0eWxlOiBTdHlsZUdldHRlciA9ICgpID0+IChgXG4gICR7cHJlZml4Q3NzKGBAa2V5ZnJhbWVzIGNsaXAtbmV4dCB7XG4gICAgMCUgeyBvcGFjaXR5OiAwIH1cbiAgICA1MCUsIDEwMCUgeyBvcGFjaXR5OiAxIH1cbiAgfWAsICd3ZWJraXQnKX1cblxuICA6aG9zdCB7XG4gICAgJHtwcmVmaXhDc3MoJ3RyYW5zZm9ybTogcm90YXRlWSgxODBkZWcpOycsICd3ZWJraXQnKX1cbiAgICAke3ByZWZpeENzcygnYW5pbWF0aW9uOiBjbGlwLW5leHQgdmFyKC0tZHVyYXRpb24pIGZvcndhcmRzIHN0ZXBzKDEsIGVuZCk7JywgJ3dlYmtpdCcpfVxuICB9XG5gKTtcblxuY29uc3QgZ2V0TGFzdENhbmRpZGF0ZVN0eWxlOiBTdHlsZUdldHRlciA9ICgpID0+IChgXG4gICR7cHJlZml4Q3NzKGBAa2V5ZnJhbWVzIGNsaXAtbGFzdCB7XG4gICAgMCUgeyBvcGFjaXR5OiAxIH1cbiAgICA1MCUsIDEwMCUgeyBvcGFjaXR5OiAwIH1cbiAgfWAsICd3ZWJraXQnKX1cblxuICA6aG9zdCB7XG4gICAgJHtwcmVmaXhDc3MoJ2FuaW1hdGlvbjogY2xpcC1sYXN0IHZhcigtLWR1cmF0aW9uKSBmb3J3YXJkcyBzdGVwcygxLCBlbmQpOycsICd3ZWJraXQnKX1cbiAgfVxuYCk7XG5cbi8qKlxuICogRmxpcHMgY2FuZGlkYXRlIGhvcml6b250YWxseS5cbiAqL1xuZnVuY3Rpb24gZmxpcHBpbmdIb3Jpem9udGFsbHkoXG4gIHRoaXM6IEZsaXAsXG4gIG9wdGlvbnM6IEZsaXBBbmltYXRpb25PcHRpb24sXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qge1xuICAgIGR1cmF0aW9uLFxuICAgIGRpcmVjdGlvbixcbiAgICBsYXN0Q2FuZGlkYXRlSW5mbyxcbiAgICBuZXh0Q2FuZGlkYXRlSW5mbyxcbiAgICB0ZW1wQ2FuZGlkYXRlTm9kZSxcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHtcbiAgICBub2RlOiBsYXN0Q2FuZGlkYXRlTm9kZSxcbiAgfSA9IGxhc3RDYW5kaWRhdGVJbmZvO1xuICBjb25zdCBuZXh0Q2FuZGlkYXRlTm9kZSA9IG5leHRDYW5kaWRhdGVJbmZvLm5vZGUgYXMgSFRNTEVsZW1lbnQ7XG4gIGNvbnN0IGR1cmF0aW9uU2VjID0gZHVyYXRpb24gLyAxMDAwO1xuICBjb25zdCBkb21DYW5kaWRhdGUgPSBjcmVhdGVUZW1wTm9kZSh7IHN0eWxlOiBnZXRDYW5kaWRhdGVTdHlsZSh0aGlzKSB9KTtcbiAgY29uc3QgZG9tTmV4dCA9IGNyZWF0ZVRlbXBOb2RlKHsgc3R5bGU6IGdldE5leHRDYW5kaWRhdGVTdHlsZSh0aGlzKSB9KTtcbiAgY29uc3QgZG9tTmV4dENhbmRpZGF0ZSA9IGNsb25lTm9kZShuZXh0Q2FuZGlkYXRlTm9kZSk7XG5cbiAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICBkZWZhdWx0OlxuICAgIGNhc2UgRGlyZWN0aW9uLmxlZnQ6XG4gICAgICBkb21DYW5kaWRhdGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3RhcnQteC1sZWZ0JywgJ3ZhcigtLXJpZ2h0LXgtbGVmdCknKTtcbiAgICAgIGRvbUNhbmRpZGF0ZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zdGFydC14LXJpZ2h0JywgJ3ZhcigtLXJpZ2h0LXgtcmlnaHQpJyk7XG4gICAgICBkb21DYW5kaWRhdGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tZW5kLXgtbGVmdCcsICd2YXIoLS1sZWZ0LXgtbGVmdCknKTtcbiAgICAgIGRvbUNhbmRpZGF0ZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lbmQteC1yaWdodCcsICd2YXIoLS1sZWZ0LXgtcmlnaHQpJyk7XG4gICAgICBkb21DYW5kaWRhdGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tZW5kLWRlZycsICd2YXIoLS1sZWZ0LWVuZC1kZWcpJyk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgRGlyZWN0aW9uLnJpZ2h0OlxuICAgICAgZG9tQ2FuZGlkYXRlLnN0eWxlLnNldFByb3BlcnR5KCctLXN0YXJ0LXgtbGVmdCcsICd2YXIoLS1sZWZ0LXgtbGVmdCknKTtcbiAgICAgIGRvbUNhbmRpZGF0ZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zdGFydC14LXJpZ2h0JywgJ3ZhcigtLWxlZnQteC1yaWdodCknKTtcbiAgICAgIGRvbUNhbmRpZGF0ZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lbmQteC1sZWZ0JywgJ3ZhcigtLXJpZ2h0LXgtbGVmdCknKTtcbiAgICAgIGRvbUNhbmRpZGF0ZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lbmQteC1yaWdodCcsICd2YXIoLS1yaWdodC14LXJpZ2h0KScpO1xuICAgICAgZG9tQ2FuZGlkYXRlLnN0eWxlLnNldFByb3BlcnR5KCctLWVuZC1kZWcnLCAndmFyKC0tcmlnaHQtZW5kLWRlZyknKTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgZG9tQ2FuZGlkYXRlLnN0eWxlLnNldFByb3BlcnR5KCctLWR1cmF0aW9uJywgYCR7ZHVyYXRpb25TZWN9c2ApO1xuICBkb21OZXh0Q2FuZGlkYXRlLnJlbW92ZUF0dHJpYnV0ZSgnc2xvdCcpO1xuICBkb21OZXh0LmFwcGVuZChkb21OZXh0Q2FuZGlkYXRlKTtcbiAgZG9tQ2FuZGlkYXRlLmFwcGVuZChkb21OZXh0KTtcblxuICBpZiAobGFzdENhbmRpZGF0ZU5vZGUpIHtcbiAgICBjb25zdCBkb21CYWNrZ3JvdW5kID0gY3JlYXRlVGVtcE5vZGUoeyBzdHlsZTogZ2V0QmFja2dyb3VuZFN0eWxlKHRoaXMpIH0pO1xuICAgIGNvbnN0IGRvbUxhc3QgPSBjcmVhdGVUZW1wTm9kZSh7IHN0eWxlOiBnZXRMYXN0Q2FuZGlkYXRlU3R5bGUodGhpcykgfSk7XG4gICAgY29uc3QgZG9tTGFzdENhbmRpZGF0ZSA9IGNsb25lTm9kZShsYXN0Q2FuZGlkYXRlTm9kZSk7XG4gICAgY29uc3QgZG9tTGFzdEJhY2tncm91bmRDYW5kaWRhdGUgPSBjbG9uZU5vZGUobGFzdENhbmRpZGF0ZU5vZGUpO1xuXG4gICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICBjYXNlIERpcmVjdGlvbi5sZWZ0OlxuICAgICAgICBkb21CYWNrZ3JvdW5kLnN0eWxlLnNldFByb3BlcnR5KCctLXgtbGVmdCcsICd2YXIoLS1sZWZ0LXgtbGVmdCknKTtcbiAgICAgICAgZG9tQmFja2dyb3VuZC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS14LXJpZ2h0JywgJ3ZhcigtLWxlZnQteC1yaWdodCknKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgRGlyZWN0aW9uLnJpZ2h0OlxuICAgICAgICBkb21CYWNrZ3JvdW5kLnN0eWxlLnNldFByb3BlcnR5KCctLXgtbGVmdCcsICd2YXIoLS1yaWdodC14LWxlZnQpJyk7XG4gICAgICAgIGRvbUJhY2tncm91bmQuc3R5bGUuc2V0UHJvcGVydHkoJy0teC1yaWdodCcsICd2YXIoLS1yaWdodC14LXJpZ2h0KScpO1xuICAgIH1cblxuICAgIGRvbUxhc3RDYW5kaWRhdGUucmVtb3ZlQXR0cmlidXRlKCdzbG90Jyk7XG4gICAgZG9tTGFzdC5hcHBlbmQoZG9tTGFzdENhbmRpZGF0ZSk7XG4gICAgZG9tQ2FuZGlkYXRlLmFwcGVuZChkb21MYXN0KTtcbiAgICBkb21MYXN0QmFja2dyb3VuZENhbmRpZGF0ZS5yZW1vdmVBdHRyaWJ1dGUoJ3Nsb3QnKTtcbiAgICBkb21CYWNrZ3JvdW5kLmFwcGVuZChkb21MYXN0QmFja2dyb3VuZENhbmRpZGF0ZSk7XG4gICAgdGVtcENhbmRpZGF0ZU5vZGUuYXBwZW5kKGRvbUJhY2tncm91bmQpO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgdGVtcENhbmRpZGF0ZU5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdhbmltYXRpb25lbmQnLFxuICAgICAgKCkgPT4ge1xuICAgICAgICByZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICB9LFxuICAgICAgeyBvbmNlOiB0cnVlIH0sXG4gICAgKTtcbiAgICB0ZW1wQ2FuZGlkYXRlTm9kZS5hcHBlbmQoZG9tQ2FuZGlkYXRlKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZsaXBwaW5nSG9yaXpvbnRhbGx5O1xuIiwiaW1wb3J0IEZsaXAgZnJvbSAnLi4vLi4vZmxpcCc7XG5pbXBvcnQgcHJlZml4Q3NzIGZyb20gJy4uLy4uL3V0aWxzL3ByZWZpeENzcyc7XG5pbXBvcnQgRGlyZWN0aW9uIGZyb20gJy4uLy4uL3ZhbHVlcy9kaXJlY3Rpb24nO1xuaW1wb3J0IGNyZWF0ZVRlbXBOb2RlIGZyb20gJy4uLy4uL3V0aWxzL2NyZWF0ZVRlbXBOb2RlJztcbmltcG9ydCB7IEZsaXBBbmltYXRpb25PcHRpb24gfSBmcm9tICcuL2ZsaXBBbmltYXRpb24nO1xuaW1wb3J0IGNsb25lTm9kZSBmcm9tICcuLi8uLi91dGlscy9jbG9uZU5vZGUnO1xuXG50eXBlIFN0eWxlR2V0dGVyID0gKGZsaXA6IEZsaXApID0+IHN0cmluZztcblxuY29uc3QgZ2V0QmFja2dyb3VuZFN0eWxlOiBTdHlsZUdldHRlciA9ICgpID0+IChgXG4gIDpob3N0IHtcbiAgICAtLXVwcGVyLXktdG9wOiAtMTAwdmg7XG4gICAgLS11cHBlci15LWJvdHRvbTogNTAlO1xuICAgIC0tbG93ZXIteS10b3A6IDUwJTtcbiAgICAtLWxvd2VyLXktYm90dG9tOiBjYWxjKDEwMCUgKyAxMDB2aCk7XG5cbiAgICAke3ByZWZpeENzcyhgY2xpcC1wYXRoOiBwb2x5Z29uKFxuICAgICAgLTEwMHZ3IHZhcigtLXktdG9wKSxcbiAgICAgIGNhbGMoMTAwJSArIDEwMHZ3KSB2YXIoLS15LXRvcCksXG4gICAgICBjYWxjKDEwMCUgKyAxMDB2dykgdmFyKC0teS1ib3R0b20pLFxuICAgICAgLTEwMHZ3IHZhcigtLXktYm90dG9tKVxuICAgICk7YCwgJ3dlYmtpdCcpfVxuICB9XG5gKTtcblxuY29uc3QgZ2V0Q2FuZGlkYXRlU3R5bGU6IFN0eWxlR2V0dGVyID0gKGZsaXApID0+IChgXG4gICR7cHJlZml4Q3NzKGBAa2V5ZnJhbWVzIGZsaXAge1xuICAgIDAlIHtcbiAgICAgICR7cHJlZml4Q3NzKCd0cmFuc2Zvcm06IHBlcnNwZWN0aXZlKHZhcigtLXZlcnQtcGVyc3BlY3RpdmUpKSByb3RhdGVYKDApOycsICd3ZWJraXQnKX1cbiAgICB9XG4gICAgMTAwJSB7XG4gICAgICAke3ByZWZpeENzcygndHJhbnNmb3JtOiBwZXJzcGVjdGl2ZSh2YXIoLS12ZXJ0LXBlcnNwZWN0aXZlKSkgcm90YXRlWCh2YXIoLS1lbmQtZGVnKSk7JywgJ3dlYmtpdCcpfVxuICAgIH1cbiAgfWAsICd3ZWJraXQnKX1cblxuICA6aG9zdCB7XG4gICAgLS12ZXJ0LXBlcnNwZWN0aXZlOiAke2ZsaXAucGVyc3BlY3RpdmV9O1xuICAgIC0tdXBwZXIteS10b3A6IC0xMDB2aDtcbiAgICAtLXVwcGVyLXktYm90dG9tOiA1MCU7XG4gICAgLS1sb3dlci15LXRvcDogNTAlO1xuICAgIC0tbG93ZXIteS1ib3R0b206IGNhbGMoMTAwJSArIDEwMHZoKTtcbiAgICAtLWRvd24tZW5kLWRlZzogLTE4MGRlZztcbiAgICAtLXVwLWVuZC1kZWc6IDE4MGRlZztcblxuICAgICR7cHJlZml4Q3NzKGBjbGlwLXBhdGg6IHBvbHlnb24oXG4gICAgICAtMTAwdncgdmFyKC0tc3RhcnQteS10b3ApLFxuICAgICAgY2FsYygxMDAlICsgMTAwdncpIHZhcigtLXN0YXJ0LXktdG9wKSxcbiAgICAgIGNhbGMoMTAwJSArIDEwMHZ3KSB2YXIoLS1zdGFydC15LWJvdHRvbSksXG4gICAgICAtMTAwdncgdmFyKC0tc3RhcnQteS1ib3R0b20pXG4gICAgKTtgLCAnd2Via2l0Jyl9XG4gICAgJHtwcmVmaXhDc3MoJ2FuaW1hdGlvbjogZmxpcCB2YXIoLS1kdXJhdGlvbikgZm9yd2FyZHMgbGluZWFyOycsICd3ZWJraXQnKX1cbiAgfVxuYCk7XG5cbmNvbnN0IGdldE5leHRDYW5kaWRhdGVTdHlsZTogU3R5bGVHZXR0ZXIgPSAoKSA9PiAoYFxuICAke3ByZWZpeENzcyhgQGtleWZyYW1lcyBjbGlwLW5leHQge1xuICAgIDAlIHsgb3BhY2l0eTogMCB9XG4gICAgNTAlLCAxMDAlIHsgb3BhY2l0eTogMSB9XG4gIH1gLCAnd2Via2l0Jyl9XG5cbiAgOmhvc3Qge1xuICAgICR7cHJlZml4Q3NzKCd0cmFuc2Zvcm06IHJvdGF0ZVgoMTgwZGVnKTsnLCAnd2Via2l0Jyl9XG4gICAgJHtwcmVmaXhDc3MoJ2FuaW1hdGlvbjogY2xpcC1uZXh0IHZhcigtLWR1cmF0aW9uKSBmb3J3YXJkcyBzdGVwcygxLCBlbmQpOycsICd3ZWJraXQnKX1cbiAgfVxuYCk7XG5cbmNvbnN0IGdldExhc3RDYW5kaWRhdGVTdHlsZTogU3R5bGVHZXR0ZXIgPSAoKSA9PiAoYFxuICAke3ByZWZpeENzcyhgQGtleWZyYW1lcyBjbGlwLWxhc3Qge1xuICAgIDAlIHsgb3BhY2l0eTogMSB9XG4gICAgNTAlLCAxMDAlIHsgb3BhY2l0eTogMCB9XG4gIH1gLCAnd2Via2l0Jyl9XG5cbiAgOmhvc3Qge1xuICAgICR7cHJlZml4Q3NzKCdhbmltYXRpb246IGNsaXAtbGFzdCB2YXIoLS1kdXJhdGlvbikgZm9yd2FyZHMgc3RlcHMoMSwgZW5kKTsnLCAnd2Via2l0Jyl9XG4gIH1cbmApO1xuXG4vKipcbiAqIEZsaXBzIGNhbmRpZGF0ZSB2ZXJ0aWNhbGx5LlxuICovXG5mdW5jdGlvbiBmbGlwcGluZ1ZlcnRpY2FsbHkoXG4gIHRoaXM6IEZsaXAsXG4gIG9wdGlvbnM6IEZsaXBBbmltYXRpb25PcHRpb24sXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qge1xuICAgIGR1cmF0aW9uLFxuICAgIGRpcmVjdGlvbixcbiAgICBsYXN0Q2FuZGlkYXRlSW5mbyxcbiAgICBuZXh0Q2FuZGlkYXRlSW5mbyxcbiAgICB0ZW1wQ2FuZGlkYXRlTm9kZSxcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHtcbiAgICBub2RlOiBsYXN0Q2FuZGlkYXRlTm9kZSxcbiAgfSA9IGxhc3RDYW5kaWRhdGVJbmZvO1xuICBjb25zdCBuZXh0Q2FuZGlkYXRlTm9kZSA9IG5leHRDYW5kaWRhdGVJbmZvLm5vZGUgYXMgSFRNTEVsZW1lbnQ7XG4gIGNvbnN0IGR1cmF0aW9uU2VjID0gZHVyYXRpb24gLyAxMDAwO1xuICBjb25zdCBkb21DYW5kaWRhdGUgPSBjcmVhdGVUZW1wTm9kZSh7IHN0eWxlOiBnZXRDYW5kaWRhdGVTdHlsZSh0aGlzKSB9KTtcbiAgY29uc3QgZG9tTmV4dCA9IGNyZWF0ZVRlbXBOb2RlKHsgc3R5bGU6IGdldE5leHRDYW5kaWRhdGVTdHlsZSh0aGlzKSB9KTtcbiAgY29uc3QgZG9tTmV4dENhbmRpZGF0ZSA9IGNsb25lTm9kZShuZXh0Q2FuZGlkYXRlTm9kZSk7XG5cbiAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICBkZWZhdWx0OlxuICAgIGNhc2UgRGlyZWN0aW9uLmRvd246XG4gICAgICBkb21DYW5kaWRhdGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3RhcnQteS10b3AnLCAndmFyKC0tdXBwZXIteS10b3ApJyk7XG4gICAgICBkb21DYW5kaWRhdGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3RhcnQteS1ib3R0b20nLCAndmFyKC0tdXBwZXIteS1ib3R0b20pJyk7XG4gICAgICBkb21DYW5kaWRhdGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tZW5kLXktdG9wJywgJ3ZhcigtLWxvd2VyLXktdG9wKScpO1xuICAgICAgZG9tQ2FuZGlkYXRlLnN0eWxlLnNldFByb3BlcnR5KCctLWVuZC15LWJvdHRvbScsICd2YXIoLS1sb3dlci15LWJvdHRvbSknKTtcbiAgICAgIGRvbUNhbmRpZGF0ZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lbmQtZGVnJywgJ3ZhcigtLWRvd24tZW5kLWRlZyknKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBEaXJlY3Rpb24udXA6XG4gICAgICBkb21DYW5kaWRhdGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3RhcnQteS10b3AnLCAndmFyKC0tbG93ZXIteS10b3ApJyk7XG4gICAgICBkb21DYW5kaWRhdGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3RhcnQteS1ib3R0b20nLCAndmFyKC0tbG93ZXIteS1ib3R0b20pJyk7XG4gICAgICBkb21DYW5kaWRhdGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tZW5kLXktdG9wJywgJ3ZhcigtLXVwcGVyLXktdG9wKScpO1xuICAgICAgZG9tQ2FuZGlkYXRlLnN0eWxlLnNldFByb3BlcnR5KCctLWVuZC15LWJvdHRvbScsICd2YXIoLS11cHBlci15LWJvdHRvbSknKTtcbiAgICAgIGRvbUNhbmRpZGF0ZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lbmQtZGVnJywgJ3ZhcigtLXVwLWVuZC1kZWcpJyk7XG4gICAgICBicmVhaztcbiAgfVxuXG4gIGRvbUNhbmRpZGF0ZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1kdXJhdGlvbicsIGAke2R1cmF0aW9uU2VjfXNgKTtcbiAgZG9tTmV4dENhbmRpZGF0ZS5yZW1vdmVBdHRyaWJ1dGUoJ3Nsb3QnKTtcbiAgZG9tTmV4dC5hcHBlbmQoZG9tTmV4dENhbmRpZGF0ZSk7XG4gIGRvbUNhbmRpZGF0ZS5hcHBlbmQoZG9tTmV4dCk7XG5cbiAgaWYgKGxhc3RDYW5kaWRhdGVOb2RlKSB7XG4gICAgY29uc3QgZG9tQmFja2dyb3VuZCA9IGNyZWF0ZVRlbXBOb2RlKHsgc3R5bGU6IGdldEJhY2tncm91bmRTdHlsZSh0aGlzKSB9KTtcbiAgICBjb25zdCBkb21MYXN0ID0gY3JlYXRlVGVtcE5vZGUoeyBzdHlsZTogZ2V0TGFzdENhbmRpZGF0ZVN0eWxlKHRoaXMpIH0pO1xuICAgIGNvbnN0IGRvbUxhc3RDYW5kaWRhdGUgPSBjbG9uZU5vZGUobGFzdENhbmRpZGF0ZU5vZGUpO1xuICAgIGNvbnN0IGRvbUxhc3RCYWNrZ3JvdW5kQ2FuZGlkYXRlID0gY2xvbmVOb2RlKGxhc3RDYW5kaWRhdGVOb2RlKTtcblxuICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgICBkZWZhdWx0OlxuICAgICAgY2FzZSBEaXJlY3Rpb24uZG93bjpcbiAgICAgICAgZG9tQmFja2dyb3VuZC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS15LXRvcCcsICd2YXIoLS1sb3dlci15LXRvcCknKTtcbiAgICAgICAgZG9tQmFja2dyb3VuZC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS15LWJvdHRvbScsICd2YXIoLS1sb3dlci15LWJvdHRvbSknKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgRGlyZWN0aW9uLnVwOlxuICAgICAgICBkb21CYWNrZ3JvdW5kLnN0eWxlLnNldFByb3BlcnR5KCctLXktdG9wJywgJ3ZhcigtLXVwcGVyLXktdG9wKScpO1xuICAgICAgICBkb21CYWNrZ3JvdW5kLnN0eWxlLnNldFByb3BlcnR5KCctLXktYm90dG9tJywgJ3ZhcigtLXVwcGVyLXktYm90dG9tKScpO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBkb21MYXN0Q2FuZGlkYXRlLnJlbW92ZUF0dHJpYnV0ZSgnc2xvdCcpO1xuICAgIGRvbUxhc3QuYXBwZW5kKGRvbUxhc3RDYW5kaWRhdGUpO1xuICAgIGRvbUNhbmRpZGF0ZS5hcHBlbmQoZG9tTGFzdCk7XG4gICAgZG9tTGFzdEJhY2tncm91bmRDYW5kaWRhdGUucmVtb3ZlQXR0cmlidXRlKCdzbG90Jyk7XG4gICAgZG9tQmFja2dyb3VuZC5hcHBlbmQoZG9tTGFzdEJhY2tncm91bmRDYW5kaWRhdGUpO1xuICAgIHRlbXBDYW5kaWRhdGVOb2RlLmFwcGVuZChkb21CYWNrZ3JvdW5kKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIHRlbXBDYW5kaWRhdGVOb2RlLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnYW5pbWF0aW9uZW5kJyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgfSxcbiAgICAgIHsgb25jZTogdHJ1ZSB9LFxuICAgICk7XG4gICAgdGVtcENhbmRpZGF0ZU5vZGUuYXBwZW5kKGRvbUNhbmRpZGF0ZSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmbGlwcGluZ1ZlcnRpY2FsbHk7XG4iLCJpbXBvcnQgRmxpcCBmcm9tICcuLi8uLi9mbGlwJztcbmltcG9ydCBEaXJlY3Rpb24gZnJvbSAnLi4vLi4vdmFsdWVzL2RpcmVjdGlvbic7XG5pbXBvcnQgeyBGbGlwT25lQ2FuZGlkYXRlT3B0aW9ucyB9IGZyb20gJy4vZmxpcE9uZUNhbmRpZGF0ZSc7XG5pbXBvcnQgZmxpcHBpbmdIb3Jpem9udGFsbHkgZnJvbSAnLi9ob3Jpem9udGFsJztcbmltcG9ydCBmbGlwcGluZ1ZlcnRpY2FsbHkgZnJvbSAnLi92ZXJ0aWNhbCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxpcEFuaW1hdGlvbk9wdGlvbiBleHRlbmRzIFJlcXVpcmVkPEZsaXBPbmVDYW5kaWRhdGVPcHRpb25zPiB7XG4gIHRlbXBDYW5kaWRhdGVOb2RlOiBIVE1MRWxlbWVudDtcbn1cblxuLyoqXG4gKiBEb2VzIGZsaXBwaW5nIGFuaW1hdGlvbiBmcm9tIGxhc3QgY2FuZGlkYXRlIHRvIG5leHQgY2FuZGlkYXRlLlxuICovXG5hc3luYyBmdW5jdGlvbiBmbGlwQW5pbWF0aW9uKFxuICB0aGlzOiBGbGlwLFxuICBvcHRpb25zOiBGbGlwQW5pbWF0aW9uT3B0aW9uLFxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHsgZGlyZWN0aW9uIH0gPSBvcHRpb25zO1xuXG4gIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgZGlyZWN0aW9uOiAke2RpcmVjdGlvbn1gKTtcblxuICAgIGNhc2UgRGlyZWN0aW9uLnVwOlxuICAgIGNhc2UgRGlyZWN0aW9uLmRvd246XG4gICAgICByZXR1cm4gZmxpcHBpbmdWZXJ0aWNhbGx5LmNhbGwodGhpcywgb3B0aW9ucyk7XG5cbiAgICBjYXNlIERpcmVjdGlvbi5yaWdodDpcbiAgICBjYXNlIERpcmVjdGlvbi5sZWZ0OlxuICAgICAgcmV0dXJuIGZsaXBwaW5nSG9yaXpvbnRhbGx5LmNhbGwodGhpcywgb3B0aW9ucyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZmxpcEFuaW1hdGlvbjtcbiIsImltcG9ydCBGbGlwIGZyb20gJy4uL2ZsaXAnO1xuXG4vKipcbiAqIFJldHVybnMgY2FyZCBpbmRleCBieSByZWZlcmVuY2UuXG4gKi9cbmZ1bmN0aW9uIGdldENhbmRpZGF0ZUluZGV4KFxuICB0aGlzOiBGbGlwLFxuICBzb3VyY2U6IHN0cmluZyB8IEhUTUxFbGVtZW50IHwgbnVsbCxcbik6IG51bWJlciB7XG4gIC8vIG51bGxcbiAgaWYgKHNvdXJjZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIGNvbnN0IHsgY2FuZGlkYXRlc0NhdGNoOiBjYXJkc0NhdGNoIH0gPSB0aGlzO1xuXG4gIC8vIGNhcmQgbm9kZVxuICBpZiAoc291cmNlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICByZXR1cm4gY2FyZHNDYXRjaC5pbmRleE9mKHNvdXJjZSk7XG4gIH1cblxuICAvLyB2YWx1ZVxuICByZXR1cm4gY2FyZHNDYXRjaC5maW5kSW5kZXgoKGNhcmQpID0+IChcbiAgICBGbGlwLmdldENhbmRpZGF0ZVZhbHVlKGNhcmQpID09PSBzb3VyY2VcbiAgKSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGdldENhbmRpZGF0ZUluZGV4O1xuIiwiaW1wb3J0IEZsaXAgZnJvbSAnLi4vZmxpcCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FuZGlkYXRlSW5mbyB7XG4gIGluZGV4OiBudW1iZXI7XG4gIG5vZGU6IEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgdmFsdWU6IHN0cmluZyB8IG51bGw7XG59XG5cbi8qKlxuICogUmV0dXJucyBjYXJkIGluZm8gYnkgcmVmZXJlbmNlLlxuICovXG5mdW5jdGlvbiBnZXRDYW5kaWRhdGVJbmZvKFxuICB0aGlzOiBGbGlwLFxuICBzb3VyY2U6IG51bWJlciB8IHN0cmluZyB8IEhUTUxFbGVtZW50IHwgbnVsbCxcbik6IENhbmRpZGF0ZUluZm8ge1xuICAvLyBudWxsXG4gIGlmIChzb3VyY2UgPT09IG51bGwpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbm9kZTogbnVsbCxcbiAgICAgIGluZGV4OiAtMSxcbiAgICAgIHZhbHVlOiBudWxsLFxuICAgIH07XG4gIH1cblxuICAvLyBjYXJkIG5vZGVcbiAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmdldENhbmRpZGF0ZUluZGV4KHNvdXJjZSk7XG4gICAgY29uc3QgY2FyZCA9IGluZGV4ID09PSAtMSA/IG51bGwgOiBzb3VyY2U7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbm9kZTogY2FyZCxcbiAgICAgIGluZGV4LFxuICAgICAgdmFsdWU6IEZsaXAuZ2V0Q2FuZGlkYXRlVmFsdWUoY2FyZCksXG4gICAgfTtcbiAgfVxuXG4gIC8vIHZhbHVlXG4gIGlmICh0eXBlb2Ygc291cmNlID09PSAnc3RyaW5nJykge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5nZXRDYW5kaWRhdGVJbmRleChzb3VyY2UpO1xuICAgIGNvbnN0IGNhcmQgPSBpbmRleCA9PT0gLTEgPyBudWxsIDogdGhpcy5nZXRDYW5kaWRhdGVOb2RlKGluZGV4KTtcblxuICAgIHJldHVybiB7XG4gICAgICBub2RlOiBjYXJkLFxuICAgICAgaW5kZXgsXG4gICAgICB2YWx1ZTogRmxpcC5nZXRDYW5kaWRhdGVWYWx1ZShjYXJkKSxcbiAgICB9O1xuICB9XG5cbiAgLy8gaW5kZXhcbiAgY29uc3QgY2FyZCA9IHRoaXMuZ2V0Q2FuZGlkYXRlTm9kZShzb3VyY2UpO1xuXG4gIHJldHVybiB7XG4gICAgbm9kZTogY2FyZCxcbiAgICBpbmRleDogY2FyZCA9PT0gbnVsbCA/IC0xIDogc291cmNlLFxuICAgIHZhbHVlOiBGbGlwLmdldENhbmRpZGF0ZVZhbHVlKGNhcmQpLFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBnZXRDYW5kaWRhdGVJbmZvO1xuIiwiaW1wb3J0IEZsaXAgZnJvbSAnLi4vZmxpcCc7XG5cbi8qKlxuICogUmV0dXJucyBjYXJkIG5vZGUgYnkgcmVmZXJlbmNlLlxuICovXG5mdW5jdGlvbiBnZXRDYW5kaWRhdGVOb2RlKFxuICB0aGlzOiBGbGlwLFxuICBzb3VyY2U6IG51bWJlciB8IHN0cmluZyB8IG51bGwsXG4pOiBIVE1MRWxlbWVudCB8IG51bGwge1xuICAvLyBudWxsXG4gIGlmIChzb3VyY2UgPT09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIHZhbHVlXG4gIGlmICh0eXBlb2Ygc291cmNlID09PSAnc3RyaW5nJykge1xuICAgIGNvbnN0IGNhcmRSZXN1bHQgPSB0aGlzLmNhbmRpZGF0ZXNDYXRjaC5maW5kKChjYXJkKSA9PiAoXG4gICAgICBGbGlwLmdldENhbmRpZGF0ZVZhbHVlKGNhcmQpID09PSBzb3VyY2VcbiAgICApKTtcblxuICAgIHJldHVybiBjYXJkUmVzdWx0ID8/IG51bGw7XG4gIH1cblxuICAvLyBpbmRleFxuICByZXR1cm4gdGhpcy5jYW5kaWRhdGVzQ2F0Y2hbc291cmNlXSA/PyBudWxsO1xufVxuXG5leHBvcnQgZGVmYXVsdCBnZXRDYW5kaWRhdGVOb2RlO1xuIiwiaW1wb3J0IEZsaXAgZnJvbSAnLi4vZmxpcCc7XG5cbi8qKlxuICogUmV0dXJucyBjYXJkIHZhbHVlIGJ5IHJlZmVyZW5jZS5cbiAqL1xuZnVuY3Rpb24gZ2V0Q2FuZGlkYXRlVmFsdWUoXG4gIHRoaXM6IEZsaXAsXG4gIHNvdXJjZTogbnVtYmVyIHwgSFRNTEVsZW1lbnQgfCBudWxsLFxuKTogc3RyaW5nIHwgbnVsbCB7XG4gIC8vIG51bGxcbiAgaWYgKHNvdXJjZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gY2FyZCBub2RlXG4gIGlmIChzb3VyY2UgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgIHJldHVybiBGbGlwLmdldENhbmRpZGF0ZVZhbHVlKHNvdXJjZSk7XG4gIH1cblxuICAvLyBpbmRleFxuICByZXR1cm4gRmxpcC5nZXRDYW5kaWRhdGVWYWx1ZSh0aGlzLmNhbmRpZGF0ZXNDYXRjaFtzb3VyY2VdKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2V0Q2FuZGlkYXRlVmFsdWU7XG4iLCJlbnVtIE1vZGUge1xuICBsb29wID0gJ2xvb3AnLFxuICByYW5kb20gPSAncmFuZG9tJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgTW9kZTtcbiIsImltcG9ydCBGbGlwIGZyb20gJy4uL2ZsaXAnO1xuaW1wb3J0IE1vZGUgZnJvbSAnLi4vdmFsdWVzL21vZGUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEdldE5leHRDYW5kaWRhdGVPcHRpb25zIHtcbiAgZGlmZmVyZW50PzogYm9vbGVhbjtcbiAgbW9kZT86IE1vZGU7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW5kZXggb2YgbmV4dCBjYXJkLlxuICovXG5mdW5jdGlvbiBnZXROZXh0Q2FuZGlkYXRlSW5kZXgoXG4gIHRoaXM6IEZsaXAsXG4gIG9wdGlvbnM6IEdldE5leHRDYW5kaWRhdGVPcHRpb25zID0ge30sXG4pOiBudW1iZXIge1xuICBjb25zdCB7XG4gICAgZGlmZmVyZW50ID0gdGhpcy5jYW5kaWRhdGVzQ2F0Y2gubGVuZ3RoID4gMSxcbiAgICBtb2RlID0gdGhpcy5tb2RlLFxuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgeyBpbmRleCwgY2FuZGlkYXRlc0NhdGNoOiBjYXJkc0NhdGNoIH0gPSB0aGlzO1xuICBjb25zdCB7IGxlbmd0aCB9ID0gY2FyZHNDYXRjaDtcblxuICBzd2l0Y2ggKG1vZGUpIHtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBtb2RlOiAke21vZGV9YCk7XG5cbiAgICBjYXNlIE1vZGUubG9vcDoge1xuICAgICAgY29uc3QgbmV4dEluZGV4ID0gKGluZGV4ICsgMSkgJSBsZW5ndGg7XG5cbiAgICAgIHJldHVybiAobmV4dEluZGV4ID09PSBpbmRleCAmJiBkaWZmZXJlbnRcbiAgICAgICAgPyAtMVxuICAgICAgICA6IG5leHRJbmRleFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjYXNlIE1vZGUucmFuZG9tOiB7XG4gICAgICBzd2l0Y2ggKGxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgcmV0dXJuIC0xO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICByZXR1cm4gZGlmZmVyZW50ID8gLTEgOiB0aGlzLmluZGV4O1xuXG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICBsZXQgbmV4dEluZGV4ID0gLTE7XG5cbiAgICAgICAgICB3aGlsZSAoXG4gICAgICAgICAgICBuZXh0SW5kZXggPT09IC0xXG4gICAgICAgICAgICB8fCAobmV4dEluZGV4ID09PSBpbmRleCAmJiBkaWZmZXJlbnQpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBuZXh0SW5kZXggPSBNYXRoLmZsb29yKGxlbmd0aCAqIE1hdGgucmFuZG9tKCkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBuZXh0SW5kZXg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2V0TmV4dENhbmRpZGF0ZUluZGV4O1xuIiwiZW51bSBBdHRyaWJ1dGUge1xuICBpbmRleCA9ICdpbmRleCcsXG4gIHZhbHVlID0gJ3ZhbHVlJyxcbiAgbW9kZSA9ICdtb2RlJyxcbiAgZHVyYXRpb24gPSAnZHVyYXRpb24nLFxuICBkaXJlY3Rpb24gPSAnZGlyZWN0aW9uJyxcbiAgbWluRmxpcHMgPSAnbWluLWZsaXBzJyxcbiAgbWF4RmxpcHMgPSAnbWF4LWZsaXBzJyxcbiAgcGVyc3BlY3RpdmUgPSAncGVyc3BlY3RpdmUnLFxufVxuXG5leHBvcnQgZGVmYXVsdCBBdHRyaWJ1dGU7XG4iLCJpbXBvcnQgZmxpcCwgeyBGbGlwT3B0aW9ucyB9IGZyb20gJy4vbWV0aG9kcy9mbGlwJztcbmltcG9ydCBmbGlwQW5pbWF0aW9uIGZyb20gJy4vbWV0aG9kcy9mbGlwL2ZsaXBBbmltYXRpb24nO1xuaW1wb3J0IGdldENhbmRpZGF0ZUluZGV4IGZyb20gJy4vbWV0aG9kcy9nZXRDYW5kaWRhdGVJbmRleCc7XG5pbXBvcnQgZ2V0Q2FuZGlkYXRlSW5mbyBmcm9tICcuL21ldGhvZHMvZ2V0Q2FuZGlkYXRlSW5mbyc7XG5pbXBvcnQgZ2V0Q2FuZGlkYXRlTm9kZSBmcm9tICcuL21ldGhvZHMvZ2V0Q2FuZGlkYXRlTm9kZSc7XG5pbXBvcnQgZ2V0Q2FuZGlkYXRlVmFsdWUgZnJvbSAnLi9tZXRob2RzL2dldENhbmRpZGF0ZVZhbHVlJztcbmltcG9ydCBnZXROZXh0Q2FuZGlkYXRlSW5kZXggZnJvbSAnLi9tZXRob2RzL2dldE5leHRDYW5kaWRhdGVJbmRleCc7XG5pbXBvcnQgcmVnaXN0ZXJFbGVtZW50IGZyb20gJy4vdXRpbHMvcmVnaXN0ZXJFbGVtZW50JztcbmltcG9ydCBBdHRyaWJ1dGUgZnJvbSAnLi92YWx1ZXMvYXR0cmlidXRlJztcbmltcG9ydCBEaXJlY3Rpb24gZnJvbSAnLi92YWx1ZXMvZGlyZWN0aW9uJztcbmltcG9ydCBFdmVudCBmcm9tICcuL3ZhbHVlcy9ldmVudCc7XG5pbXBvcnQgTW9kZSBmcm9tICcuL3ZhbHVlcy9tb2RlJztcbmltcG9ydCBTbG90IGZyb20gJy4vdmFsdWVzL3Nsb3QnO1xuXG5jb25zdCBub2RlTmFtZSA9ICdmbGlwLXBhY2snO1xuXG5jb25zdCB7IGlzTmFOIH0gPSBnbG9iYWxUaGlzO1xuY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdEF0dHJpYnV0ZVZhbHVlcyA9IHtcbiAgW0F0dHJpYnV0ZS5tb2RlXTogTW9kZS5sb29wLFxuICBbQXR0cmlidXRlLmR1cmF0aW9uXTogNDAwLFxuICBbQXR0cmlidXRlLmRpcmVjdGlvbl06IERpcmVjdGlvbi5kb3duLFxuICBbQXR0cmlidXRlLmluZGV4XTogLTEsXG4gIFtBdHRyaWJ1dGUubWluRmxpcHNdOiAwLFxuICBbQXR0cmlidXRlLm1heEZsaXBzXTogSW5maW5pdHksXG59O1xuXG50ZW1wbGF0ZS5pbm5lckhUTUwgPSBgXG4gIDxzdHlsZT5cbiAgICA6aG9zdCB7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgfVxuXG4gICAgc2xvdCB7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICB6LWluZGV4OiAwO1xuICAgIH1cblxuICAgIHNsb3Q6bm90KFtuYW1lXSkge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gIDwvc3R5bGU+XG4gIDxmbGlwPlxuICAgIDxzbG90Pjwvc2xvdD5cbiAgICA8c2xvdCBuYW1lPVwiJHtTbG90LmN1cnJlbnR9XCI+PC9zbG90PlxuICAgIDxzbG90IG5hbWU9XCIke1Nsb3QudGVtcH1cIj48L3Nsb3Q+XG4gIDwvZmxpcD5cbmA7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxpcHBpbmdPcHRpb24ge1xuICBkdXJhdGlvbjogbnVtYmVyO1xuICBpbmRleDogbnVtYmVyO1xuICBsYXN0SW5kZXg6IG51bWJlcjtcbiAgbGFzdENhbmRpZGF0ZTogSFRNTEVsZW1lbnQgfCBudWxsO1xuICB0ZW1wQ2FuZGlkYXRlOiBIVE1MRWxlbWVudDtcbn1cblxuY2xhc3MgRmxpcCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgcHJvdGVjdGVkIGNhbmRpZGF0ZXNDYXRjaDogSFRNTEVsZW1lbnRbXSA9IFtdO1xuXG4gIHByb3RlY3RlZCByb290RWxlbWVudDogSFRNTEVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGNvbnN0IHNoYWRvd1Jvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcblxuICAgIHNoYWRvd1Jvb3QuYXBwZW5kKHRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcbiAgICB0aGlzLnJvb3RFbGVtZW50ID0gc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCdmbGlwJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgKHNoYWRvd1Jvb3QucXVlcnlTZWxlY3Rvcignc2xvdDpub3QoW25hbWVdKScpIGFzIEhUTUxTbG90RWxlbWVudClcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdzbG90Y2hhbmdlJywgKCkgPT4ge1xuICAgICAgICB0aGlzLmNhbmRpZGF0ZXNDYXRjaCA9IEFycmF5LmZyb20oXG4gICAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCc6c2NvcGUgPiA6bm90KFtzbG90PXRlbXBdKScpLFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHsgY2FuZGlkYXRlc0NhdGNoIH0gPSB0aGlzO1xuXG4gICAgICAgIGlmICh0aGlzLmluZGV4ID09PSAtMSAmJiB0aGlzLmhhc0F0dHJpYnV0ZShBdHRyaWJ1dGUudmFsdWUpKSB7XG4gICAgICAgICAgLy8gaW5pdGlhbGl6ZSBpbmRleCBieSB2YWx1ZVxuICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmdldEF0dHJpYnV0ZShBdHRyaWJ1dGUudmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaW5kZXggPj0gY2FuZGlkYXRlc0NhdGNoLmxlbmd0aCB8fCB0aGlzLmluZGV4IDwgMCkge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gY2FuZGlkYXRlc0NhdGNoLmxlbmd0aCA+IDAgPyAwIDogLTE7XG5cbiAgICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGdldCBESVJFQ1RJT04oKSB7XG4gICAgcmV0dXJuIHsgLi4uRGlyZWN0aW9uIH07XG4gIH1cblxuICBzdGF0aWMgZ2V0IE1PREUoKSB7XG4gICAgcmV0dXJuIHsgLi4uTW9kZSB9O1xuICB9XG5cbiAgc3RhdGljIGdldCBFVkVOVCgpIHtcbiAgICByZXR1cm4geyAuLi5FdmVudCB9O1xuICB9XG5cbiAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIEF0dHJpYnV0ZS5pbmRleCxcbiAgICAgIEF0dHJpYnV0ZS52YWx1ZSxcbiAgICBdO1xuICB9XG5cbiAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGF0dHJpYnV0ZU5hbWU6IEF0dHJpYnV0ZSkge1xuICAgIHN3aXRjaCAoYXR0cmlidXRlTmFtZSkge1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQXR0cmlidXRlLmluZGV4OlxuICAgICAgICBpZiAodGhpcy5oYXNBdHRyaWJ1dGUoQXR0cmlidXRlLmluZGV4KSkge1xuICAgICAgICAgIHRoaXMuaW5kZXggPSBOdW1iZXIodGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlLmluZGV4KSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQXR0cmlidXRlLnZhbHVlOlxuICAgICAgICBpZiAodGhpcy5oYXNBdHRyaWJ1dGUoQXR0cmlidXRlLnZhbHVlKSkge1xuICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmdldEF0dHJpYnV0ZShBdHRyaWJ1dGUudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHZhbHVlIG9mIGNhbmRpZGF0ZSBub2RlLlxuICAgKi9cbiAgc3RhdGljIGdldENhbmRpZGF0ZVZhbHVlKGNhbmRpZGF0ZTogSFRNTEVsZW1lbnQgfCBudWxsKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIGNhbmRpZGF0ZT8uZ2V0QXR0cmlidXRlPy4oQXR0cmlidXRlLnZhbHVlKSA/PyBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgY2FuZGlkYXRlIGVsZW1lbnRzLlxuICAgKi9cbiAgZ2V0IGNhbmRpZGF0ZXMoKTogSFRNTEVsZW1lbnRbXSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLmNhbmRpZGF0ZXNDYXRjaF07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBmbGlwcGluZyBtb2RlLlxuICAgKi9cbiAgZ2V0IG1vZGUoKTogTW9kZSB7XG4gICAgY29uc3QgbW9kZSA9IHRoaXMuZ2V0QXR0cmlidXRlKEF0dHJpYnV0ZS5tb2RlKSBhcyBNb2RlO1xuXG4gICAgcmV0dXJuIChtb2RlID09PSBudWxsIHx8ICFPYmplY3QudmFsdWVzKE1vZGUpLmluY2x1ZGVzKG1vZGUpXG4gICAgICA/IGRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNbQXR0cmlidXRlLm1vZGVdXG4gICAgICA6IG1vZGVcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgZmxpcHBpbmcgbW9kZS5cbiAgICovXG4gIHNldCBtb2RlKG1vZGU6IE1vZGUpIHtcbiAgICBpZiAoIU9iamVjdC52YWx1ZXMoTW9kZSkuaW5jbHVkZXMobW9kZSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgbW9kZTogJHttb2RlfWApO1xuICAgIH1cblxuICAgIHRoaXMuc2V0QXR0cmlidXRlKEF0dHJpYnV0ZS5tb2RlLCBtb2RlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGZsaXBwaW5nIGR1cmF0aW9uLlxuICAgKi9cbiAgZ2V0IGR1cmF0aW9uKCk6IG51bWJlciB7XG4gICAgY29uc3QgZHVyYXRpb24gPSB0aGlzLmdldEF0dHJpYnV0ZShBdHRyaWJ1dGUuZHVyYXRpb24pO1xuXG4gICAgcmV0dXJuIChkdXJhdGlvbiA9PT0gbnVsbCB8fCBkdXJhdGlvbi5sZW5ndGggPT09IDBcbiAgICAgID8gZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc1tBdHRyaWJ1dGUuZHVyYXRpb25dXG4gICAgICA6IE51bWJlcihkdXJhdGlvbilcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgZmxpcHBpbmcgZHVyYXRpb24uXG4gICAqL1xuICBzZXQgZHVyYXRpb24oZHVyYXRpb246IG51bWJlcikge1xuICAgIGlmIChpc05hTihkdXJhdGlvbikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgZHVyYXRpb246ICR7ZHVyYXRpb259YCk7XG4gICAgfSBlbHNlIGlmIChkdXJhdGlvbiA8IDApIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBEdXJhdGlvbiBzaG91bGQgbm90IGJlIGxlc3NlciB0aGFuIDA6ICR7ZHVyYXRpb259YCk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoQXR0cmlidXRlLmR1cmF0aW9uLCBgJHtkdXJhdGlvbn1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGZsaXBwaW5nIGRpcmVjdGlvbi5cbiAgICovXG4gIGdldCBkaXJlY3Rpb24oKTogRGlyZWN0aW9uIHtcbiAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmdldEF0dHJpYnV0ZShBdHRyaWJ1dGUuZGlyZWN0aW9uKSBhcyBEaXJlY3Rpb247XG5cbiAgICByZXR1cm4gKE9iamVjdC52YWx1ZXMoRGlyZWN0aW9uKS5pbmNsdWRlcyhkaXJlY3Rpb24pXG4gICAgICA/IGRpcmVjdGlvblxuICAgICAgOiBkZWZhdWx0QXR0cmlidXRlVmFsdWVzW0F0dHJpYnV0ZS5kaXJlY3Rpb25dXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGZsaXBwaW5nIGRpcmVjdGlvbi5cbiAgICovXG4gIHNldCBkaXJlY3Rpb24oZGlyZWN0aW9uOiBEaXJlY3Rpb24pIHtcbiAgICBpZiAoIU9iamVjdC52YWx1ZXMoRGlyZWN0aW9uKS5pbmNsdWRlcyhkaXJlY3Rpb24pKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIGRpcmVjdGlvbjogJHtkaXJlY3Rpb259YCk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoQXR0cmlidXRlLmRpcmVjdGlvbiwgZGlyZWN0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIG1pbiBmbGlwcy5cbiAgICovXG4gIGdldCBtaW5GbGlwcygpOiBudW1iZXIge1xuICAgIGNvbnN0IG1pbkZsaXBzID0gdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlLm1pbkZsaXBzKTtcblxuICAgIHJldHVybiAobWluRmxpcHMgPT09IG51bGwgfHwgbWluRmxpcHMubGVuZ3RoID09PSAwXG4gICAgICA/IGRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNbQXR0cmlidXRlLm1pbkZsaXBzXVxuICAgICAgOiBOdW1iZXIobWluRmxpcHMpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIG1pbiBmbGlwcy5cbiAgICovXG4gIHNldCBtaW5GbGlwcyhtaW5GbGlwczogbnVtYmVyKSB7XG4gICAgaWYgKGlzTmFOKG1pbkZsaXBzKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBtaW4gZmxpcHM6ICR7bWluRmxpcHN9YCk7XG4gICAgfSBlbHNlIGlmIChwYXJzZUludChgJHttaW5GbGlwc31gLCAxMCkgIT09IG1pbkZsaXBzKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBNaW4gZmxpcHMgc2hvdWxkIGJlIGFuIGludGVnZXI6ICR7bWluRmxpcHN9YCk7XG4gICAgfSBlbHNlIGlmIChtaW5GbGlwcyA8IDApIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBNaW4gZmxpcHMgc2hvdWxkIG5vdCBiZSBsZXNzZXIgdGhhbiAwOiAke21pbkZsaXBzfWApO1xuICAgIH1cblxuICAgIHRoaXMuc2V0QXR0cmlidXRlKEF0dHJpYnV0ZS5taW5GbGlwcywgYCR7bWluRmxpcHN9YCk7XG5cbiAgICBpZiAodGhpcy5tYXhGbGlwcyA8IG1pbkZsaXBzKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcbiAgICAgICAgJ1NldHRpbmcgbWluIGZsaXBzIHRoYXQgaXMgZ3JlYXRlciB0aGFuIG1heCBmbGlwcyBtaWdodCBjYXVzZSBmbGlwcGluZyBlcnJvcicsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIG1heCBmbGlwcy5cbiAgICovXG4gIGdldCBtYXhGbGlwcygpOiBudW1iZXIge1xuICAgIGNvbnN0IG1heEZsaXBzID0gdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlLm1heEZsaXBzKTtcblxuICAgIHJldHVybiAobWF4RmxpcHMgPT09IG51bGwgfHwgbWF4RmxpcHMubGVuZ3RoID09PSAwXG4gICAgICA/IGRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNbQXR0cmlidXRlLm1heEZsaXBzXVxuICAgICAgOiBOdW1iZXIobWF4RmxpcHMpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIG1heCBmbGlwcy5cbiAgICovXG4gIHNldCBtYXhGbGlwcyhtYXhGbGlwczogbnVtYmVyKSB7XG4gICAgaWYgKGlzTmFOKG1heEZsaXBzKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBtYXggZmxpcHM6ICR7bWF4RmxpcHN9YCk7XG4gICAgfSBlbHNlIGlmIChwYXJzZUludChgJHttYXhGbGlwc31gLCAxMCkgIT09IG1heEZsaXBzKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBNYXggZmxpcHMgc2hvdWxkIGJlIGFuIGludGVnZXI6ICR7bWF4RmxpcHN9YCk7XG4gICAgfSBlbHNlIGlmIChtYXhGbGlwcyA8IDApIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBNYXggZmxpcHMgc2hvdWxkIG5vdCBiZSBsZXNzZXIgdGhhbiAwOiAke21heEZsaXBzfWApO1xuICAgIH1cblxuICAgIHRoaXMuc2V0QXR0cmlidXRlKEF0dHJpYnV0ZS5tYXhGbGlwcywgYCR7bWF4RmxpcHN9YCk7XG5cbiAgICBpZiAodGhpcy5taW5GbGlwcyA+IG1heEZsaXBzKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcbiAgICAgICAgJ1NldHRpbmcgbWF4IGZsaXBzIHRoYXQgaXMgbGVzcyB0aGFuIG1pbiBmbGlwcyBtaWdodCBjYXVzZSBmbGlwcGluZyBlcnJvcicsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIDNEIHBlcnNwZWN0aXZlIHZhbHVlLlxuICAgKi9cbiAgZ2V0IHBlcnNwZWN0aXZlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgcGVyc3BlY3RpdmUgPSB0aGlzLmdldEF0dHJpYnV0ZShBdHRyaWJ1dGUucGVyc3BlY3RpdmUpO1xuXG4gICAgaWYgKHBlcnNwZWN0aXZlICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gcGVyc3BlY3RpdmU7XG4gICAgfVxuXG4gICAgY29uc3QgeyBjbGllbnRXaWR0aCwgY2xpZW50SGVpZ2h0IH0gPSB0aGlzO1xuICAgIGNvbnN0IHNpemUgPSAyICogTWF0aC5tYXgoY2xpZW50V2lkdGgsIGNsaWVudEhlaWdodCk7XG5cbiAgICByZXR1cm4gYCR7c2l6ZX1weGA7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyAzRCBwZXJzcGVjdGl2ZSB2YWx1ZS5cbiAgICovXG4gIHNldCBwZXJzcGVjdGl2ZShwZXJzcGVjdGl2ZTogc3RyaW5nKSB7XG4gICAgaWYgKHR5cGVvZiBwZXJzcGVjdGl2ZSA9PT0gJ3N0cmluZycgJiYgcGVyc3BlY3RpdmUubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoQXR0cmlidXRlLnBlcnNwZWN0aXZlLCBwZXJzcGVjdGl2ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgY3VycmVudCBpbmRleC5cbiAgICovXG4gIGdldCBpbmRleCgpOiBudW1iZXIge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlLmluZGV4KTtcblxuICAgIGlmIChpbmRleCA9PT0gbnVsbCB8fCBpbmRleC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBkZWZhdWx0QXR0cmlidXRlVmFsdWVzW0F0dHJpYnV0ZS5pbmRleF07XG4gICAgfVxuXG4gICAgcmV0dXJuIE51bWJlcihpbmRleCkgJSB0aGlzLmNhbmRpZGF0ZXMubGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgY3VycmVudCBpbmRleC5cbiAgICovXG4gIHNldCBpbmRleChpbmRleDogbnVtYmVyKSB7XG4gICAgaWYgKGlzTmFOKGluZGV4KSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBpbmRleDogJHtpbmRleH1gKTtcbiAgICB9IGVsc2UgaWYgKHBhcnNlSW50KGAke2luZGV4fWAsIDEwKSAhPT0gaW5kZXgpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEluZGV4IHNob3VsZCBiZSBhbiBpbnRlZ2VyOiAke2luZGV4fWApO1xuICAgIH1cblxuICAgIGNvbnN0IHsgY2FuZGlkYXRlc0NhdGNoIH0gPSB0aGlzO1xuICAgIGNvbnN0IGNhbmRpZGF0ZUluZm8gPSB0aGlzLmdldENhbmRpZGF0ZUluZm8oaW5kZXgpO1xuICAgIGNvbnN0IHtcbiAgICAgIGluZGV4OiBjYW5kaWRhdGVJbmRleCxcbiAgICAgIHZhbHVlOiBjYW5kaWRhdGVWYWx1ZSxcbiAgICAgIG5vZGU6IGNhbmRpZGF0ZU5vZGUsXG4gICAgfSA9IGNhbmRpZGF0ZUluZm87XG5cbiAgICBpZiAoY2FuZGlkYXRlTm9kZSA9PT0gbnVsbCAmJiBjYW5kaWRhdGVzQ2F0Y2gubGVuZ3RoID4gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbGxlZ2FsIGluZGV4OiAke2luZGV4fWApO1xuICAgIH1cblxuICAgIHRoaXMucXVlcnlTZWxlY3RvckFsbChgW3Nsb3Q9XCIke1Nsb3QuY3VycmVudH1cIl1gKS5mb3JFYWNoKChjYW5kaWRhdGUpID0+IHtcbiAgICAgIGNhbmRpZGF0ZS5yZW1vdmVBdHRyaWJ1dGUoJ3Nsb3QnKTtcbiAgICB9KTtcbiAgICBjYW5kaWRhdGVOb2RlPy5zZXRBdHRyaWJ1dGU/Lignc2xvdCcsIFNsb3QuY3VycmVudCk7XG5cbiAgICBpZiAoY2FuZGlkYXRlSW5kZXggIT09IHRoaXMuaW5kZXgpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKEF0dHJpYnV0ZS5pbmRleCwgYCR7Y2FuZGlkYXRlSW5kZXh9YCk7XG5cbiAgICAgIGlmIChjYW5kaWRhdGVWYWx1ZSkge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShBdHRyaWJ1dGUudmFsdWUsIGNhbmRpZGF0ZVZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKEF0dHJpYnV0ZS52YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgY3VycmVudCB2YWx1ZS5cbiAgICovXG4gIGdldCB2YWx1ZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDYW5kaWRhdGVWYWx1ZSh0aGlzLmluZGV4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGN1cnJlbnQgdmFsdWUuXG4gICAqL1xuICBzZXQgdmFsdWUodmFsdWU6IHN0cmluZyB8IG51bGwpIHtcbiAgICBpZiAodmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCB2YWx1ZTogJHt2YWx1ZX1gKTtcbiAgICB9XG5cbiAgICB0aGlzLmluZGV4ID0gdGhpcy5nZXRDYW5kaWRhdGVJbmRleCh2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBjdXJyZW50IGNhbmRpZGF0ZS5cbiAgICovXG4gIGdldCBjYW5kaWRhdGUoKTogSFRNTEVsZW1lbnQgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDYW5kaWRhdGVOb2RlKHRoaXMuaW5kZXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgY3VycmVudCBjYW5kaWRhdGUuXG4gICAqL1xuICBzZXQgY2FuZGlkYXRlKGNhbmRpZGF0ZTogSFRNTEVsZW1lbnQgfCBudWxsKSB7XG4gICAgdGhpcy5pbmRleCA9IHRoaXMuZ2V0Q2FuZGlkYXRlSW5kZXgoY2FuZGlkYXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGNhbmRpZGF0ZSBub2RlLlxuICAgKi9cbiAgZ2V0Q2FuZGlkYXRlTm9kZSA9IGdldENhbmRpZGF0ZU5vZGVcblxuICAvKipcbiAgICogUmV0dXJucyBjYW5kaWRhdGUgaW5kZXguXG4gICAqL1xuICBnZXRDYW5kaWRhdGVJbmRleCA9IGdldENhbmRpZGF0ZUluZGV4XG5cbiAgLyoqXG4gICAqIFJldHVybnMgY2FuZGlkYXRlIHZhbHVlLlxuICAgKi9cbiAgZ2V0Q2FuZGlkYXRlVmFsdWUgPSBnZXRDYW5kaWRhdGVWYWx1ZVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGNhY2FuZGlkYXRlcmQgaW5mby5cbiAgICovXG4gIGdldENhbmRpZGF0ZUluZm8gPSBnZXRDYW5kaWRhdGVJbmZvXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGluZGV4IG9mIG5leHQgY2FuZGlkYXRlLlxuICAgKi9cbiAgZ2V0TmV4dENhbmRpZGF0ZUluZGV4ID0gZ2V0TmV4dENhbmRpZGF0ZUluZGV4XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG5vZGUgb2YgbmV4dCBjYW5kaWRhdGUuXG4gICAqL1xuICBnZXROZXh0Q2FuZGlkYXRlTm9kZSguLi5hcmdzOiBQYXJhbWV0ZXJzPEZsaXBbJ2dldE5leHRDYW5kaWRhdGVJbmRleCddPik6IFJldHVyblR5cGU8RmxpcFsnZ2V0Q2FuZGlkYXRlTm9kZSddPiB7XG4gICAgY29uc3QgbmV4dEluZGV4ID0gdGhpcy5nZXROZXh0Q2FuZGlkYXRlSW5kZXgoLi4uYXJncyk7XG5cbiAgICByZXR1cm4gdGhpcy5nZXRDYW5kaWRhdGVOb2RlKG5leHRJbmRleCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmFsdWUgb2YgbmV4dCBjYW5kaWRhdGUuXG4gICAqL1xuICBnZXROZXh0Q2FuZGlkYXRlVmFsdWUoLi4uYXJnczogUGFyYW1ldGVyczxGbGlwWydnZXROZXh0Q2FuZGlkYXRlSW5kZXgnXT4pOiBSZXR1cm5UeXBlPEZsaXBbJ2dldENhbmRpZGF0ZVZhbHVlJ10+IHtcbiAgICBjb25zdCBuZXh0SW5kZXggPSB0aGlzLmdldE5leHRDYW5kaWRhdGVJbmRleCguLi5hcmdzKTtcblxuICAgIHJldHVybiB0aGlzLmdldENhbmRpZGF0ZVZhbHVlKG5leHRJbmRleCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgaW5mbyBvZiBuZXh0IGNhbmRpZGF0ZS5cbiAgICovXG4gIGdldE5leHRDYW5kaWRhdGVJbmZvKC4uLmFyZ3M6IFBhcmFtZXRlcnM8RmxpcFsnZ2V0TmV4dENhbmRpZGF0ZUluZGV4J10+KTogUmV0dXJuVHlwZTxGbGlwWydnZXRDYW5kaWRhdGVJbmZvJ10+IHtcbiAgICBjb25zdCBuZXh0SW5kZXggPSB0aGlzLmdldE5leHRDYW5kaWRhdGVJbmRleCguLi5hcmdzKTtcblxuICAgIHJldHVybiB0aGlzLmdldENhbmRpZGF0ZUluZm8obmV4dEluZGV4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGbGlwcyB0byBjYW5kaWRhdGUgYnkgcmVmZXJlbmNlLlxuICAgKi9cbiAgZmxpcChcbiAgICBzb3VyY2U/OiBudW1iZXIgfCBzdHJpbmcgfCBIVE1MRWxlbWVudCxcbiAgICBvcHRpb25zPzogRmxpcE9wdGlvbnMsXG4gICk6IFJldHVyblR5cGU8dHlwZW9mIGZsaXA+XG5cbiAgZmxpcChvcHRpb25zPzogRmxpcE9wdGlvbnMpOiBSZXR1cm5UeXBlPHR5cGVvZiBmbGlwPlxuXG4gIGZsaXAoLi4uYXJnczogUGFyYW1ldGVyczx0eXBlb2YgZmxpcD4pIHtcbiAgICByZXR1cm4gZmxpcC5jYWxsKHRoaXMsIC4uLmFyZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIERvZXMgZmxpcHBpbmcgYW5pbWF0aW9uIGZyb20gbGFzdCBjYW5kaWRhdGUgdG8gbmV4dCBjYW5kaWRhdGUuXG4gICAqL1xuICBwcm90ZWN0ZWQgZmxpcEFuaW1hdGlvbiA9IGZsaXBBbmltYXRpb25cbn1cblxucmVnaXN0ZXJFbGVtZW50KEZsaXAsIG5vZGVOYW1lKTtcblxuZXhwb3J0IGRlZmF1bHQgRmxpcDtcbiIsIi8qKlxuICogUmVnaXN0ZXJzIGVsZW1lbnQuXG4gKi9cbmZ1bmN0aW9uIHJlZ2lzdGVyRWxlbWVudChcbiAgTm9kZTogdHlwZW9mIEhUTUxFbGVtZW50LFxuICBub2RlTmFtZTogc3RyaW5nLFxuKTogUmV0dXJuVHlwZTx0eXBlb2YgY3VzdG9tRWxlbWVudHMud2hlbkRlZmluZWQ+IHtcbiAgaWYgKGN1c3RvbUVsZW1lbnRzLmdldChub2RlTmFtZSkpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXG4gICAgICBuZXcgRXJyb3IoYEFscmVhZHkgZGVmaW5lZCA8JHtub2RlTmFtZX0+YCksXG4gICAgKTtcbiAgfVxuXG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZShub2RlTmFtZSwgTm9kZSk7XG5cbiAgcmV0dXJuIGN1c3RvbUVsZW1lbnRzLndoZW5EZWZpbmVkKG5vZGVOYW1lKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgcmVnaXN0ZXJFbGVtZW50O1xuIl0sIm5hbWVzIjpbInRyaWdnZXJFdmVudCIsInJlZiIsInR5cGUiLCJvcHRpb25zIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiRXZlbnQiLCJjbGFzc05hbWUiLCJzbG90Iiwic3R5bGUiLCJhdHRyaWJ1dGVzIiwiaW5uZXJIVE1MIiwidGVtcE5vZGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhdHRhY2hTaGFkb3ciLCJtb2RlIiwidW5kZWZpbmVkIiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJDbGFzc05hbWUiLCJTbG90IiwiYXN5bmMiLCJuZXh0Q2FuZGlkYXRlSW5mbyIsImluZGV4IiwibmV4dEluZGV4IiwidGVtcENhbmRpZGF0ZU5vZGUiLCJjcmVhdGVUZW1wTm9kZSIsImxhc3RUZW1wQ2FyZCIsInRoaXMiLCJxdWVyeVNlbGVjdG9yIiwicmVtb3ZlIiwiYXBwZW5kIiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJjb21wb3NlZCIsImRldGFpbCIsImZsaXBBbmltYXRpb24iLCJhcmcwIiwiYXJnMSIsIkhUTUxFbGVtZW50IiwiZGlyZWN0IiwiZGlmZmVyZW50IiwiY2FuZGlkYXRlc0NhdGNoIiwibGVuZ3RoIiwiZHVyYXRpb24iLCJkaXJlY3Rpb24iLCJ0YXJnZXRTb3VyY2UiLCJnZXROZXh0Q2FuZGlkYXRlSW5kZXgiLCJ0YXJnZXRDYW5kaWRhdGVJbmZvIiwiZ2V0Q2FuZGlkYXRlSW5mbyIsInRhcmdldEluZGV4Iiwibm9kZSIsInRhcmdldE5vZGUiLCJSZWZlcmVuY2VFcnJvciIsImxhc3RDYW5kaWRhdGVJbmZvIiwiZmxpcE9uZUNhbmRpZGF0ZSIsIm1pbkZsaXBzIiwibWF4RmxpcHMiLCJmbGlwTmV4dCIsInRpbWVzIiwiY3VycmVudENhbmRpZGF0ZUluZm8iLCJEaXJlY3Rpb24iLCJjbG9uZU5vZGUiLCJuZXdOb2RlIiwiSFRNTENhbnZhc0VsZW1lbnQiLCJuZXdDYW52YXMiLCJ3aWR0aCIsImhlaWdodCIsImdldENvbnRleHQiLCJkcmF3SW1hZ2UiLCJjaGlsZE5vZGVzIiwiY2hpbGQiLCJhcHBlbmRDaGlsZCIsImNzcyIsInByZWZpeHMiLCJoZWFkIiwidGVzdCIsInRleHQiLCJyZXBsYWNlIiwiQXJyYXkiLCJpc0FycmF5IiwibWFwIiwicHJlZml4IiwiY29uY2F0Iiwiam9pbiIsImxhc3RDYW5kaWRhdGVOb2RlIiwibmV4dENhbmRpZGF0ZU5vZGUiLCJkdXJhdGlvblNlYyIsImRvbUNhbmRpZGF0ZSIsImZsaXAiLCJwcmVmaXhDc3MiLCJwZXJzcGVjdGl2ZSIsImRvbU5leHQiLCJkb21OZXh0Q2FuZGlkYXRlIiwic2V0UHJvcGVydHkiLCJyZW1vdmVBdHRyaWJ1dGUiLCJkb21CYWNrZ3JvdW5kIiwiZG9tTGFzdCIsImRvbUxhc3RDYW5kaWRhdGUiLCJkb21MYXN0QmFja2dyb3VuZENhbmRpZGF0ZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uY2UiLCJUeXBlRXJyb3IiLCJmbGlwcGluZ1ZlcnRpY2FsbHkiLCJmbGlwcGluZ0hvcml6b250YWxseSIsInNvdXJjZSIsImNhcmRzQ2F0Y2giLCJpbmRleE9mIiwiZmluZEluZGV4IiwiY2FyZCIsIkZsaXAiLCJ2YWx1ZSIsImdldENhbmRpZGF0ZUluZGV4IiwiZ2V0Q2FuZGlkYXRlTm9kZSIsImZpbmQiLCJNb2RlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiQXR0cmlidXRlIiwiaXNOYU4iLCJnbG9iYWxUaGlzIiwidGVtcGxhdGUiLCJkZWZhdWx0QXR0cmlidXRlVmFsdWVzIiwiSW5maW5pdHkiLCJjb25zdHJ1Y3RvciIsInN1cGVyIiwic2hhZG93Um9vdCIsImNvbnRlbnQiLCJyb290RWxlbWVudCIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaGFzQXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrIiwiYXR0cmlidXRlTmFtZSIsIk51bWJlciIsImNhbmRpZGF0ZSIsInZhbHVlcyIsImluY2x1ZGVzIiwiUmFuZ2VFcnJvciIsInBhcnNlSW50IiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJtYXgiLCJjYW5kaWRhdGVzIiwiY2FuZGlkYXRlSW5mbyIsImNhbmRpZGF0ZUluZGV4IiwiY2FuZGlkYXRlVmFsdWUiLCJjYW5kaWRhdGVOb2RlIiwiRXJyb3IiLCJnZXRDYW5kaWRhdGVWYWx1ZSIsImdldE5leHRDYW5kaWRhdGVOb2RlIiwiYXJncyIsImdldE5leHRDYW5kaWRhdGVWYWx1ZSIsImdldE5leHRDYW5kaWRhdGVJbmZvIiwiTm9kZSIsIm5vZGVOYW1lIiwiY3VzdG9tRWxlbWVudHMiLCJnZXQiLCJyZWplY3QiLCJkZWZpbmUiLCJ3aGVuRGVmaW5lZCJdLCJzb3VyY2VSb290IjoiIn0=