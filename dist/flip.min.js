(()=>{"use strict";function t(t,e,n){return t.dispatchEvent(new CustomEvent(e,n))}var e;!function(t){t.flipStart="flipstart",t.flipCardStart="flipcardstart",t.flipCardEnd="flipcardend",t.flipEnd="flipend"}(e||(e={}));const n=e;var r;!function(t){t.loop="loop",t.random="random"}(r||(r={}));const i=r,s=function(t={}){const{className:e,slot:n,style:r="",innerHTML:i="<slot></slot>"}=t,s=document.createElement("div");return s.attachShadow({mode:"open"}).innerHTML=`\n    <style>\n      \n  :host {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    pointer-events: none;\n    display: block;\n  }\n\n  slot {\n    display: block;\n  }\n\n      ${r}\n    </style>\n    ${i}\n  `,void 0!==e&&s.classList.add(e),void 0!==n&&s.setAttribute("slot",n),s};var a;!function(t){t.temp="temp"}(a||(a={}));const o=a;var l;!function(t){t.current="current",t.temp="temp"}(l||(l={}));const d=l;var p;!function(t){t.up="up",t.down="down",t.left="left",t.right="right"}(p||(p={}));const c=p,h=function(t,e){const n=/^@/.test(t)?"@-":"-",r=t.replace(/^@/,"").replace(/;?$/,";");return(Array.isArray(e)?e:[e]).map((t=>`${n}${t}-${r}`)).concat(t).join("\n")},u=`\n  :host {\n    --right-x-left: 50%;\n    --right-x-right: 100vw;\n    --left-x-left: -100vw;\n    --left-x-right: 50%;\n\n    ${h("clip-path: polygon(\n      var(--x-left) -100vh,\n      var(--x-right) -100vh,\n      var(--x-right) calc(100% + 100vh),\n      var(--x-left) calc(100% + 100vh)\n    );","webkit")}\n  }\n`,y=`\n  ${h(`@keyframes clip {\n    0% {\n      ${h("clip-path: polygon(\n        var(--start-x-left) -100vh,\n        var(--start-x-right) -100vh,\n        var(--start-x-right) calc(100% + 100vh),\n        var(--start-x-left) calc(100% + 100vh)\n      );","webkit")}\n    }\n    50%, 100% {\n      ${h("clip-path: polygon(\n        var(--end-x-left) -100vh,\n        var(--end-x-right) -100vh,\n        var(--end-x-right) calc(100% + 100vh),\n        var(--end-x-left) calc(100% + 100vh)\n      );","webkit")}\n    }\n  }`,"webkit")}\n\n  :host {\n    --hori-perspective: var(--3d-perspective, 5em);\n    --right-x-left: 50%;\n    --right-x-right: calc(100% + 100vw);\n    --left-x-left: -100vw;\n    --left-x-right: 50%;\n\n    ${h("perspective: var(--hori-perspective);","webkit")}\n    ${h("animation: clip var(--duration) forwards steps(1, end);","webkit")}\n  }\n`,f=`\n  ${h(`@keyframes flip {\n    0% {\n      ${h("transform: rotateY(0);","webkit")}\n    }\n    100% {\n      ${h("transform: rotateY(var(--end-deg));","webkit")}\n    }\n  }`,"webkit")}\n\n  :host {\n    --left-end-deg: -180deg;\n    --right-end-deg: 180deg;\n\n    ${h("transform-style: preserve-3d;","webkit")}\n    ${h("animation: flip var(--duration) forwards linear;","webkit")}\n  }\n`,v=`\n  :host {\n    ${h("backface-visibility: hidden;","webkit")}\n    ${h("transform: rotateY(180deg);","webkit")}\n  }\n`,m=`\n  :host {\n    ${h("backface-visibility: hidden;","webkit")}\n  }\n`,g=function(t){const{duration:e,direction:n,lastCard:r,nextCard:i,tempCard:a}=t,o=e/1e3,l=s({style:u}),d=s({style:y}),p=s({style:f}),h=s({style:v}),g=H.cloneCard(i);switch(n){default:case c.left:l.style.setProperty("--x-left","var(--left-x-left)"),l.style.setProperty("--x-right","var(--left-x-right)"),d.style.setProperty("--start-x-left","var(--right-x-left)"),d.style.setProperty("--start-x-right","var(--right-x-right)"),d.style.setProperty("--end-x-left","var(--left-x-left)"),d.style.setProperty("--end-x-right","var(--left-x-right)"),p.style.setProperty("--end-deg","var(--left-end-deg)");break;case c.right:l.style.setProperty("--x-left","var(--right-x-left)"),l.style.setProperty("--x-right","var(--right-x-right)"),d.style.setProperty("--start-x-left","var(--left-x-left)"),d.style.setProperty("--start-x-right","var(--left-x-right)"),d.style.setProperty("--end-x-left","var(--right-x-left)"),d.style.setProperty("--end-x-right","var(--right-x-right)"),p.style.setProperty("--end-deg","var(--right-end-deg)")}if(d.style.setProperty("--duration",`${o}s`),g.removeAttribute("slot"),h.append(g),p.append(h),d.append(p),r){const t=s({style:m}),e=H.cloneCard(r);e.removeAttribute("slot"),t.append(e),p.append(t),l.append(H.cloneCard(t))}return new Promise((t=>{a.addEventListener("animationend",(()=>{t(void 0)}),{once:!0}),a.append(l),a.append(d)}))},x=`\n  :host {\n    --upper-y-top: -100vh;\n    --upper-y-bottom: 50%;\n    --lower-y-top: 50%;\n    --lower-y-bottom: calc(100% + 100vh);\n\n    ${h("clip-path: polygon(\n      -100vw var(--y-top),\n      calc(100% + 100vw) var(--y-top),\n      calc(100% + 100vw) var(--y-bottom),\n      -100vw var(--y-bottom)\n    );","webkit")}\n  }\n`,b=`\n  ${h(`@keyframes clip {\n    0% {\n      ${h("clip-path: polygon(\n        -100vw var(--start-y-top),\n        calc(100% + 100vw) var(--start-y-top),\n        calc(100% + 100vw) var(--start-y-bottom),\n        -100vw var(--start-y-bottom)\n      );","webkit")}\n    }\n    50%, 100% {\n      ${h("clip-path: polygon(\n        -100vw var(--end-y-top),\n        calc(100% + 100vw) var(--end-y-top),\n        calc(100% + 100vw) var(--end-y-bottom),\n        -100vw var(--end-y-bottom)\n      );","webkit")}\n    }\n  }`,"webkit")}\n\n  :host {\n    --vert-perspective: var(--3d-perspective, 5em);\n    --upper-y-top: -100vh;\n    --upper-y-bottom: 50%;\n    --lower-y-top: 50%;\n    --lower-y-bottom: calc(100% + 100vh);\n\n    ${h("perspective: var(--vert-perspective);","webkit")}\n    ${h("animation: clip var(--duration) forwards steps(1, end);","webkit")}\n  }\n`,w=`\n  ${h(`@keyframes flip {\n    0% {\n      ${h("transform: rotateX(0);","webkit")}\n    }\n    100% {\n      ${h("transform: rotateX(var(--end-deg));","webkit")}\n    }\n  }`,"webkit")}\n\n  :host {\n    --down-end-deg: -180deg;\n    --up-end-deg: 180deg;\n\n    ${h("transform-style: preserve-3d;","webkit")}\n    ${h("animation: flip var(--duration) forwards linear;","webkit")}\n  }\n`,C=`\n  :host {\n    ${h("backface-visibility: hidden;","webkit")}\n    ${h("transform: rotateX(180deg);","webkit")}\n  }\n`,$=`\n  :host {\n    ${h("backface-visibility: hidden;","webkit")}\n  }\n`,k=function(t){const{duration:e,direction:n,lastCard:r,nextCard:i,tempCard:a}=t,o=e/1e3,l=s({style:x}),d=s({style:b}),p=s({style:w}),h=s({style:C}),u=R.cloneCard(i);switch(n){default:case c.down:l.style.setProperty("--y-top","var(--lower-y-top)"),l.style.setProperty("--y-bottom","var(--lower-y-bottom)"),d.style.setProperty("--start-y-top","var(--upper-y-top)"),d.style.setProperty("--start-y-bottom","var(--upper-y-bottom)"),d.style.setProperty("--end-y-top","var(--lower-y-top)"),d.style.setProperty("--end-y-bottom","var(--lower-y-bottom)"),p.style.setProperty("--end-deg","var(--down-end-deg)");break;case c.up:l.style.setProperty("--y-top","var(--upper-y-top)"),l.style.setProperty("--y-bottom","var(--upper-y-bottom)"),d.style.setProperty("--start-y-top","var(--lower-y-top)"),d.style.setProperty("--start-y-bottom","var(--lower-y-bottom)"),d.style.setProperty("--end-y-top","var(--upper-y-top)"),d.style.setProperty("--end-y-bottom","var(--upper-y-bottom)"),p.style.setProperty("--end-deg","var(--up-end-deg)")}if(d.style.setProperty("--duration",`${o}s`),u.removeAttribute("slot"),h.append(u),p.append(h),d.append(p),r){const t=s({style:$}),e=R.cloneCard(r);e.removeAttribute("slot"),t.append(e),p.append(t),l.append(R.cloneCard(t))}return new Promise((t=>{a.addEventListener("animationend",(()=>{t(void 0)}),{once:!0}),a.append(l),a.append(d)}))},I=async function(t){switch(t.direction){default:return k.call(this,{...t,direction:c.down});case c.up:case c.down:return k.call(this,t);case c.right:case c.left:return g.call(this,t)}},E=async function(e){const{nextIndex:r}=e,i=await s({className:o.temp,slot:d.temp}),a=this.querySelector(`.${o.temp}`);a&&a.remove(),this.index=r,this.append(i),t(this,n.flipCardStart,{bubbles:!0,cancelable:!0,composed:!0,detail:{...e,tempCard:i}})&&await I.call(this,{...e,tempCard:i}),t(this,n.flipCardEnd,{bubbles:!0,cancelable:!1,composed:!0,detail:{...e,tempCard:i}}),i.remove()},P=async function(e,r={}){const{card:s,index:a}=this.getCardInfo(e??this.getNextIndex({different:this.cards.length>1}));if(null===s){if(void 0===e)return;throw new ReferenceError("Target card doesn't exist")}const{index:o,card:l}=this,{direct:d=!1,duration:p=this.duration,direction:c=this.direction}=r;if(t(this,n.flipStart,{bubbles:!0,cancelable:!0,composed:!0,detail:{direct:d,duration:p,direction:c,lastIndex:o,lastCard:l,targetIndex:a,targetCard:s}})){if(d)await E.call(this,{direct:d,duration:p,direction:c,lastIndex:o,lastCard:l,nextIndex:a,nextCard:s});else{const{mode:t,cards:e,minFlips:n,maxFlips:r}=this,s=e.length,h=e=>{switch(t){default:case i.loop:return this.getNextIndex();case i.random:if(e<r){let t=this.getNextIndex();for(;s>2&&e<n&&t===a;)t=this.getNextIndex();return t}return a}},u=async(t,e,n=1)=>{const r=h(n),i=this.getCardByIndex(r);await E.call(this,{direct:d,duration:p,direction:c,lastIndex:t,lastCard:e,nextIndex:r,nextCard:i}),r!==a&&await u(r,i,n+1)};await u(o,l)}t(this,n.flipEnd,{bubbles:!0,cancelable:!1,composed:!0,detail:{direct:d,duration:p,direction:c,lastIndex:o,lastCard:l,targetIndex:a,targetCard:s}})}},A=function(t){if(t instanceof HTMLElement){const e=this.getIndexByCard(t);return{index:e,card:e>=0?t:null}}if(null===t)return{index:-1,card:null};const e=this.getCardByIndex(t);return{card:e,index:null===e?-1:t}},F=function(t={}){const{different:e=!0,mode:n=this.mode}=t,{index:r,cards:s}=this,{length:a}=s;switch(n){default:case i.loop:{const t=(r+1)%a;return e&&t===r?null:t}case i.random:switch(a){case 0:return null;case 1:return e?null:this.index;default:{let t=-1;for(;-1===t||e&&t===r;)t=Math.floor(a*Math.random());return t}}}};var T;!function(t){t.index="index",t.value="value",t.mode="mode",t.duration="duration",t.direction="direction",t.minFlips="min-flips",t.maxFlips="max-flips",t.perspective="perspective"}(T||(T={}));const N=T;var S;!function(t){t.perspective="--3d-perspective"}(S||(S={}));const B=S,{isNaN:L}=globalThis,M=document.createElement("template");M.innerHTML=`\n  <style>\n    :host {\n      --3d-perspective: 10rem;\n\n      position: relative;\n      display: inline-block;\n    }\n\n    slot {\n      position: relative;\n      z-index: 0;\n    }\n\n    slot:not([name]) {\n      display: none;\n    }\n  </style>\n  <flip>\n    <slot></slot>\n    <slot name="${d.current}"></slot>\n    <slot name="${d.temp}"></slot>\n  </flip>\n`;class V extends HTMLElement{#mode=i.loop;#duration=400;#direction=c.down;#index=-1;#cards=Array.from(this.children);#minFlips=0;#maxFlips;#perspective="10rem";#rootElement;constructor(){super();const t=this.attachShadow({mode:"open"});t.append(M.content.cloneNode(!0)),this.#rootElement=t.querySelector("flip"),t.querySelector("slot:not([name])").addEventListener("slotchange",(()=>{this.#cards=Array.from(this.querySelectorAll(":scope > :not([slot=temp])"))})),V.observedAttributes.filter((t=>this.hasAttribute(t))).forEach((t=>{this.attributeChangedCallback(t)})),-1===this.index&&(this.index=0)}static get observedAttributes(){return[N.index,N.value,N.mode,N.duration,N.direction,N.minFlips,N.maxFlips,N.perspective]}attributeChangedCallback(t){switch(t){default:break;case N.index:{const t=this.getAttribute(N.index);null!==t&&t.length>0&&(this.index=Number(t));break}case N.value:{const t=this.getAttribute(N.value),e=this.cards.findIndex((e=>V.getCardValue(e)===t));this.index=e;break}case N.mode:this.hasAttribute(N.mode)&&(this.mode=this.getAttribute(N.mode));break;case N.duration:{const t=this.getAttribute(N.duration);null!==t&&t.length>0&&(this.duration=Number(t));break}case N.direction:this.hasAttribute(N.direction)&&(this.direction=this.getAttribute(N.direction));break;case N.minFlips:{const t=this.getAttribute(N.minFlips);null!==t&&t.length>0&&(this.minFlips=Number(t));break}case N.maxFlips:{const t=this.getAttribute(N.maxFlips);null!==t&&t.length>0&&(this.maxFlips=Number(t));break}case N.perspective:this.hasAttribute(N.perspective)&&(this.perspective=this.getAttribute(N.perspective))}}static getCardValue(t){return t?.getAttribute?.(N.value)??null}get cards(){return[...this.#cards]}get mode(){return this.#mode}set mode(t){if(!(t in i))throw new TypeError(`Invalid mode: ${t}`);this.#mode=t}get duration(){return this.#duration}set duration(t){if(L(t))throw new TypeError(`Invalid duration: ${t}`);if(t<0)throw new RangeError(`Duration should be greater than 0: ${t}`);this.#duration=t}get direction(){return this.#direction}set direction(t){if(!(t in c))throw new TypeError(`Invalid direction: ${t}`);this.#direction=t}get minFlips(){return this.#minFlips}set minFlips(t){if(L(t))throw new TypeError(`Invalid min flips: ${t}`);if(parseInt(`${t}`,10)!==t)throw new TypeError(`Min flips should be an integer: ${t}`);if(this.#minFlips=t,this.maxFlips<t)throw new RangeError("Setting min flips that is greater than max flips might cause flipping error")}get maxFlips(){return this.#maxFlips??1/0}set maxFlips(t){if(L(t))throw new TypeError(`Invalid max flips: ${t}`);if(parseInt(`${t}`,10)!==t)throw new TypeError(`Max flips should be an integer: ${t}`);if(this.#maxFlips=t,this.minFlips>t)throw new RangeError("Setting max flips that is less than min flips might cause flipping error")}get perspective(){return this.#perspective}set perspective(t){"string"==typeof t&&(this.#perspective=t,this.#rootElement.style.setProperty(B.perspective,t))}get index(){return this.#index}set index(t){if(L(t))throw new TypeError(`Invalid index: ${t}`);if(parseInt(`${t}`,10)!==t)throw new TypeError(`Index should be an integer: ${t}`);if(void 0===this.cards[t])throw new RangeError(`Card index doesn't exist: ${t}`);this.#index=t,this.querySelectorAll(`[slot="${d.current}"]`).forEach((t=>{t.removeAttribute("slot")})),this.cards[t].setAttribute("slot",d.current)}get value(){return this.getValueByIndex(this.index)}set value(t){const e=this.cards.findIndex((e=>V.getCardValue(e)===t));if(-1===e)throw new ReferenceError(`Value is not in cards: ${t}`);this.index=e}get card(){return this.getCardByIndex(this.index)}set card(t){this.index=null===t?-1:this.cards.indexOf(t)}getCardByIndex(t){return this.cards[t]??null}getCardInfo=A;getValueByIndex(t){return V.getCardValue(this.getCardByIndex(t))}getIndexByCard(t){return this.cards.indexOf(t)}getIndexByValue(t){return this.cards.findIndex((e=>V.getCardValue(e)===t))}getNextIndex=F;getNextCard(...t){const e=this.getNextIndex(...t);return null!==e?this.getCardByIndex(e):null}flip=P;flipToCard(t,e){return this.flip(t,e)}flipToIndex(t,e){return this.flip(this.getCardByIndex(t),e)}flipDirectly(...[t,e]){return this.flip(t,{...e,direct:!0})}flipToCardDirectly(t,e){return this.flipDirectly(t,e)}flipToIndexDirectly(t,e){return this.flipDirectly(this.getCardByIndex(t),e)}flipAnimation=I;static cloneCard(t){const e=t.cloneNode(!0);{const n=Array.from(e.querySelectorAll("canvas"));e instanceof HTMLCanvasElement&&n.push(e),n.length>0&&t.querySelectorAll("canvas").forEach(((t,e)=>{const r=t,i=n[e];i.width=r.width,i.height=r.height,i.getContext("2d")?.drawImage(r,0,0)}))}return e}}var q,D;q=V,D="flip-pack",customElements.get(D)?Promise.reject(new Error(`Already defined <${D}>`)):(customElements.define(D,q),customElements.whenDefined(D));const H=V,R=V})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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OEQsS0FBSzBFLEtBQUs5RCxFQUFNLElBQ2xCMUUsRUFDSG1GLFFBQVEsSUFPWnlELG1CQUFtQmpFLEVBQW1CM0UsR0FDcEMsT0FBTzhELEtBQUs2RSxhQUFhaEUsRUFBTTNFLEdBTWpDNkksb0JBQW9CekUsRUFBZXBFLEdBQ2pDLE9BQU84RCxLQUFLNkUsYUFBYTdFLEtBQUtnQyxlQUFlMUIsR0FBUXBFLEdBTXZEeUUsY0FBZ0JBLEVBT0EsaUJBQUNFLEdBQ2YsTUFBTW1FLEVBQVVuRSxFQUFLcUMsV0FBVSxHQUUvQixDQUNFLE1BQU0rQixFQUFrQnBILE1BQU0rRSxLQUFLb0MsRUFBUTdCLGlCQUFpQixXQUV4RDZCLGFBQW1CRSxtQkFDckJELEVBQWdCRSxLQUFLSCxHQUVuQkMsRUFBZ0IvRCxPQUFTLEdBQzNCTCxFQUFLc0MsaUJBQWlCLFVBQVVLLFNBQVEsQ0FBQ2EsRUFBS2UsS0FDNUMsTUFBTUMsRUFBYWhCLEVBQ2JpQixFQUFZTCxFQUFnQkcsR0FFbENFLEVBQVVDLE1BQVFGLEVBQVdFLE1BQzdCRCxFQUFVRSxPQUFTSCxFQUFXRyxPQUM5QkYsRUFBVUcsV0FBVyxPQUFPQyxVQUFVTCxFQUFZLEVBQUcsTUFLM0QsT0FBT0wsR0MxZlgsSUFDRVcsRUFDQUMsRUFEQUQsRUQ2ZmN2RyxFQzVmZHdHLEVETWUsWUNKWEMsZUFBZUMsSUFBSUYsR0FDZGxHLFFBQVFxRyxPQUNiLElBQUlDLE1BQU8sb0JBQW1CSixRQUlsQ0MsZUFBZUksT0FBT0wsRUFBVUQsR0FFekJFLGVBQWVLLFlBQVlOLElEb2ZwQyxVRWpnQkEsRUZpZ0JBLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdXRpbHMvZXZlbnRIYW5kbGVyLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy92YWx1ZXMvZXZlbnRzLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy92YWx1ZXMvbW9kZXMudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL3V0aWxzL2NyZWF0ZVRlbXBDYXJkLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy92YWx1ZXMvY2xhc3NOYW1lcy50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdmFsdWVzL3Nsb3RzLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy92YWx1ZXMvZGlyZWN0aW9ucy50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdXRpbHMvcHJlZml4Q3NzLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy9tZXRob2RzL2ZsaXAvaG9yaXpvbnRhbC50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvbWV0aG9kcy9mbGlwL3ZlcnRpY2FsLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy9tZXRob2RzL2ZsaXAvZmxpcEFuaW1hdGlvbi50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvbWV0aG9kcy9mbGlwL2ZsaXBPbmVDYXJkLnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy9tZXRob2RzL2ZsaXAvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL21ldGhvZHMvZ2V0Q2FyZEluZm8udHMiLCJ3ZWJwYWNrOi8vQGxmMmNvbS9mbGlwLmpzLy4vc3JjL21ldGhvZHMvZ2V0TmV4dEluZGV4LnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy92YWx1ZXMvYXR0cmlidXRlcy50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdmFsdWVzL3N0eWxlcy50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvZmxpcC50cyIsIndlYnBhY2s6Ly9AbGYyY29tL2ZsaXAuanMvLi9zcmMvdXRpbHMvcmVnaXN0ZXJFbGVtZW50LnRzIiwid2VicGFjazovL0BsZjJjb20vZmxpcC5qcy8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJ0eXBlIEV2ZW50SG9sZGVyID0gSFRNTEVsZW1lbnQgfCBEb2N1bWVudCB8IFdpbmRvdztcbnR5cGUgRXZlbnRMaXN0ZW5lciA9ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZDtcblxuaW50ZXJmYWNlIEV2ZW50TGlzdGVuZXJPcHRpb25zIHtcbiAgY2FwdHVyZT86IGJvb2xlYW47XG4gIG9uY2U/OiBib29sZWFuO1xuICBwYXNzaXZlPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBBZGRzIGV2ZW50IG9mIHR5cGUgdG8gZWxlbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIoXG4gIHJlZjogRXZlbnRIb2xkZXIsXG4gIHR5cGU6IHN0cmluZyxcbiAgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXIsXG4gIG9wdGlvbnM/OiBFdmVudExpc3RlbmVyT3B0aW9ucyxcbik6IHZvaWQge1xuICByZWYuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogQWRkcyBldmVudHMgb2YgdHlwZXMgdG8gZWxlbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXJzKFxuICByZWY6IEV2ZW50SG9sZGVyLFxuICB0eXBlczogc3RyaW5nW10sXG4gIGxpc3RlbmVyOiBFdmVudExpc3RlbmVyLFxuICBvcHRpb25zPzogRXZlbnRMaXN0ZW5lck9wdGlvbnMsXG4pOiB2b2lkIHtcbiAgdHlwZXMuZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgIGFkZEV2ZW50TGlzdGVuZXIocmVmLCB0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucyk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgZXZlbnQgb2YgdHlwZSBmcm9tIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKFxuICByZWY6IEV2ZW50SG9sZGVyLFxuICB0eXBlOiBzdHJpbmcsXG4gIGxpc3RlbmVyOiBFdmVudExpc3RlbmVyLFxuICBvcHRpb25zPzogRXZlbnRMaXN0ZW5lck9wdGlvbnMsXG4pOiB2b2lkIHtcbiAgcmVmLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgZXZlbnRzIG9mIHR5cGVzIGZyb20gZWxlbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXJzKFxuICByZWY6IEV2ZW50SG9sZGVyLFxuICB0eXBlczogc3RyaW5nW10sXG4gIGxpc3RlbmVyOiBFdmVudExpc3RlbmVyLFxuICBvcHRpb25zPzogRXZlbnRMaXN0ZW5lck9wdGlvbnMsXG4pOiB2b2lkIHtcbiAgdHlwZXMuZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgIHJlZi5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTtcbiAgfSk7XG59XG5cbmludGVyZmFjZSBDdXN0b21FdmVudEluaXQ8VD4ge1xuICBkZXRhaWw/OiBUO1xuICBidWJibGVzPzogYm9vbGVhbjtcbiAgY2FuY2VsYWJsZT86IGJvb2xlYW47XG4gIGNvbXBvc2VkPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBUcmlnZ2VycyBldmVudCBhbmQgcmV0dXJucyBmYWxzZSBpZiB0aGUgZXZlbnQgaXMgY2FuY2VsbGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJpZ2dlckV2ZW50PFQ+KFxuICByZWY6IEV2ZW50SG9sZGVyLFxuICB0eXBlOiBzdHJpbmcsXG4gIG9wdGlvbnM/OiBDdXN0b21FdmVudEluaXQ8VD4sXG4pOiBib29sZWFuIHtcbiAgcmV0dXJuIHJlZi5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCh0eXBlLCBvcHRpb25zKSk7XG59XG5cbi8qKlxuICogVHJpZ2dlcnMgZXZlbnRzIGFuZCByZXR1cm5zIGZhbHNlIGlmIGFueSBvZiB0aGUgZXZlbnQgaXNcbiAqIGNhbmNlbGxlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyaWdnZXJFdmVudHM8VD4oXG4gIHJlZjogRXZlbnRIb2xkZXIsXG4gIHR5cGVzOiBzdHJpbmdbXSxcbiAgb3B0aW9ucz86IEN1c3RvbUV2ZW50SW5pdDxUPixcbik6IGJvb2xlYW4ge1xuICByZXR1cm4gdHlwZXMuZXZlcnkoKHR5cGUpID0+IHRyaWdnZXJFdmVudChyZWYsIHR5cGUsIG9wdGlvbnMpKTtcbn1cbiIsImVudW0gRXZlbnRzIHtcbiAgZmxpcFN0YXJ0ID0gJ2ZsaXBzdGFydCcsXG4gIGZsaXBDYXJkU3RhcnQgPSAnZmxpcGNhcmRzdGFydCcsXG4gIGZsaXBDYXJkRW5kID0gJ2ZsaXBjYXJkZW5kJyxcbiAgZmxpcEVuZCA9ICdmbGlwZW5kJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgRXZlbnRzO1xuIiwiZW51bSBNb2RlcyB7XG4gIGxvb3AgPSAnbG9vcCcsXG4gIHJhbmRvbSA9ICdyYW5kb20nLFxufVxuXG5leHBvcnQgZGVmYXVsdCBNb2RlcztcbiIsImNvbnN0IHRlbXBDYXJkQ3NzID0gYFxuICA6aG9zdCB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICByaWdodDogMDtcbiAgICBib3R0b206IDA7XG4gICAgbGVmdDogMDtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgfVxuXG4gIHNsb3Qge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICB9XG5gO1xuXG5pbnRlcmZhY2UgVGVtcENhcmRPcHRpb25zIHtcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICBzbG90Pzogc3RyaW5nO1xuICBzdHlsZT86IHN0cmluZztcbiAgaW5uZXJIVE1MPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSB0ZW1wIGNhcmQuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVRlbXBDYXJkKFxuICBvcHRpb25zOiBUZW1wQ2FyZE9wdGlvbnMgPSB7fSxcbik6IEhUTUxFbGVtZW50IHtcbiAgY29uc3Qge1xuICAgIGNsYXNzTmFtZSxcbiAgICBzbG90LFxuICAgIHN0eWxlID0gJycsXG4gICAgaW5uZXJIVE1MID0gJzxzbG90Pjwvc2xvdD4nLFxuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgdGVtcENhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29uc3Qgc2hhZG93Um9vdCA9IHRlbXBDYXJkLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcblxuICBzaGFkb3dSb290LmlubmVySFRNTCA9IGBcbiAgICA8c3R5bGU+XG4gICAgICAke3RlbXBDYXJkQ3NzfVxuICAgICAgJHtzdHlsZX1cbiAgICA8L3N0eWxlPlxuICAgICR7aW5uZXJIVE1MfVxuICBgO1xuXG4gIGlmIChjbGFzc05hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgIHRlbXBDYXJkLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgfVxuICBpZiAoc2xvdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGVtcENhcmQuc2V0QXR0cmlidXRlKCdzbG90Jywgc2xvdCk7XG4gIH1cblxuICByZXR1cm4gdGVtcENhcmQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVRlbXBDYXJkO1xuIiwiZW51bSBDbGFzc05hbWVzIHtcbiAgdGVtcCA9ICd0ZW1wJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2xhc3NOYW1lcztcbiIsImVudW0gU2xvdHMge1xuICBjdXJyZW50ID0gJ2N1cnJlbnQnLFxuICB0ZW1wID0gJ3RlbXAnLFxufVxuXG5leHBvcnQgZGVmYXVsdCBTbG90cztcbiIsImVudW0gRGlyZWN0aW9ucyB7XG4gIHVwID0gJ3VwJyxcbiAgZG93biA9ICdkb3duJyxcbiAgbGVmdCA9ICdsZWZ0JyxcbiAgcmlnaHQgPSAncmlnaHQnLFxufVxuXG5leHBvcnQgZGVmYXVsdCBEaXJlY3Rpb25zO1xuIiwidHlwZSBQcmVmaXggPSAnd2Via2l0JyB8ICdvJyB8ICdtcycgfCAnbW96JztcblxuLyoqXG4gKiBSZXR1cm5zIHByZWZpeGVkIENTUyB0ZXh0LlxuICovXG5mdW5jdGlvbiBwcmVmaXhDc3MoY3NzOiBzdHJpbmcsIHByZWZpeHM6IFByZWZpeCB8IFByZWZpeFtdKTogc3RyaW5nIHtcbiAgY29uc3QgaGVhZCA9IC9eQC8udGVzdChjc3MpID8gJ0AtJyA6ICctJztcbiAgY29uc3QgdGV4dCA9IGNzc1xuICAgIC5yZXBsYWNlKC9eQC8sICcnKVxuICAgIC5yZXBsYWNlKC87PyQvLCAnOycpO1xuXG4gIHJldHVybiAoQXJyYXkuaXNBcnJheShwcmVmaXhzKSA/IHByZWZpeHMgOiBbcHJlZml4c10pXG4gICAgLm1hcCgocHJlZml4KSA9PiBgJHtoZWFkfSR7cHJlZml4fS0ke3RleHR9YClcbiAgICAuY29uY2F0KGNzcylcbiAgICAuam9pbignXFxuJyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHByZWZpeENzcztcbiIsImltcG9ydCBGbGlwIGZyb20gJy4uLy4uL2ZsaXAnO1xuaW1wb3J0IGNyZWF0ZVRlbXBDYXJkIGZyb20gJy4uLy4uL3V0aWxzL2NyZWF0ZVRlbXBDYXJkJztcbmltcG9ydCBwcmVmaXhDc3MgZnJvbSAnLi4vLi4vdXRpbHMvcHJlZml4Q3NzJztcbmltcG9ydCBEaXJlY3Rpb25zIGZyb20gJy4uLy4uL3ZhbHVlcy9kaXJlY3Rpb25zJztcbmltcG9ydCB7IEZsaXBBbmltYXRpb25PcHRpb24gfSBmcm9tICcuL2ZsaXBBbmltYXRpb24nO1xuXG5jb25zdCBiYWNrZ3JvdW5kU3R5bGUgPSBgXG4gIDpob3N0IHtcbiAgICAtLXJpZ2h0LXgtbGVmdDogNTAlO1xuICAgIC0tcmlnaHQteC1yaWdodDogMTAwdnc7XG4gICAgLS1sZWZ0LXgtbGVmdDogLTEwMHZ3O1xuICAgIC0tbGVmdC14LXJpZ2h0OiA1MCU7XG5cbiAgICAke3ByZWZpeENzcyhgY2xpcC1wYXRoOiBwb2x5Z29uKFxuICAgICAgdmFyKC0teC1sZWZ0KSAtMTAwdmgsXG4gICAgICB2YXIoLS14LXJpZ2h0KSAtMTAwdmgsXG4gICAgICB2YXIoLS14LXJpZ2h0KSBjYWxjKDEwMCUgKyAxMDB2aCksXG4gICAgICB2YXIoLS14LWxlZnQpIGNhbGMoMTAwJSArIDEwMHZoKVxuICAgICk7YCwgJ3dlYmtpdCcpfVxuICB9XG5gO1xuY29uc3Qgd3JhcHBlclN0eWxlID0gYFxuICAke3ByZWZpeENzcyhgQGtleWZyYW1lcyBjbGlwIHtcbiAgICAwJSB7XG4gICAgICAke3ByZWZpeENzcyhgY2xpcC1wYXRoOiBwb2x5Z29uKFxuICAgICAgICB2YXIoLS1zdGFydC14LWxlZnQpIC0xMDB2aCxcbiAgICAgICAgdmFyKC0tc3RhcnQteC1yaWdodCkgLTEwMHZoLFxuICAgICAgICB2YXIoLS1zdGFydC14LXJpZ2h0KSBjYWxjKDEwMCUgKyAxMDB2aCksXG4gICAgICAgIHZhcigtLXN0YXJ0LXgtbGVmdCkgY2FsYygxMDAlICsgMTAwdmgpXG4gICAgICApO2AsICd3ZWJraXQnKX1cbiAgICB9XG4gICAgNTAlLCAxMDAlIHtcbiAgICAgICR7cHJlZml4Q3NzKGBjbGlwLXBhdGg6IHBvbHlnb24oXG4gICAgICAgIHZhcigtLWVuZC14LWxlZnQpIC0xMDB2aCxcbiAgICAgICAgdmFyKC0tZW5kLXgtcmlnaHQpIC0xMDB2aCxcbiAgICAgICAgdmFyKC0tZW5kLXgtcmlnaHQpIGNhbGMoMTAwJSArIDEwMHZoKSxcbiAgICAgICAgdmFyKC0tZW5kLXgtbGVmdCkgY2FsYygxMDAlICsgMTAwdmgpXG4gICAgICApO2AsICd3ZWJraXQnKX1cbiAgICB9XG4gIH1gLCAnd2Via2l0Jyl9XG5cbiAgOmhvc3Qge1xuICAgIC0taG9yaS1wZXJzcGVjdGl2ZTogdmFyKC0tM2QtcGVyc3BlY3RpdmUsIDVlbSk7XG4gICAgLS1yaWdodC14LWxlZnQ6IDUwJTtcbiAgICAtLXJpZ2h0LXgtcmlnaHQ6IGNhbGMoMTAwJSArIDEwMHZ3KTtcbiAgICAtLWxlZnQteC1sZWZ0OiAtMTAwdnc7XG4gICAgLS1sZWZ0LXgtcmlnaHQ6IDUwJTtcblxuICAgICR7cHJlZml4Q3NzKCdwZXJzcGVjdGl2ZTogdmFyKC0taG9yaS1wZXJzcGVjdGl2ZSk7JywgJ3dlYmtpdCcpfVxuICAgICR7cHJlZml4Q3NzKCdhbmltYXRpb246IGNsaXAgdmFyKC0tZHVyYXRpb24pIGZvcndhcmRzIHN0ZXBzKDEsIGVuZCk7JywgJ3dlYmtpdCcpfVxuICB9XG5gO1xuY29uc3QgY2FyZFN0eWxlID0gYFxuICAke3ByZWZpeENzcyhgQGtleWZyYW1lcyBmbGlwIHtcbiAgICAwJSB7XG4gICAgICAke3ByZWZpeENzcygndHJhbnNmb3JtOiByb3RhdGVZKDApOycsICd3ZWJraXQnKX1cbiAgICB9XG4gICAgMTAwJSB7XG4gICAgICAke3ByZWZpeENzcygndHJhbnNmb3JtOiByb3RhdGVZKHZhcigtLWVuZC1kZWcpKTsnLCAnd2Via2l0Jyl9XG4gICAgfVxuICB9YCwgJ3dlYmtpdCcpfVxuXG4gIDpob3N0IHtcbiAgICAtLWxlZnQtZW5kLWRlZzogLTE4MGRlZztcbiAgICAtLXJpZ2h0LWVuZC1kZWc6IDE4MGRlZztcblxuICAgICR7cHJlZml4Q3NzKCd0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkOycsICd3ZWJraXQnKX1cbiAgICAke3ByZWZpeENzcygnYW5pbWF0aW9uOiBmbGlwIHZhcigtLWR1cmF0aW9uKSBmb3J3YXJkcyBsaW5lYXI7JywgJ3dlYmtpdCcpfVxuICB9XG5gO1xuY29uc3QgbmV4dENhcmRTdHlsZSA9IGBcbiAgOmhvc3Qge1xuICAgICR7cHJlZml4Q3NzKCdiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47JywgJ3dlYmtpdCcpfVxuICAgICR7cHJlZml4Q3NzKCd0cmFuc2Zvcm06IHJvdGF0ZVkoMTgwZGVnKTsnLCAnd2Via2l0Jyl9XG4gIH1cbmA7XG5jb25zdCBsYXN0Q2FyZFN0eWxlID0gYFxuICA6aG9zdCB7XG4gICAgJHtwcmVmaXhDc3MoJ2JhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjsnLCAnd2Via2l0Jyl9XG4gIH1cbmA7XG5cbmZ1bmN0aW9uIGZsaXBwaW5nSG9yaXpvbnRhbGx5KFxuICB0aGlzOiBGbGlwLFxuICBvcHRpb25zOiBGbGlwQW5pbWF0aW9uT3B0aW9uLFxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHtcbiAgICBkdXJhdGlvbixcbiAgICBkaXJlY3Rpb24sXG4gICAgbGFzdENhcmQsXG4gICAgbmV4dENhcmQsXG4gICAgdGVtcENhcmQsXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBkdXJhdGlvblNlYyA9IGR1cmF0aW9uIC8gMTAwMDtcbiAgY29uc3QgZG9tQmFja2dyb3VuZCA9IGNyZWF0ZVRlbXBDYXJkKHsgc3R5bGU6IGJhY2tncm91bmRTdHlsZSB9KTtcbiAgY29uc3QgZG9tV3JhcHBlciA9IGNyZWF0ZVRlbXBDYXJkKHsgc3R5bGU6IHdyYXBwZXJTdHlsZSB9KTtcbiAgY29uc3QgZG9tQ2FyZCA9IGNyZWF0ZVRlbXBDYXJkKHsgc3R5bGU6IGNhcmRTdHlsZSB9KTtcbiAgY29uc3QgZG9tTmV4dCA9IGNyZWF0ZVRlbXBDYXJkKHsgc3R5bGU6IG5leHRDYXJkU3R5bGUgfSk7XG4gIGNvbnN0IGRvbU5leHRDYXJkID0gRmxpcC5jbG9uZUNhcmQobmV4dENhcmQpO1xuXG4gIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgZGVmYXVsdDpcbiAgICBjYXNlIERpcmVjdGlvbnMubGVmdDpcbiAgICAgIGRvbUJhY2tncm91bmQuc3R5bGUuc2V0UHJvcGVydHkoJy0teC1sZWZ0JywgJ3ZhcigtLWxlZnQteC1sZWZ0KScpO1xuICAgICAgZG9tQmFja2dyb3VuZC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS14LXJpZ2h0JywgJ3ZhcigtLWxlZnQteC1yaWdodCknKTtcbiAgICAgIGRvbVdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3RhcnQteC1sZWZ0JywgJ3ZhcigtLXJpZ2h0LXgtbGVmdCknKTtcbiAgICAgIGRvbVdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3RhcnQteC1yaWdodCcsICd2YXIoLS1yaWdodC14LXJpZ2h0KScpO1xuICAgICAgZG9tV3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lbmQteC1sZWZ0JywgJ3ZhcigtLWxlZnQteC1sZWZ0KScpO1xuICAgICAgZG9tV3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lbmQteC1yaWdodCcsICd2YXIoLS1sZWZ0LXgtcmlnaHQpJyk7XG4gICAgICBkb21DYXJkLnN0eWxlLnNldFByb3BlcnR5KCctLWVuZC1kZWcnLCAndmFyKC0tbGVmdC1lbmQtZGVnKScpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIERpcmVjdGlvbnMucmlnaHQ6XG4gICAgICBkb21CYWNrZ3JvdW5kLnN0eWxlLnNldFByb3BlcnR5KCctLXgtbGVmdCcsICd2YXIoLS1yaWdodC14LWxlZnQpJyk7XG4gICAgICBkb21CYWNrZ3JvdW5kLnN0eWxlLnNldFByb3BlcnR5KCctLXgtcmlnaHQnLCAndmFyKC0tcmlnaHQteC1yaWdodCknKTtcbiAgICAgIGRvbVdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3RhcnQteC1sZWZ0JywgJ3ZhcigtLWxlZnQteC1sZWZ0KScpO1xuICAgICAgZG9tV3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zdGFydC14LXJpZ2h0JywgJ3ZhcigtLWxlZnQteC1yaWdodCknKTtcbiAgICAgIGRvbVdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tZW5kLXgtbGVmdCcsICd2YXIoLS1yaWdodC14LWxlZnQpJyk7XG4gICAgICBkb21XcmFwcGVyLnN0eWxlLnNldFByb3BlcnR5KCctLWVuZC14LXJpZ2h0JywgJ3ZhcigtLXJpZ2h0LXgtcmlnaHQpJyk7XG4gICAgICBkb21DYXJkLnN0eWxlLnNldFByb3BlcnR5KCctLWVuZC1kZWcnLCAndmFyKC0tcmlnaHQtZW5kLWRlZyknKTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgZG9tV3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1kdXJhdGlvbicsIGAke2R1cmF0aW9uU2VjfXNgKTtcbiAgZG9tTmV4dENhcmQucmVtb3ZlQXR0cmlidXRlKCdzbG90Jyk7XG4gIGRvbU5leHQuYXBwZW5kKGRvbU5leHRDYXJkKTtcbiAgZG9tQ2FyZC5hcHBlbmQoZG9tTmV4dCk7XG4gIGRvbVdyYXBwZXIuYXBwZW5kKGRvbUNhcmQpO1xuXG4gIGlmIChsYXN0Q2FyZCkge1xuICAgIGNvbnN0IGRvbUxhc3QgPSBjcmVhdGVUZW1wQ2FyZCh7IHN0eWxlOiBsYXN0Q2FyZFN0eWxlIH0pO1xuICAgIGNvbnN0IGRvbUxhc3RDYXJkID0gRmxpcC5jbG9uZUNhcmQobGFzdENhcmQpO1xuXG4gICAgZG9tTGFzdENhcmQucmVtb3ZlQXR0cmlidXRlKCdzbG90Jyk7XG4gICAgZG9tTGFzdC5hcHBlbmQoZG9tTGFzdENhcmQpO1xuICAgIGRvbUNhcmQuYXBwZW5kKGRvbUxhc3QpO1xuICAgIGRvbUJhY2tncm91bmQuYXBwZW5kKEZsaXAuY2xvbmVDYXJkKGRvbUxhc3QpKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIHRlbXBDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnYW5pbWF0aW9uZW5kJyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgfSxcbiAgICAgIHsgb25jZTogdHJ1ZSB9LFxuICAgICk7XG4gICAgdGVtcENhcmQuYXBwZW5kKGRvbUJhY2tncm91bmQpO1xuICAgIHRlbXBDYXJkLmFwcGVuZChkb21XcmFwcGVyKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZsaXBwaW5nSG9yaXpvbnRhbGx5O1xuIiwiaW1wb3J0IEZsaXAgZnJvbSAnLi4vLi4nO1xuaW1wb3J0IHByZWZpeENzcyBmcm9tICcuLi8uLi91dGlscy9wcmVmaXhDc3MnO1xuaW1wb3J0IERpcmVjdGlvbnMgZnJvbSAnLi4vLi4vdmFsdWVzL2RpcmVjdGlvbnMnO1xuaW1wb3J0IGNyZWF0ZVRlbXBDYXJkIGZyb20gJy4uLy4uL3V0aWxzL2NyZWF0ZVRlbXBDYXJkJztcbmltcG9ydCB7IEZsaXBBbmltYXRpb25PcHRpb24gfSBmcm9tICcuL2ZsaXBBbmltYXRpb24nO1xuXG5jb25zdCBiYWNrZ3JvdW5kU3R5bGUgPSBgXG4gIDpob3N0IHtcbiAgICAtLXVwcGVyLXktdG9wOiAtMTAwdmg7XG4gICAgLS11cHBlci15LWJvdHRvbTogNTAlO1xuICAgIC0tbG93ZXIteS10b3A6IDUwJTtcbiAgICAtLWxvd2VyLXktYm90dG9tOiBjYWxjKDEwMCUgKyAxMDB2aCk7XG5cbiAgICAke3ByZWZpeENzcyhgY2xpcC1wYXRoOiBwb2x5Z29uKFxuICAgICAgLTEwMHZ3IHZhcigtLXktdG9wKSxcbiAgICAgIGNhbGMoMTAwJSArIDEwMHZ3KSB2YXIoLS15LXRvcCksXG4gICAgICBjYWxjKDEwMCUgKyAxMDB2dykgdmFyKC0teS1ib3R0b20pLFxuICAgICAgLTEwMHZ3IHZhcigtLXktYm90dG9tKVxuICAgICk7YCwgJ3dlYmtpdCcpfVxuICB9XG5gO1xuY29uc3Qgd3JhcHBlclN0eWxlID0gYFxuICAke3ByZWZpeENzcyhgQGtleWZyYW1lcyBjbGlwIHtcbiAgICAwJSB7XG4gICAgICAke3ByZWZpeENzcyhgY2xpcC1wYXRoOiBwb2x5Z29uKFxuICAgICAgICAtMTAwdncgdmFyKC0tc3RhcnQteS10b3ApLFxuICAgICAgICBjYWxjKDEwMCUgKyAxMDB2dykgdmFyKC0tc3RhcnQteS10b3ApLFxuICAgICAgICBjYWxjKDEwMCUgKyAxMDB2dykgdmFyKC0tc3RhcnQteS1ib3R0b20pLFxuICAgICAgICAtMTAwdncgdmFyKC0tc3RhcnQteS1ib3R0b20pXG4gICAgICApO2AsICd3ZWJraXQnKX1cbiAgICB9XG4gICAgNTAlLCAxMDAlIHtcbiAgICAgICR7cHJlZml4Q3NzKGBjbGlwLXBhdGg6IHBvbHlnb24oXG4gICAgICAgIC0xMDB2dyB2YXIoLS1lbmQteS10b3ApLFxuICAgICAgICBjYWxjKDEwMCUgKyAxMDB2dykgdmFyKC0tZW5kLXktdG9wKSxcbiAgICAgICAgY2FsYygxMDAlICsgMTAwdncpIHZhcigtLWVuZC15LWJvdHRvbSksXG4gICAgICAgIC0xMDB2dyB2YXIoLS1lbmQteS1ib3R0b20pXG4gICAgICApO2AsICd3ZWJraXQnKX1cbiAgICB9XG4gIH1gLCAnd2Via2l0Jyl9XG5cbiAgOmhvc3Qge1xuICAgIC0tdmVydC1wZXJzcGVjdGl2ZTogdmFyKC0tM2QtcGVyc3BlY3RpdmUsIDVlbSk7XG4gICAgLS11cHBlci15LXRvcDogLTEwMHZoO1xuICAgIC0tdXBwZXIteS1ib3R0b206IDUwJTtcbiAgICAtLWxvd2VyLXktdG9wOiA1MCU7XG4gICAgLS1sb3dlci15LWJvdHRvbTogY2FsYygxMDAlICsgMTAwdmgpO1xuXG4gICAgJHtwcmVmaXhDc3MoJ3BlcnNwZWN0aXZlOiB2YXIoLS12ZXJ0LXBlcnNwZWN0aXZlKTsnLCAnd2Via2l0Jyl9XG4gICAgJHtwcmVmaXhDc3MoJ2FuaW1hdGlvbjogY2xpcCB2YXIoLS1kdXJhdGlvbikgZm9yd2FyZHMgc3RlcHMoMSwgZW5kKTsnLCAnd2Via2l0Jyl9XG4gIH1cbmA7XG5jb25zdCBjYXJkU3R5bGUgPSBgXG4gICR7cHJlZml4Q3NzKGBAa2V5ZnJhbWVzIGZsaXAge1xuICAgIDAlIHtcbiAgICAgICR7cHJlZml4Q3NzKCd0cmFuc2Zvcm06IHJvdGF0ZVgoMCk7JywgJ3dlYmtpdCcpfVxuICAgIH1cbiAgICAxMDAlIHtcbiAgICAgICR7cHJlZml4Q3NzKCd0cmFuc2Zvcm06IHJvdGF0ZVgodmFyKC0tZW5kLWRlZykpOycsICd3ZWJraXQnKX1cbiAgICB9XG4gIH1gLCAnd2Via2l0Jyl9XG5cbiAgOmhvc3Qge1xuICAgIC0tZG93bi1lbmQtZGVnOiAtMTgwZGVnO1xuICAgIC0tdXAtZW5kLWRlZzogMTgwZGVnO1xuXG4gICAgJHtwcmVmaXhDc3MoJ3RyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7JywgJ3dlYmtpdCcpfVxuICAgICR7cHJlZml4Q3NzKCdhbmltYXRpb246IGZsaXAgdmFyKC0tZHVyYXRpb24pIGZvcndhcmRzIGxpbmVhcjsnLCAnd2Via2l0Jyl9XG4gIH1cbmA7XG5jb25zdCBuZXh0Q2FyZFN0eWxlID0gYFxuICA6aG9zdCB7XG4gICAgJHtwcmVmaXhDc3MoJ2JhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjsnLCAnd2Via2l0Jyl9XG4gICAgJHtwcmVmaXhDc3MoJ3RyYW5zZm9ybTogcm90YXRlWCgxODBkZWcpOycsICd3ZWJraXQnKX1cbiAgfVxuYDtcbmNvbnN0IGxhc3RDYXJkU3R5bGUgPSBgXG4gIDpob3N0IHtcbiAgICAke3ByZWZpeENzcygnYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuOycsICd3ZWJraXQnKX1cbiAgfVxuYDtcblxuZnVuY3Rpb24gZmxpcHBpbmdWZXJ0aWNhbGx5KFxuICB0aGlzOiBGbGlwLFxuICBvcHRpb25zOiBGbGlwQW5pbWF0aW9uT3B0aW9uLFxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHtcbiAgICBkdXJhdGlvbixcbiAgICBkaXJlY3Rpb24sXG4gICAgbGFzdENhcmQsXG4gICAgbmV4dENhcmQsXG4gICAgdGVtcENhcmQsXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBkdXJhdGlvblNlYyA9IGR1cmF0aW9uIC8gMTAwMDtcbiAgY29uc3QgZG9tQmFja2dyb3VuZCA9IGNyZWF0ZVRlbXBDYXJkKHsgc3R5bGU6IGJhY2tncm91bmRTdHlsZSB9KTtcbiAgY29uc3QgZG9tV3JhcHBlciA9IGNyZWF0ZVRlbXBDYXJkKHsgc3R5bGU6IHdyYXBwZXJTdHlsZSB9KTtcbiAgY29uc3QgZG9tQ2FyZCA9IGNyZWF0ZVRlbXBDYXJkKHsgc3R5bGU6IGNhcmRTdHlsZSB9KTtcbiAgY29uc3QgZG9tTmV4dCA9IGNyZWF0ZVRlbXBDYXJkKHsgc3R5bGU6IG5leHRDYXJkU3R5bGUgfSk7XG4gIGNvbnN0IGRvbU5leHRDYXJkID0gRmxpcC5jbG9uZUNhcmQobmV4dENhcmQpO1xuXG4gIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgZGVmYXVsdDpcbiAgICBjYXNlIERpcmVjdGlvbnMuZG93bjpcbiAgICAgIGRvbUJhY2tncm91bmQuc3R5bGUuc2V0UHJvcGVydHkoJy0teS10b3AnLCAndmFyKC0tbG93ZXIteS10b3ApJyk7XG4gICAgICBkb21CYWNrZ3JvdW5kLnN0eWxlLnNldFByb3BlcnR5KCctLXktYm90dG9tJywgJ3ZhcigtLWxvd2VyLXktYm90dG9tKScpO1xuICAgICAgZG9tV3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zdGFydC15LXRvcCcsICd2YXIoLS11cHBlci15LXRvcCknKTtcbiAgICAgIGRvbVdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3RhcnQteS1ib3R0b20nLCAndmFyKC0tdXBwZXIteS1ib3R0b20pJyk7XG4gICAgICBkb21XcmFwcGVyLnN0eWxlLnNldFByb3BlcnR5KCctLWVuZC15LXRvcCcsICd2YXIoLS1sb3dlci15LXRvcCknKTtcbiAgICAgIGRvbVdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tZW5kLXktYm90dG9tJywgJ3ZhcigtLWxvd2VyLXktYm90dG9tKScpO1xuICAgICAgZG9tQ2FyZC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lbmQtZGVnJywgJ3ZhcigtLWRvd24tZW5kLWRlZyknKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBEaXJlY3Rpb25zLnVwOlxuICAgICAgZG9tQmFja2dyb3VuZC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS15LXRvcCcsICd2YXIoLS11cHBlci15LXRvcCknKTtcbiAgICAgIGRvbUJhY2tncm91bmQuc3R5bGUuc2V0UHJvcGVydHkoJy0teS1ib3R0b20nLCAndmFyKC0tdXBwZXIteS1ib3R0b20pJyk7XG4gICAgICBkb21XcmFwcGVyLnN0eWxlLnNldFByb3BlcnR5KCctLXN0YXJ0LXktdG9wJywgJ3ZhcigtLWxvd2VyLXktdG9wKScpO1xuICAgICAgZG9tV3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zdGFydC15LWJvdHRvbScsICd2YXIoLS1sb3dlci15LWJvdHRvbSknKTtcbiAgICAgIGRvbVdyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tZW5kLXktdG9wJywgJ3ZhcigtLXVwcGVyLXktdG9wKScpO1xuICAgICAgZG9tV3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lbmQteS1ib3R0b20nLCAndmFyKC0tdXBwZXIteS1ib3R0b20pJyk7XG4gICAgICBkb21DYXJkLnN0eWxlLnNldFByb3BlcnR5KCctLWVuZC1kZWcnLCAndmFyKC0tdXAtZW5kLWRlZyknKTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgZG9tV3JhcHBlci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1kdXJhdGlvbicsIGAke2R1cmF0aW9uU2VjfXNgKTtcbiAgZG9tTmV4dENhcmQucmVtb3ZlQXR0cmlidXRlKCdzbG90Jyk7XG4gIGRvbU5leHQuYXBwZW5kKGRvbU5leHRDYXJkKTtcbiAgZG9tQ2FyZC5hcHBlbmQoZG9tTmV4dCk7XG4gIGRvbVdyYXBwZXIuYXBwZW5kKGRvbUNhcmQpO1xuXG4gIGlmIChsYXN0Q2FyZCkge1xuICAgIGNvbnN0IGRvbUxhc3QgPSBjcmVhdGVUZW1wQ2FyZCh7IHN0eWxlOiBsYXN0Q2FyZFN0eWxlIH0pO1xuICAgIGNvbnN0IGRvbUxhc3RDYXJkID0gRmxpcC5jbG9uZUNhcmQobGFzdENhcmQpO1xuXG4gICAgZG9tTGFzdENhcmQucmVtb3ZlQXR0cmlidXRlKCdzbG90Jyk7XG4gICAgZG9tTGFzdC5hcHBlbmQoZG9tTGFzdENhcmQpO1xuICAgIGRvbUNhcmQuYXBwZW5kKGRvbUxhc3QpO1xuICAgIGRvbUJhY2tncm91bmQuYXBwZW5kKEZsaXAuY2xvbmVDYXJkKGRvbUxhc3QpKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIHRlbXBDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnYW5pbWF0aW9uZW5kJyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgfSxcbiAgICAgIHsgb25jZTogdHJ1ZSB9LFxuICAgICk7XG4gICAgdGVtcENhcmQuYXBwZW5kKGRvbUJhY2tncm91bmQpO1xuICAgIHRlbXBDYXJkLmFwcGVuZChkb21XcmFwcGVyKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZsaXBwaW5nVmVydGljYWxseTtcbiIsImltcG9ydCBGbGlwIGZyb20gJy4uLy4uL2ZsaXAnO1xuaW1wb3J0IERpcmVjdGlvbnMgZnJvbSAnLi4vLi4vdmFsdWVzL2RpcmVjdGlvbnMnO1xuaW1wb3J0IHsgRmxpcE9uZUNhcmRPcHRpb25zIH0gZnJvbSAnLi9mbGlwT25lQ2FyZCc7XG5pbXBvcnQgZmxpcHBpbmdIb3Jpem9udGFsbHkgZnJvbSAnLi9ob3Jpem9udGFsJztcbmltcG9ydCBmbGlwcGluZ1ZlcnRpY2FsbHkgZnJvbSAnLi92ZXJ0aWNhbCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxpcEFuaW1hdGlvbk9wdGlvbiBleHRlbmRzIEZsaXBPbmVDYXJkT3B0aW9ucyB7XG4gIHRlbXBDYXJkOiBIVE1MRWxlbWVudDtcbn1cblxuLyoqXG4gKiBEb2VzIGZsaXBwaW5nIGFuaW1hdGlvbiBmcm9tIGxhc3QgY2FyZCB0byBuZXh0IGNhcmQuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGZsaXBBbmltYXRpb24oXG4gIHRoaXM6IEZsaXAsXG4gIG9wdGlvbnM6IEZsaXBBbmltYXRpb25PcHRpb24sXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgc3dpdGNoIChvcHRpb25zLmRpcmVjdGlvbikge1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmxpcHBpbmdWZXJ0aWNhbGx5LmNhbGwodGhpcywge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkaXJlY3Rpb246IERpcmVjdGlvbnMuZG93bixcbiAgICAgIH0pO1xuXG4gICAgY2FzZSBEaXJlY3Rpb25zLnVwOlxuICAgIGNhc2UgRGlyZWN0aW9ucy5kb3duOlxuICAgICAgcmV0dXJuIGZsaXBwaW5nVmVydGljYWxseS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuXG4gICAgY2FzZSBEaXJlY3Rpb25zLnJpZ2h0OlxuICAgIGNhc2UgRGlyZWN0aW9ucy5sZWZ0OlxuICAgICAgcmV0dXJuIGZsaXBwaW5nSG9yaXpvbnRhbGx5LmNhbGwodGhpcywgb3B0aW9ucyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZmxpcEFuaW1hdGlvbjtcbiIsImltcG9ydCB7IEZsaXBPcHRpb25zIH0gZnJvbSAnLic7XG5pbXBvcnQgRmxpcCBmcm9tICcuLi8uLic7XG5pbXBvcnQgY3JlYXRlVGVtcENhcmQgZnJvbSAnLi4vLi4vdXRpbHMvY3JlYXRlVGVtcENhcmQnO1xuaW1wb3J0IHsgdHJpZ2dlckV2ZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnRIYW5kbGVyJztcbmltcG9ydCBDbGFzc05hbWVzIGZyb20gJy4uLy4uL3ZhbHVlcy9jbGFzc05hbWVzJztcbmltcG9ydCBFdmVudHMgZnJvbSAnLi4vLi4vdmFsdWVzL2V2ZW50cyc7XG5pbXBvcnQgU2xvdHMgZnJvbSAnLi4vLi4vdmFsdWVzL3Nsb3RzJztcbmltcG9ydCBmbGlwQW5pbWF0aW9uLCB7IEZsaXBBbmltYXRpb25PcHRpb24gfSBmcm9tICcuL2ZsaXBBbmltYXRpb24nO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZsaXBPbmVDYXJkT3B0aW9ucyBleHRlbmRzIFJlcXVpcmVkPEZsaXBPcHRpb25zPiB7XG4gIGxhc3RJbmRleDogbnVtYmVyO1xuICBsYXN0Q2FyZDogSFRNTEVsZW1lbnQgfCBudWxsO1xuICBuZXh0SW5kZXg6IG51bWJlcjtcbiAgbmV4dENhcmQ6IEhUTUxFbGVtZW50O1xufVxuXG5hc3luYyBmdW5jdGlvbiBmbGlwT25lQ2FyZChcbiAgdGhpczogRmxpcCxcbiAgb3B0aW9uczogRmxpcE9uZUNhcmRPcHRpb25zLFxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHsgbmV4dEluZGV4IH0gPSBvcHRpb25zO1xuICBjb25zdCB0ZW1wQ2FyZCA9IGF3YWl0IGNyZWF0ZVRlbXBDYXJkKHtcbiAgICBjbGFzc05hbWU6IENsYXNzTmFtZXMudGVtcCxcbiAgICBzbG90OiBTbG90cy50ZW1wLFxuICB9KTtcbiAgY29uc3QgbGFzdFRlbXBDYXJkID0gdGhpcy5xdWVyeVNlbGVjdG9yKGAuJHtDbGFzc05hbWVzLnRlbXB9YCk7XG5cbiAgaWYgKGxhc3RUZW1wQ2FyZCkge1xuICAgIGxhc3RUZW1wQ2FyZC5yZW1vdmUoKTtcbiAgfVxuXG4gIHRoaXMuaW5kZXggPSBuZXh0SW5kZXg7XG4gIHRoaXMuYXBwZW5kKHRlbXBDYXJkKTtcblxuICBjb25zdCBjYXJkU3RhcnRFdmVudFBhc3NlZCA9IHRyaWdnZXJFdmVudDxGbGlwQW5pbWF0aW9uT3B0aW9uPihcbiAgICB0aGlzLFxuICAgIEV2ZW50cy5mbGlwQ2FyZFN0YXJ0LFxuICAgIHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgY29tcG9zZWQ6IHRydWUsXG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgdGVtcENhcmQsXG4gICAgICB9LFxuICAgIH0sXG4gICk7XG5cbiAgaWYgKGNhcmRTdGFydEV2ZW50UGFzc2VkKSB7XG4gICAgYXdhaXQgZmxpcEFuaW1hdGlvbi5jYWxsKHRoaXMsIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICB0ZW1wQ2FyZCxcbiAgICB9KTtcbiAgfVxuXG4gIHRyaWdnZXJFdmVudDxGbGlwQW5pbWF0aW9uT3B0aW9uPihcbiAgICB0aGlzLFxuICAgIEV2ZW50cy5mbGlwQ2FyZEVuZCxcbiAgICB7XG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogZmFsc2UsXG4gICAgICBjb21wb3NlZDogdHJ1ZSxcbiAgICAgIGRldGFpbDoge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICB0ZW1wQ2FyZCxcbiAgICAgIH0sXG4gICAgfSxcbiAgKTtcbiAgdGVtcENhcmQucmVtb3ZlKCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZsaXBPbmVDYXJkO1xuIiwiaW1wb3J0IEZsaXAgZnJvbSAnLi4vLi4vZmxpcCc7XG5pbXBvcnQgeyB0cmlnZ2VyRXZlbnQgfSBmcm9tICcuLi8uLi91dGlscy9ldmVudEhhbmRsZXInO1xuaW1wb3J0IERpcmVjdGlvbnMgZnJvbSAnLi4vLi4vdmFsdWVzL2RpcmVjdGlvbnMnO1xuaW1wb3J0IEV2ZW50cyBmcm9tICcuLi8uLi92YWx1ZXMvZXZlbnRzJztcbmltcG9ydCBNb2RlcyBmcm9tICcuLi8uLi92YWx1ZXMvbW9kZXMnO1xuaW1wb3J0IGZsaXBPbmVDYXJkIGZyb20gJy4vZmxpcE9uZUNhcmQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZsaXBPcHRpb25zIHtcbiAgZGlyZWN0PzogYm9vbGVhbjtcbiAgZGlyZWN0aW9uPzogRGlyZWN0aW9ucztcbiAgZHVyYXRpb24/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxpcERldGFpbCBleHRlbmRzIFJlcXVpcmVkPEZsaXBPcHRpb25zPiB7XG4gIGxhc3RJbmRleDogbnVtYmVyO1xuICBsYXN0Q2FyZDogSFRNTEVsZW1lbnQgfCBudWxsO1xuICB0YXJnZXRJbmRleDogbnVtYmVyO1xuICB0YXJnZXRDYXJkOiBIVE1MRWxlbWVudDtcbn1cblxuLyoqXG4gKiBGbGlwcyB0byBzcGVjaWZpYyBjYXJkL2luZGV4LlxuICovXG5hc3luYyBmdW5jdGlvbiBmbGlwKFxuICB0aGlzOiBGbGlwLFxuICBuZXh0OiBudW1iZXIgfCBIVE1MRWxlbWVudCB8IG51bGwsXG4gIG9wdGlvbnM6IEZsaXBPcHRpb25zID0ge30sXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qge1xuICAgIGNhcmQ6IG5leHRDYXJkLFxuICAgIGluZGV4OiBuZXh0SW5kZXgsXG4gIH0gPSB0aGlzLmdldENhcmRJbmZvKFxuICAgIG5leHRcbiAgICA/PyB0aGlzLmdldE5leHRJbmRleCh7XG4gICAgICBkaWZmZXJlbnQ6IHRoaXMuY2FyZHMubGVuZ3RoID4gMSxcbiAgICB9KSxcbiAgKTtcblxuICBpZiAobmV4dENhcmQgPT09IG51bGwpIHtcbiAgICBpZiAobmV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCdUYXJnZXQgY2FyZCBkb2VzblxcJ3QgZXhpc3QnKTtcbiAgfVxuXG4gIGNvbnN0IHtcbiAgICBpbmRleDogbGFzdEluZGV4LFxuICAgIGNhcmQ6IGxhc3RDYXJkLFxuICB9ID0gdGhpcztcbiAgY29uc3Qge1xuICAgIGRpcmVjdCA9IGZhbHNlLFxuICAgIGR1cmF0aW9uID0gdGhpcy5kdXJhdGlvbixcbiAgICBkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbixcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHN0YXJ0RXZlbnRQYXNzZWQgPSB0cmlnZ2VyRXZlbnQ8RmxpcERldGFpbD4oXG4gICAgdGhpcyxcbiAgICBFdmVudHMuZmxpcFN0YXJ0LFxuICAgIHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgY29tcG9zZWQ6IHRydWUsXG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgZGlyZWN0LFxuICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgZGlyZWN0aW9uLFxuICAgICAgICBsYXN0SW5kZXgsXG4gICAgICAgIGxhc3RDYXJkLFxuICAgICAgICB0YXJnZXRJbmRleDogbmV4dEluZGV4LFxuICAgICAgICB0YXJnZXRDYXJkOiBuZXh0Q2FyZCxcbiAgICAgIH0sXG4gICAgfSxcbiAgKTtcblxuICBpZiAoIXN0YXJ0RXZlbnRQYXNzZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoZGlyZWN0KSB7XG4gICAgYXdhaXQgZmxpcE9uZUNhcmQuY2FsbCh0aGlzLCB7XG4gICAgICBkaXJlY3QsXG4gICAgICBkdXJhdGlvbixcbiAgICAgIGRpcmVjdGlvbixcbiAgICAgIGxhc3RJbmRleCxcbiAgICAgIGxhc3RDYXJkLFxuICAgICAgbmV4dEluZGV4LFxuICAgICAgbmV4dENhcmQsXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qge1xuICAgICAgbW9kZSxcbiAgICAgIGNhcmRzLFxuICAgICAgbWluRmxpcHMsXG4gICAgICBtYXhGbGlwcyxcbiAgICB9ID0gdGhpcztcbiAgICBjb25zdCBjYXJkc0xlbmd0aCA9IGNhcmRzLmxlbmd0aDtcbiAgICBjb25zdCBnZXROZXh0SW5kZXggPSAodGltZXM6IG51bWJlcikgPT4ge1xuICAgICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNhc2UgTW9kZXMubG9vcDpcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXROZXh0SW5kZXgoKSBhcyBudW1iZXI7XG5cbiAgICAgICAgY2FzZSBNb2Rlcy5yYW5kb206IHtcbiAgICAgICAgICBpZiAodGltZXMgPCBtYXhGbGlwcykge1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5nZXROZXh0SW5kZXgoKSBhcyBudW1iZXI7XG5cbiAgICAgICAgICAgIHdoaWxlIChjYXJkc0xlbmd0aCA+IDJcbiAgICAgICAgICAgICAgJiYgKHRpbWVzIDwgbWluRmxpcHMgJiYgaW5kZXggPT09IG5leHRJbmRleClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuZ2V0TmV4dEluZGV4KCkgYXMgbnVtYmVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG5leHRJbmRleDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgZmxpcE5leHQgPSBhc3luYyAoXG4gICAgICBwcmV2SW5kZXg6IG51bWJlcixcbiAgICAgIHByZXZDYXJkOiBIVE1MRWxlbWVudCB8IG51bGwsXG4gICAgICB0aW1lcyA9IDEsXG4gICAgKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgICBjb25zdCB0YXJnZXRJbmRleCA9IGdldE5leHRJbmRleCh0aW1lcyk7XG4gICAgICBjb25zdCB0YXJnZXRDYXJkID0gdGhpcy5nZXRDYXJkQnlJbmRleCh0YXJnZXRJbmRleCkgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgIGF3YWl0IGZsaXBPbmVDYXJkLmNhbGwodGhpcywge1xuICAgICAgICBkaXJlY3QsXG4gICAgICAgIGR1cmF0aW9uLFxuICAgICAgICBkaXJlY3Rpb24sXG4gICAgICAgIGxhc3RJbmRleDogcHJldkluZGV4LFxuICAgICAgICBsYXN0Q2FyZDogcHJldkNhcmQsXG4gICAgICAgIG5leHRJbmRleDogdGFyZ2V0SW5kZXgsXG4gICAgICAgIG5leHRDYXJkOiB0YXJnZXRDYXJkLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICh0YXJnZXRJbmRleCAhPT0gbmV4dEluZGV4KSB7XG4gICAgICAgIGF3YWl0IGZsaXBOZXh0KHRhcmdldEluZGV4LCB0YXJnZXRDYXJkLCB0aW1lcyArIDEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBhd2FpdCBmbGlwTmV4dChsYXN0SW5kZXgsIGxhc3RDYXJkKTtcbiAgfVxuXG4gIHRyaWdnZXJFdmVudDxGbGlwRGV0YWlsPihcbiAgICB0aGlzLFxuICAgIEV2ZW50cy5mbGlwRW5kLFxuICAgIHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiBmYWxzZSxcbiAgICAgIGNvbXBvc2VkOiB0cnVlLFxuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIGRpcmVjdCxcbiAgICAgICAgZHVyYXRpb24sXG4gICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgbGFzdEluZGV4LFxuICAgICAgICBsYXN0Q2FyZCxcbiAgICAgICAgdGFyZ2V0SW5kZXg6IG5leHRJbmRleCxcbiAgICAgICAgdGFyZ2V0Q2FyZDogbmV4dENhcmQsXG4gICAgICB9LFxuICAgIH0sXG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZsaXA7XG4iLCJpbXBvcnQgRmxpcCBmcm9tICcuLi9mbGlwJztcblxuaW50ZXJmYWNlIENhcmRJbmZvIHtcbiAgaW5kZXg6IG51bWJlcjtcbiAgY2FyZDogSFRNTEVsZW1lbnQgfCBudWxsO1xufVxuXG4vKipcbiAqIFJldHVybnMgY2FyZCBpbmZvIHdpdGggaW5kZXggYW5kIGNhcmQgZWxlbWVudC5cbiAqL1xuZnVuY3Rpb24gZ2V0Q2FyZEluZm8oXG4gIHRoaXM6IEZsaXAsXG4gIHNvdXJjZTogbnVtYmVyIHwgSFRNTEVsZW1lbnQgfCBudWxsLFxuKTogQ2FyZEluZm8ge1xuICBpZiAoc291cmNlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZ2V0SW5kZXhCeUNhcmQoc291cmNlKTtcblxuICAgIHJldHVybiB7XG4gICAgICBpbmRleCxcbiAgICAgIGNhcmQ6IGluZGV4ID49IDAgPyBzb3VyY2UgOiBudWxsLFxuICAgIH07XG4gIH1cbiAgaWYgKHNvdXJjZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiB7XG4gICAgICBpbmRleDogLTEsXG4gICAgICBjYXJkOiBudWxsLFxuICAgIH07XG4gIH1cblxuICBjb25zdCBjYXJkID0gdGhpcy5nZXRDYXJkQnlJbmRleChzb3VyY2UpO1xuXG4gIHJldHVybiB7XG4gICAgY2FyZCxcbiAgICBpbmRleDogY2FyZCA9PT0gbnVsbCA/IC0xIDogc291cmNlLFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBnZXRDYXJkSW5mbztcbiIsImltcG9ydCBGbGlwIGZyb20gJy4uL2ZsaXAnO1xuaW1wb3J0IE1vZGVzIGZyb20gJy4uL3ZhbHVlcy9tb2Rlcyc7XG5cbmludGVyZmFjZSBHZXROZXh0Q2FyZE9wdGlvbnMge1xuICBkaWZmZXJlbnQ/OiBib29sZWFuO1xuICBtb2RlPzogTW9kZXM7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbmV4dCBjYXJkIGluZGV4LlxuICovXG5mdW5jdGlvbiBnZXROZXh0SW5kZXgoXG4gIHRoaXM6IEZsaXAsXG4gIG9wdGlvbnM6IEdldE5leHRDYXJkT3B0aW9ucyA9IHt9LFxuKTogbnVtYmVyIHwgbnVsbCB7XG4gIGNvbnN0IHtcbiAgICBkaWZmZXJlbnQgPSB0cnVlLFxuICAgIG1vZGUgPSB0aGlzLm1vZGUsXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCB7IGluZGV4LCBjYXJkcyB9ID0gdGhpcztcbiAgY29uc3QgeyBsZW5ndGggfSA9IGNhcmRzO1xuXG4gIHN3aXRjaCAobW9kZSkge1xuICAgIGRlZmF1bHQ6XG4gICAgY2FzZSBNb2Rlcy5sb29wOiB7XG4gICAgICBjb25zdCBuZXh0SW5kZXggPSAoaW5kZXggKyAxKSAlIGxlbmd0aDtcblxuICAgICAgcmV0dXJuIChkaWZmZXJlbnQgJiYgbmV4dEluZGV4ID09PSBpbmRleFxuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBuZXh0SW5kZXhcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY2FzZSBNb2Rlcy5yYW5kb206XG4gICAgICBzd2l0Y2ggKGxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHJldHVybiBkaWZmZXJlbnQgPyBudWxsIDogdGhpcy5pbmRleDtcblxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgbGV0IG5leHRJbmRleCA9IC0xO1xuXG4gICAgICAgICAgd2hpbGUgKG5leHRJbmRleCA9PT0gLTEgfHwgKGRpZmZlcmVudCAmJiBuZXh0SW5kZXggPT09IGluZGV4KSkge1xuICAgICAgICAgICAgbmV4dEluZGV4ID0gTWF0aC5mbG9vcihsZW5ndGggKiBNYXRoLnJhbmRvbSgpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gbmV4dEluZGV4O1xuICAgICAgICB9XG4gICAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2V0TmV4dEluZGV4O1xuIiwiZW51bSBBdHRyaWJ1dGVzIHtcbiAgaW5kZXggPSAnaW5kZXgnLFxuICB2YWx1ZSA9ICd2YWx1ZScsXG4gIG1vZGUgPSAnbW9kZScsXG4gIGR1cmF0aW9uID0gJ2R1cmF0aW9uJyxcbiAgZGlyZWN0aW9uID0gJ2RpcmVjdGlvbicsXG4gIG1pbkZsaXBzID0gJ21pbi1mbGlwcycsXG4gIG1heEZsaXBzID0gJ21heC1mbGlwcycsXG4gIHBlcnNwZWN0aXZlID0gJ3BlcnNwZWN0aXZlJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgQXR0cmlidXRlcztcbiIsImVudW0gU3R5bGVzIHtcbiAgcGVyc3BlY3RpdmUgPSAnLS0zZC1wZXJzcGVjdGl2ZScsXG59XG5cbmV4cG9ydCBkZWZhdWx0IFN0eWxlcztcbiIsImltcG9ydCBmbGlwLCB7IEZsaXBPcHRpb25zIH0gZnJvbSAnLi9tZXRob2RzL2ZsaXAnO1xuaW1wb3J0IGZsaXBBbmltYXRpb24gZnJvbSAnLi9tZXRob2RzL2ZsaXAvZmxpcEFuaW1hdGlvbic7XG5pbXBvcnQgZ2V0Q2FyZEluZm8gZnJvbSAnLi9tZXRob2RzL2dldENhcmRJbmZvJztcbmltcG9ydCBnZXROZXh0SW5kZXggZnJvbSAnLi9tZXRob2RzL2dldE5leHRJbmRleCc7XG5pbXBvcnQgcmVnaXN0ZXJFbGVtZW50IGZyb20gJy4vdXRpbHMvcmVnaXN0ZXJFbGVtZW50JztcbmltcG9ydCBBdHRyaWJ1dGVzIGZyb20gJy4vdmFsdWVzL2F0dHJpYnV0ZXMnO1xuaW1wb3J0IERpcmVjdGlvbnMgZnJvbSAnLi92YWx1ZXMvZGlyZWN0aW9ucyc7XG5pbXBvcnQgTW9kZXMgZnJvbSAnLi92YWx1ZXMvbW9kZXMnO1xuaW1wb3J0IFNsb3RzIGZyb20gJy4vdmFsdWVzL3Nsb3RzJztcbmltcG9ydCBTdHlsZXMgZnJvbSAnLi92YWx1ZXMvc3R5bGVzJztcblxuY29uc3Qgbm9kZU5hbWUgPSAnZmxpcC1wYWNrJztcblxuY29uc3QgeyBpc05hTiB9ID0gZ2xvYmFsVGhpcztcbmNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcblxudGVtcGxhdGUuaW5uZXJIVE1MID0gYFxuICA8c3R5bGU+XG4gICAgOmhvc3Qge1xuICAgICAgLS0zZC1wZXJzcGVjdGl2ZTogMTByZW07XG5cbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICB9XG5cbiAgICBzbG90IHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIHotaW5kZXg6IDA7XG4gICAgfVxuXG4gICAgc2xvdDpub3QoW25hbWVdKSB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgPC9zdHlsZT5cbiAgPGZsaXA+XG4gICAgPHNsb3Q+PC9zbG90PlxuICAgIDxzbG90IG5hbWU9XCIke1Nsb3RzLmN1cnJlbnR9XCI+PC9zbG90PlxuICAgIDxzbG90IG5hbWU9XCIke1Nsb3RzLnRlbXB9XCI+PC9zbG90PlxuICA8L2ZsaXA+XG5gO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZsaXBwaW5nT3B0aW9uIHtcbiAgZHVyYXRpb246IG51bWJlcjtcbiAgaW5kZXg6IG51bWJlcjtcbiAgbGFzdEluZGV4OiBudW1iZXI7XG4gIGxhc3RDYXJkOiBIVE1MRWxlbWVudCB8IG51bGw7XG4gIHRlbXBDYXJkOiBIVE1MRWxlbWVudDtcbn1cblxuY2xhc3MgRmxpcCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgI21vZGU6IE1vZGVzID0gTW9kZXMubG9vcDtcblxuICAjZHVyYXRpb246IG51bWJlciA9IDQwMDtcblxuICAjZGlyZWN0aW9uOiBEaXJlY3Rpb25zID0gRGlyZWN0aW9ucy5kb3duO1xuXG4gICNpbmRleDogbnVtYmVyID0gLTE7XG5cbiAgI2NhcmRzOiBIVE1MRWxlbWVudFtdID0gQXJyYXkuZnJvbSh0aGlzLmNoaWxkcmVuKSBhcyBIVE1MRWxlbWVudFtdO1xuXG4gICNtaW5GbGlwczogbnVtYmVyID0gMDtcblxuICAjbWF4RmxpcHM6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAjcGVyc3BlY3RpdmU6IHN0cmluZyA9ICcxMHJlbSc7XG5cbiAgI3Jvb3RFbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgY29uc3Qgc2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuXG4gICAgc2hhZG93Um9vdC5hcHBlbmQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgIHRoaXMuI3Jvb3RFbGVtZW50ID0gc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCdmbGlwJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgKHNoYWRvd1Jvb3QucXVlcnlTZWxlY3Rvcignc2xvdDpub3QoW25hbWVdKScpIGFzIEhUTUxTbG90RWxlbWVudClcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdzbG90Y2hhbmdlJywgKCkgPT4ge1xuICAgICAgICB0aGlzLiNjYXJkcyA9IEFycmF5LmZyb20oXG4gICAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCc6c2NvcGUgPiA6bm90KFtzbG90PXRlbXBdKScpLFxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgRmxpcC5vYnNlcnZlZEF0dHJpYnV0ZXNcbiAgICAgIC5maWx0ZXIoKGF0dHJOYW1lKSA9PiB0aGlzLmhhc0F0dHJpYnV0ZShhdHRyTmFtZSkpXG4gICAgICAuZm9yRWFjaCgoYXR0ck5hbWUpID0+IHtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soYXR0ck5hbWUpO1xuICAgICAgfSk7XG5cbiAgICBpZiAodGhpcy5pbmRleCA9PT0gLTEpIHtcbiAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiBbXG4gICAgICBBdHRyaWJ1dGVzLmluZGV4LFxuICAgICAgQXR0cmlidXRlcy52YWx1ZSxcbiAgICAgIEF0dHJpYnV0ZXMubW9kZSxcbiAgICAgIEF0dHJpYnV0ZXMuZHVyYXRpb24sXG4gICAgICBBdHRyaWJ1dGVzLmRpcmVjdGlvbixcbiAgICAgIEF0dHJpYnV0ZXMubWluRmxpcHMsXG4gICAgICBBdHRyaWJ1dGVzLm1heEZsaXBzLFxuICAgICAgQXR0cmlidXRlcy5wZXJzcGVjdGl2ZSxcbiAgICBdO1xuICB9XG5cbiAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGF0dHJOYW1lOiBzdHJpbmcpIHtcbiAgICBzd2l0Y2ggKGF0dHJOYW1lKSB7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBBdHRyaWJ1dGVzLmluZGV4OiB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlcy5pbmRleCk7XG5cbiAgICAgICAgaWYgKGluZGV4ICE9PSBudWxsICYmIGluZGV4Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLmluZGV4ID0gTnVtYmVyKGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSBBdHRyaWJ1dGVzLnZhbHVlOiB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlcy52YWx1ZSk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jYXJkcy5maW5kSW5kZXgoKGNhcmQpID0+IChcbiAgICAgICAgICBGbGlwLmdldENhcmRWYWx1ZShjYXJkKSA9PT0gdmFsdWVcbiAgICAgICAgKSk7XG5cbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSBBdHRyaWJ1dGVzLm1vZGU6XG4gICAgICAgIGlmICh0aGlzLmhhc0F0dHJpYnV0ZShBdHRyaWJ1dGVzLm1vZGUpKSB7XG4gICAgICAgICAgdGhpcy5tb2RlID0gdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlcy5tb2RlKSBhcyBNb2RlcztcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBBdHRyaWJ1dGVzLmR1cmF0aW9uOiB7XG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlcy5kdXJhdGlvbik7XG5cbiAgICAgICAgaWYgKGR1cmF0aW9uICE9PSBudWxsICYmIGR1cmF0aW9uLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLmR1cmF0aW9uID0gTnVtYmVyKGR1cmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY2FzZSBBdHRyaWJ1dGVzLmRpcmVjdGlvbjpcbiAgICAgICAgaWYgKHRoaXMuaGFzQXR0cmlidXRlKEF0dHJpYnV0ZXMuZGlyZWN0aW9uKSkge1xuICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gdGhpcy5nZXRBdHRyaWJ1dGUoQXR0cmlidXRlcy5kaXJlY3Rpb24pIGFzIERpcmVjdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQXR0cmlidXRlcy5taW5GbGlwczoge1xuICAgICAgICBjb25zdCBtaW5GbGlwcyA9IHRoaXMuZ2V0QXR0cmlidXRlKEF0dHJpYnV0ZXMubWluRmxpcHMpO1xuXG4gICAgICAgIGlmIChtaW5GbGlwcyAhPT0gbnVsbCAmJiBtaW5GbGlwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5taW5GbGlwcyA9IE51bWJlcihtaW5GbGlwcyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgQXR0cmlidXRlcy5tYXhGbGlwczoge1xuICAgICAgICBjb25zdCBtYXhGbGlwcyA9IHRoaXMuZ2V0QXR0cmlidXRlKEF0dHJpYnV0ZXMubWF4RmxpcHMpO1xuXG4gICAgICAgIGlmIChtYXhGbGlwcyAhPT0gbnVsbCAmJiBtYXhGbGlwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5tYXhGbGlwcyA9IE51bWJlcihtYXhGbGlwcyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgQXR0cmlidXRlcy5wZXJzcGVjdGl2ZTpcbiAgICAgICAgaWYgKHRoaXMuaGFzQXR0cmlidXRlKEF0dHJpYnV0ZXMucGVyc3BlY3RpdmUpKSB7XG4gICAgICAgICAgdGhpcy5wZXJzcGVjdGl2ZSA9IHRoaXMuZ2V0QXR0cmlidXRlKEF0dHJpYnV0ZXMucGVyc3BlY3RpdmUpIGFzIHN0cmluZztcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmFsdWUgb2YgY2FyZC5cbiAgICovXG4gIHN0YXRpYyBnZXRDYXJkVmFsdWUoY2FyZDogSFRNTEVsZW1lbnQgfCBudWxsKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIGNhcmQ/LmdldEF0dHJpYnV0ZT8uKEF0dHJpYnV0ZXMudmFsdWUpID8/IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBjYXJkIGVsZW1lbnRzLlxuICAgKi9cbiAgZ2V0IGNhcmRzKCk6IEhUTUxFbGVtZW50W10ge1xuICAgIHJldHVybiBbLi4udGhpcy4jY2FyZHNdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgZmxpcHBpbmcgbW9kZS5cbiAgICovXG4gIGdldCBtb2RlKCk6IE1vZGVzIHtcbiAgICByZXR1cm4gdGhpcy4jbW9kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGZsaXBwaW5nIG1vZGUuXG4gICAqL1xuICBzZXQgbW9kZShtb2RlOiBNb2Rlcykge1xuICAgIGlmICghKG1vZGUgaW4gTW9kZXMpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIG1vZGU6ICR7bW9kZX1gKTtcbiAgICB9XG5cbiAgICB0aGlzLiNtb2RlID0gbW9kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGZsaXBwaW5nIGR1cmF0aW9uLlxuICAgKi9cbiAgZ2V0IGR1cmF0aW9uKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuI2R1cmF0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgZmxpcHBpbmcgZHVyYXRpb24uXG4gICAqL1xuICBzZXQgZHVyYXRpb24oZHVyYXRpb246IG51bWJlcikge1xuICAgIGlmIChpc05hTihkdXJhdGlvbikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgZHVyYXRpb246ICR7ZHVyYXRpb259YCk7XG4gICAgfSBlbHNlIGlmIChkdXJhdGlvbiA8IDApIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBEdXJhdGlvbiBzaG91bGQgYmUgZ3JlYXRlciB0aGFuIDA6ICR7ZHVyYXRpb259YCk7XG4gICAgfVxuXG4gICAgdGhpcy4jZHVyYXRpb24gPSBkdXJhdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGZsaXBwaW5nIGRpcmVjdGlvbi5cbiAgICovXG4gIGdldCBkaXJlY3Rpb24oKTogRGlyZWN0aW9ucyB7XG4gICAgcmV0dXJuIHRoaXMuI2RpcmVjdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGZsaXBwaW5nIGRpcmVjdGlvbi5cbiAgICovXG4gIHNldCBkaXJlY3Rpb24oZGlyZWN0aW9uOiBEaXJlY3Rpb25zKSB7XG4gICAgaWYgKCEoZGlyZWN0aW9uIGluIERpcmVjdGlvbnMpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIGRpcmVjdGlvbjogJHtkaXJlY3Rpb259YCk7XG4gICAgfVxuXG4gICAgdGhpcy4jZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgbWluIGZsaXBzLlxuICAgKi9cbiAgZ2V0IG1pbkZsaXBzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuI21pbkZsaXBzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgbWluIGZsaXBzLlxuICAgKi9cbiAgc2V0IG1pbkZsaXBzKG1pbkZsaXBzOiBudW1iZXIpIHtcbiAgICBpZiAoaXNOYU4obWluRmxpcHMpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIG1pbiBmbGlwczogJHttaW5GbGlwc31gKTtcbiAgICB9IGVsc2UgaWYgKHBhcnNlSW50KGAke21pbkZsaXBzfWAsIDEwKSAhPT0gbWluRmxpcHMpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYE1pbiBmbGlwcyBzaG91bGQgYmUgYW4gaW50ZWdlcjogJHttaW5GbGlwc31gKTtcbiAgICB9XG5cbiAgICB0aGlzLiNtaW5GbGlwcyA9IG1pbkZsaXBzO1xuXG4gICAgaWYgKHRoaXMubWF4RmxpcHMgPCBtaW5GbGlwcykge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXG4gICAgICAgICdTZXR0aW5nIG1pbiBmbGlwcyB0aGF0IGlzIGdyZWF0ZXIgdGhhbiBtYXggZmxpcHMgbWlnaHQgY2F1c2UgZmxpcHBpbmcgZXJyb3InLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBtYXggZmxpcHMuXG4gICAqL1xuICBnZXQgbWF4RmxpcHMoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy4jbWF4RmxpcHMgPz8gSW5maW5pdHk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBtYXggZmxpcHMuXG4gICAqL1xuICBzZXQgbWF4RmxpcHMobWF4RmxpcHM6IG51bWJlcikge1xuICAgIGlmIChpc05hTihtYXhGbGlwcykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgbWF4IGZsaXBzOiAke21heEZsaXBzfWApO1xuICAgIH0gZWxzZSBpZiAocGFyc2VJbnQoYCR7bWF4RmxpcHN9YCwgMTApICE9PSBtYXhGbGlwcykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgTWF4IGZsaXBzIHNob3VsZCBiZSBhbiBpbnRlZ2VyOiAke21heEZsaXBzfWApO1xuICAgIH1cblxuICAgIHRoaXMuI21heEZsaXBzID0gbWF4RmxpcHM7XG5cbiAgICBpZiAodGhpcy5taW5GbGlwcyA+IG1heEZsaXBzKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcbiAgICAgICAgJ1NldHRpbmcgbWF4IGZsaXBzIHRoYXQgaXMgbGVzcyB0aGFuIG1pbiBmbGlwcyBtaWdodCBjYXVzZSBmbGlwcGluZyBlcnJvcicsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIDNEIHBlcnNwZWN0aXZlIHZhbHVlLlxuICAgKi9cbiAgZ2V0IHBlcnNwZWN0aXZlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuI3BlcnNwZWN0aXZlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgM0QgcGVyc3BlY3RpdmUgdmFsdWUuXG4gICAqL1xuICBzZXQgcGVyc3BlY3RpdmUocGVyc3BlY3RpdmU6IHN0cmluZykge1xuICAgIGlmICh0eXBlb2YgcGVyc3BlY3RpdmUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLiNwZXJzcGVjdGl2ZSA9IHBlcnNwZWN0aXZlO1xuICAgICAgdGhpcy4jcm9vdEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoU3R5bGVzLnBlcnNwZWN0aXZlLCBwZXJzcGVjdGl2ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgY3VycmVudCBpbmRleC5cbiAgICovXG4gIGdldCBpbmRleCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLiNpbmRleDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGN1cnJlbnQgaW5kZXguXG4gICAqL1xuICBzZXQgaW5kZXgoaW5kZXg6IG51bWJlcikge1xuICAgIGlmIChpc05hTihpbmRleCkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgaW5kZXg6ICR7aW5kZXh9YCk7XG4gICAgfSBlbHNlIGlmIChwYXJzZUludChgJHtpbmRleH1gLCAxMCkgIT09IGluZGV4KSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbmRleCBzaG91bGQgYmUgYW4gaW50ZWdlcjogJHtpbmRleH1gKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuY2FyZHNbaW5kZXhdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBDYXJkIGluZGV4IGRvZXNuJ3QgZXhpc3Q6ICR7aW5kZXh9YCk7XG4gICAgfVxuXG4gICAgdGhpcy4jaW5kZXggPSBpbmRleDtcbiAgICB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoYFtzbG90PVwiJHtTbG90cy5jdXJyZW50fVwiXWApLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIGNhcmQucmVtb3ZlQXR0cmlidXRlKCdzbG90Jyk7XG4gICAgfSk7XG4gICAgdGhpcy5jYXJkc1tpbmRleF0uc2V0QXR0cmlidXRlKCdzbG90JywgU2xvdHMuY3VycmVudCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBjdXJyZW50IHZhbHVlLlxuICAgKi9cbiAgZ2V0IHZhbHVlKCk6IHN0cmluZyB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmdldFZhbHVlQnlJbmRleCh0aGlzLmluZGV4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGN1cnJlbnQgdmFsdWUuXG4gICAqL1xuICBzZXQgdmFsdWUodmFsdWU6IHN0cmluZyB8IG51bGwpIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuY2FyZHMuZmluZEluZGV4KChkb20pID0+IChcbiAgICAgIEZsaXAuZ2V0Q2FyZFZhbHVlKGRvbSkgPT09IHZhbHVlXG4gICAgKSk7XG5cbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoYFZhbHVlIGlzIG5vdCBpbiBjYXJkczogJHt2YWx1ZX1gKTtcbiAgICB9XG5cbiAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBjdXJyZW50IGNhcmQuXG4gICAqL1xuICBnZXQgY2FyZCgpOiBIVE1MRWxlbWVudCB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmdldENhcmRCeUluZGV4KHRoaXMuaW5kZXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgY3VycmVudCBjYXJkLlxuICAgKi9cbiAgc2V0IGNhcmQoY2FyZDogSFRNTEVsZW1lbnQgfCBudWxsKSB7XG4gICAgaWYgKGNhcmQgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuaW5kZXggPSAtMTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbmRleCA9IHRoaXMuY2FyZHMuaW5kZXhPZihjYXJkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbnRoIGNhcmQgYnkgaW5kZXguXG4gICAqL1xuICBnZXRDYXJkQnlJbmRleChpbmRleDogbnVtYmVyKTogSFRNTEVsZW1lbnQgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5jYXJkc1tpbmRleF0gPz8gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGNhcmQgaW5mbyB3aXRoIGluZGV4IGFuZCBjYXJkIGVsZW1lbnQuXG4gICAqL1xuICBnZXRDYXJkSW5mbyA9IGdldENhcmRJbmZvXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHZhbHVlIG9mIG50aCBjYXJkIGJ5IGluZGV4LlxuICAgKi9cbiAgZ2V0VmFsdWVCeUluZGV4KGluZGV4OiBudW1iZXIpOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gRmxpcC5nZXRDYXJkVmFsdWUodGhpcy5nZXRDYXJkQnlJbmRleChpbmRleCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGluZGV4IG9mIGNhcmQuXG4gICAqL1xuICBnZXRJbmRleEJ5Q2FyZChjYXJkOiBIVE1MRWxlbWVudCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY2FyZHMuaW5kZXhPZihjYXJkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgY2FyZCBtYXRjaGVzIG9mIHZhbHVlLlxuICAgKi9cbiAgZ2V0SW5kZXhCeVZhbHVlKHZhbHVlOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNhcmRzLmZpbmRJbmRleCgoY2FyZCkgPT4gKFxuICAgICAgRmxpcC5nZXRDYXJkVmFsdWUoY2FyZCkgPT09IHZhbHVlXG4gICAgKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbmV4dCBjYXJkIGluZGV4LlxuICAgKi9cbiAgZ2V0TmV4dEluZGV4ID0gZ2V0TmV4dEluZGV4XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG5leHQgY2FyZC5cbiAgICovXG4gIGdldE5leHRDYXJkKFxuICAgIC4uLmFyZ3M6IFBhcmFtZXRlcnM8RmxpcFsnZ2V0TmV4dEluZGV4J10+XG4gICk6IEhUTUxFbGVtZW50IHwgbnVsbCB7XG4gICAgY29uc3QgbmV4dEluZGV4ID0gdGhpcy5nZXROZXh0SW5kZXgoLi4uYXJncyk7XG5cbiAgICByZXR1cm4gKG5leHRJbmRleCAhPT0gbnVsbFxuICAgICAgPyB0aGlzLmdldENhcmRCeUluZGV4KG5leHRJbmRleClcbiAgICAgIDogbnVsbFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogRmxpcHMgdG8gc3BlY2lmaWMgY2FyZC9pbmRleC5cbiAgICovXG4gIGZsaXAgPSBmbGlwXG5cbiAgLyoqXG4gICAqIEFsaWFzIG9mIC5mbGlwKC4uLikuXG4gICAqL1xuICBmbGlwVG9DYXJkKGNhcmQ6IEhUTUxFbGVtZW50LCBvcHRpb25zPzogRmxpcE9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5mbGlwKGNhcmQsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZsaXBzIHRvIHRoZSBudGggY2FyZCBieSBpbmRleC5cbiAgICovXG4gIGZsaXBUb0luZGV4KGluZGV4OiBudW1iZXIsIG9wdGlvbnM/OiBGbGlwT3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmZsaXAodGhpcy5nZXRDYXJkQnlJbmRleChpbmRleCksIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZsaXBzIHRvIHNwZWNpZmljIGNhcmQvaW5kZXggRGlyZWN0bHkuXG4gICAqL1xuICBmbGlwRGlyZWN0bHkoLi4uW25leHQsIG9wdGlvbnNdOiBQYXJhbWV0ZXJzPEZsaXBbJ2ZsaXAnXT4pIHtcbiAgICByZXR1cm4gdGhpcy5mbGlwKG5leHQsIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBkaXJlY3Q6IHRydWUsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQWxpYXMgb2YgLmZsaXBEaXJlY3RseSguLi4pLlxuICAgKi9cbiAgZmxpcFRvQ2FyZERpcmVjdGx5KGNhcmQ6IEhUTUxFbGVtZW50LCBvcHRpb25zPzogRmxpcE9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5mbGlwRGlyZWN0bHkoY2FyZCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogRmxpcHMgZGlyZWN0bHkgdG8gdGhlIG50aCBjYXJkIGJ5IGluZGV4LlxuICAgKi9cbiAgZmxpcFRvSW5kZXhEaXJlY3RseShpbmRleDogbnVtYmVyLCBvcHRpb25zPzogRmxpcE9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5mbGlwRGlyZWN0bHkodGhpcy5nZXRDYXJkQnlJbmRleChpbmRleCksIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIERvZXMgZmxpcHBpbmcgYW5pbWF0aW9uIGZyb20gbGFzdCBjYXJkIHRvIG5leHQgY2FyZC5cbiAgICovXG4gIGZsaXBBbmltYXRpb24gPSBmbGlwQW5pbWF0aW9uXG5cbiAgLyoqXG4gICAqIFJldHVybnMgY2xvbmVkIGVsZW1lbnQgb2YgY2FyZC5cbiAgICpcbiAgICogVE9ETzogY2xvbmUgc3R5bGU/XG4gICAqL1xuICBzdGF0aWMgY2xvbmVDYXJkKGNhcmQ6IEhUTUxFbGVtZW50KTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IG5ld0NhcmQgPSBjYXJkLmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcblxuICAgIHsgLy8gY2FzZSBvZiBjYW52YXNcbiAgICAgIGNvbnN0IG5ld0NhcmRDYW52YXNlcyA9IEFycmF5LmZyb20obmV3Q2FyZC5xdWVyeVNlbGVjdG9yQWxsKCdjYW52YXMnKSk7XG5cbiAgICAgIGlmIChuZXdDYXJkIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICAgICAgbmV3Q2FyZENhbnZhc2VzLnB1c2gobmV3Q2FyZCk7XG4gICAgICB9XG4gICAgICBpZiAobmV3Q2FyZENhbnZhc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCdjYW52YXMnKS5mb3JFYWNoKChkb20sIGRvbUluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgY2FyZENhbnZhcyA9IGRvbSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICAgICAgICBjb25zdCBuZXdDYW52YXMgPSBuZXdDYXJkQ2FudmFzZXNbZG9tSW5kZXhdIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuXG4gICAgICAgICAgbmV3Q2FudmFzLndpZHRoID0gY2FyZENhbnZhcy53aWR0aDtcbiAgICAgICAgICBuZXdDYW52YXMuaGVpZ2h0ID0gY2FyZENhbnZhcy5oZWlnaHQ7XG4gICAgICAgICAgbmV3Q2FudmFzLmdldENvbnRleHQoJzJkJyk/LmRyYXdJbWFnZShjYXJkQ2FudmFzLCAwLCAwKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ld0NhcmQ7XG4gIH1cbn1cblxucmVnaXN0ZXJFbGVtZW50KEZsaXAsIG5vZGVOYW1lKTtcblxuZXhwb3J0IGRlZmF1bHQgRmxpcDtcbiIsIi8qKlxuICogUmVnaXN0ZXJzIGVsZW1lbnQuXG4gKi9cbmZ1bmN0aW9uIHJlZ2lzdGVyRWxlbWVudChcbiAgTm9kZTogdHlwZW9mIEhUTUxFbGVtZW50LFxuICBub2RlTmFtZTogc3RyaW5nLFxuKTogUmV0dXJuVHlwZTx0eXBlb2YgY3VzdG9tRWxlbWVudHMud2hlbkRlZmluZWQ+IHtcbiAgaWYgKGN1c3RvbUVsZW1lbnRzLmdldChub2RlTmFtZSkpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXG4gICAgICBuZXcgRXJyb3IoYEFscmVhZHkgZGVmaW5lZCA8JHtub2RlTmFtZX0+YCksXG4gICAgKTtcbiAgfVxuXG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZShub2RlTmFtZSwgTm9kZSk7XG5cbiAgcmV0dXJuIGN1c3RvbUVsZW1lbnRzLndoZW5EZWZpbmVkKG5vZGVOYW1lKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgcmVnaXN0ZXJFbGVtZW50O1xuIiwiaW1wb3J0IEZsaXAgZnJvbSAnLi9mbGlwJztcblxuZXhwb3J0IGRlZmF1bHQgRmxpcDtcbiJdLCJuYW1lcyI6WyJ0cmlnZ2VyRXZlbnQiLCJyZWYiLCJ0eXBlIiwib3B0aW9ucyIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsIkV2ZW50cyIsIk1vZGVzIiwiY2xhc3NOYW1lIiwic2xvdCIsInN0eWxlIiwiaW5uZXJIVE1MIiwidGVtcENhcmQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhdHRhY2hTaGFkb3ciLCJtb2RlIiwidW5kZWZpbmVkIiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiQ2xhc3NOYW1lcyIsIlNsb3RzIiwiRGlyZWN0aW9ucyIsImNzcyIsInByZWZpeHMiLCJoZWFkIiwidGVzdCIsInRleHQiLCJyZXBsYWNlIiwiQXJyYXkiLCJpc0FycmF5IiwibWFwIiwicHJlZml4IiwiY29uY2F0Iiwiam9pbiIsImJhY2tncm91bmRTdHlsZSIsInByZWZpeENzcyIsIndyYXBwZXJTdHlsZSIsImNhcmRTdHlsZSIsIm5leHRDYXJkU3R5bGUiLCJsYXN0Q2FyZFN0eWxlIiwiZHVyYXRpb24iLCJkaXJlY3Rpb24iLCJsYXN0Q2FyZCIsIm5leHRDYXJkIiwiZHVyYXRpb25TZWMiLCJkb21CYWNrZ3JvdW5kIiwiY3JlYXRlVGVtcENhcmQiLCJkb21XcmFwcGVyIiwiZG9tQ2FyZCIsImRvbU5leHQiLCJkb21OZXh0Q2FyZCIsIkZsaXAiLCJzZXRQcm9wZXJ0eSIsInJlbW92ZUF0dHJpYnV0ZSIsImFwcGVuZCIsImRvbUxhc3QiLCJkb21MYXN0Q2FyZCIsIlByb21pc2UiLCJyZXNvbHZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uY2UiLCJhc3luYyIsImZsaXBwaW5nVmVydGljYWxseSIsInRoaXMiLCJmbGlwcGluZ0hvcml6b250YWxseSIsIm5leHRJbmRleCIsImxhc3RUZW1wQ2FyZCIsInF1ZXJ5U2VsZWN0b3IiLCJyZW1vdmUiLCJpbmRleCIsImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwiY29tcG9zZWQiLCJkZXRhaWwiLCJmbGlwQW5pbWF0aW9uIiwibmV4dCIsImNhcmQiLCJnZXRDYXJkSW5mbyIsImdldE5leHRJbmRleCIsImRpZmZlcmVudCIsImNhcmRzIiwibGVuZ3RoIiwiUmVmZXJlbmNlRXJyb3IiLCJsYXN0SW5kZXgiLCJkaXJlY3QiLCJ0YXJnZXRJbmRleCIsInRhcmdldENhcmQiLCJmbGlwT25lQ2FyZCIsIm1pbkZsaXBzIiwibWF4RmxpcHMiLCJjYXJkc0xlbmd0aCIsInRpbWVzIiwiZmxpcE5leHQiLCJwcmV2SW5kZXgiLCJwcmV2Q2FyZCIsImdldENhcmRCeUluZGV4Iiwic291cmNlIiwiSFRNTEVsZW1lbnQiLCJnZXRJbmRleEJ5Q2FyZCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIkF0dHJpYnV0ZXMiLCJTdHlsZXMiLCJpc05hTiIsImdsb2JhbFRoaXMiLCJ0ZW1wbGF0ZSIsImZyb20iLCJjaGlsZHJlbiIsImNvbnN0cnVjdG9yIiwic3VwZXIiLCJzaGFkb3dSb290IiwiY29udGVudCIsImNsb25lTm9kZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJvYnNlcnZlZEF0dHJpYnV0ZXMiLCJmaWx0ZXIiLCJhdHRyTmFtZSIsImhhc0F0dHJpYnV0ZSIsImZvckVhY2giLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siLCJnZXRBdHRyaWJ1dGUiLCJOdW1iZXIiLCJ2YWx1ZSIsImZpbmRJbmRleCIsImdldENhcmRWYWx1ZSIsInBlcnNwZWN0aXZlIiwiVHlwZUVycm9yIiwiUmFuZ2VFcnJvciIsInBhcnNlSW50IiwiSW5maW5pdHkiLCJnZXRWYWx1ZUJ5SW5kZXgiLCJkb20iLCJpbmRleE9mIiwiZ2V0SW5kZXhCeVZhbHVlIiwiZ2V0TmV4dENhcmQiLCJhcmdzIiwiZmxpcCIsImZsaXBUb0NhcmQiLCJmbGlwVG9JbmRleCIsImZsaXBEaXJlY3RseSIsImZsaXBUb0NhcmREaXJlY3RseSIsImZsaXBUb0luZGV4RGlyZWN0bHkiLCJuZXdDYXJkIiwibmV3Q2FyZENhbnZhc2VzIiwiSFRNTENhbnZhc0VsZW1lbnQiLCJwdXNoIiwiZG9tSW5kZXgiLCJjYXJkQ2FudmFzIiwibmV3Q2FudmFzIiwid2lkdGgiLCJoZWlnaHQiLCJnZXRDb250ZXh0IiwiZHJhd0ltYWdlIiwiTm9kZSIsIm5vZGVOYW1lIiwiY3VzdG9tRWxlbWVudHMiLCJnZXQiLCJyZWplY3QiLCJFcnJvciIsImRlZmluZSIsIndoZW5EZWZpbmVkIl0sInNvdXJjZVJvb3QiOiIifQ==